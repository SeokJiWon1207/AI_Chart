package drfn.chart.util;import static android.view.View.TEXT_ALIGNMENT_TEXT_START;import android.annotation.SuppressLint;import android.app.Activity;import android.app.Dialog;import android.content.ContentValues;import android.content.Context;import android.content.Intent;import android.content.SharedPreferences;import android.content.pm.ActivityInfo;import android.content.res.Configuration;import android.content.res.Resources;import android.database.Cursor;import android.database.sqlite.SQLiteDatabase;import android.database.sqlite.SQLiteOpenHelper;import android.graphics.Bitmap;import android.graphics.BitmapFactory;import android.graphics.Canvas;import android.graphics.Color;import android.graphics.Insets;import android.graphics.Paint;import android.graphics.Point;import android.graphics.Rect;import android.graphics.RectF;import android.graphics.Typeface;import android.graphics.drawable.BitmapDrawable;import android.graphics.drawable.ColorDrawable;import android.graphics.drawable.Drawable;import android.graphics.drawable.GradientDrawable;import android.graphics.drawable.LayerDrawable;import android.graphics.drawable.StateListDrawable;import android.opengl.GLUtils;import android.os.Build;import android.os.Handler;import android.util.DisplayMetrics;import android.util.Log;import android.util.TypedValue;import android.view.Display;import android.view.Gravity;import android.view.LayoutInflater;import android.view.MotionEvent;import android.view.View;import android.view.ViewGroup;import android.view.ViewGroup.LayoutParams;import android.view.Window;import android.view.WindowInsets;import android.view.WindowManager;import android.view.WindowMetrics;import android.view.animation.Animation;import android.view.animation.AnimationUtils;import android.view.inputmethod.InputMethodManager;import android.widget.Button;import android.widget.CheckBox;import android.widget.EditText;import android.widget.LinearLayout;import android.widget.PopupWindow;import android.widget.RelativeLayout;import android.widget.TextView;import android.widget.Toast;import java.io.BufferedInputStream;import java.io.BufferedOutputStream;import java.io.File;import java.io.FileInputStream;import java.io.FileNotFoundException;import java.io.FileOutputStream;import java.io.IOException;import java.io.InputStream;import java.io.ObjectInputStream;import java.io.ObjectOutputStream;import java.io.UnsupportedEncodingException;import java.net.HttpURLConnection;import java.net.InetAddress;import java.net.NetworkInterface;import java.net.SocketException;import java.net.URL;import java.net.URLConnection;import java.nio.ByteBuffer;import java.nio.ByteOrder;import java.nio.FloatBuffer;import java.text.DecimalFormat;import java.text.DecimalFormatSymbols;import java.text.SimpleDateFormat;import java.util.ArrayList;import java.util.Calendar;import java.util.Currency;import java.util.Date;import java.util.Enumeration;import java.util.Hashtable;import java.util.Locale;import java.util.Map;import java.util.Random;import java.util.StringTokenizer;import java.util.Timer;import java.util.TimerTask;import java.util.Vector;import javax.microedition.khronos.opengles.GL10;import Engine.TextFont;import Engine.facebook.android.C;import Engine.facebook.android.Facebook;import drfn.UserProtocol;import drfn.chart.MainFrame;import drfn.chart.NeoChart2;import drfn.chart.anal.AnalTool;import drfn.chart.base.Base11;import drfn.chart.base.Base15;import drfn.chart.base.BaseChart;import drfn.chart.base.ChartLastsaveDBHelper;import drfn.chart.base.ChartsaveDBHelper;import drfn.chart.base.CompareChartLastsaveDBHelper;import drfn.chart.base.CompareSettingController;import drfn.chart.base.ConveniencesSaveDBHelper;import drfn.chart.base.GijunSaveDBHelper;import drfn.chart.base.LoadChartController;import drfn.chart.base.MainBase;import drfn.chart.base.ModifySavedChartController;import drfn.chart.base.SaveChartController;import drfn.chart.comp.DataField;import drfn.chart.model.ChartViewModel;import drfn.chart.model.SaveData;import drfn.chart.net.NetClient;import drfn.chart.net.RTHandler;import drfn.chart_src.R;//import drfn.chart.find.OneclickFrameActivity;//import drfn.chart.find.SigFrameActivity;public class COMUtil{	//차트 API 사용 유무.	public static boolean apiMode = false;	public static int _TAG_TOOLTIPDATA_CONFIG = 100001; // 십자툴팁데이터뷰	public static int _TAG_INDICATOR_CONFIG = 100002; // 지표설정	public static int _TAG_SAVELOADMENU_CONFIG = 100003; // 저정/로드메뉴	public static int _TAG_SAVECONTROL_CONFIG = 100004; // 저장하기설정	public static int _TAG_LOADCONTROL_CONFIG = 100005; // 로드하기설정	public static int _TAG_PERIOD_CONFIG = 100006; // 기간설정	public static int _TAG_PERIODMIN_CONFIG = 100007; // 기간 분 설정	public static int _TAG_TOTALVIEW_CONFIG = 100008; //전체보기 기능. 	public static int _TAG_DATACNT_CONFIG = 100009; // 데이터 뷰 설정	public static int _TAG_BASELINE_CONFIG = 100010; // 기준선 설정	public static int _TAG_AUTOLINE_CONFIG = 100011; // 자동추세선 설정	public static int _TAG_DIVIDECHART_CONFIG = 100012; // 분할차트 설정	public static int _TAG_SYNC_CONFIG = 100013; // 동기화 설정	//	public static int _TAG_COMPARISON_CONFIG = 10014;	public static int _TAG_PERIOD_POPUP = 10014;	public static int _TAG_COMPARISON_EDIT_CONFIG = 10015;	public static int _TAG_TOOL_CONFIG = 10016;	public static int _TAG_FULL_CONFIG = 10017;	public static int _TAG_INDICATORMINI_CONFIG = 10018;	//미니지_graph.getGraphTitle().contains("Bollinger Band")표설정창    public static int _TAG_CHARTSET_CONFIG = 10019;	//차트설정    public static int _TAG_CHARTSET_NO_PERIOD = 10020;	//2017.10.24 by pjm 차트설정-주기설정제외 >>    public static int _TAG_INDICATOR_CONFIG_ONEQ = 100021; // 지표설정	 	public static int _TAG_STORAGE_TYPE = 200001; //저장된 차트 타입 	public static int _TAG_REQUESTADD_TYPE = 200002; //추가 데이터 요청 타입	public static int _TAG_VIEWCNT_CONFIG = 200003; //추가 데이터 요청 타입	public static int _TAG_REQUEST_MARKET_TYPE = 200004; //시장지표 요청	public static int _TAG_SELECTED_CHART =  200005; // 차트 선택	public static int _TAG_RESET_MULTICODES = 200006; // 멀티 리얼 변경	public static int _TAG_SAVE_CLOUD = 200007; // 클라우드 저장 	public static int _TAG_SET_PERIOD_UNITS = 200008; // 분틱 주기설정.	public static int _TAG_SELECT_VIEW = 200009; //2012.11.29 by LYH >> 개별 차트가 선택되었을때 자신의 부모 ChartEx로 바꿔줌.	public static int _TAG_SET_ADJUSTEDSTOCK = 200010; // 2013. 1. 22  수정주가		public static int _TAG_SET_COMPARE = 200011; // 지표설정 삭제시.2012-12-13 add by metalpooh.	public static int _TAG_SET_COMPARECHART = 200012;	public static int _TAG_COMPARISON_LIST = 200013;		public static int _TAG_SET_COMBOMIN = 200014; // 2013. 1. 25  분콤보 	public static int _TAG_SET_COMBOTIC = 200015; // 2013. 1. 25  틱콤보 		//2013. 1. 29  분틱주기 아이템 선택시 	public static int _TAG_SELECT_PERIOD = 200016;		public static int _TAG_SET_COMBODWM = 200017; // 2013. 1. 25  분콤보 	public static int _TAG_SET_COMBOALL = 200018; // 2013. 1. 25  틱콤보 		public static int _TAG_SET_SAVECHART = 200019; // 2013. 2. 26  차트저장 	public static int _TAG_SAVE_LOCAL_CLOUD = 200020; // 클라우드 LOCAL 저장 	public static int _TAG_LOAD_LOCAL_CLOUD = 200021; // 클라우드 LOCAL 저장 	public static int _TAG_MESSAGE = 200022; // 메인 토스트 메시지 사용 	public static int _TAG_SET_MARKET_ROTATE_END = 200023; // 마켓지표 처리 끝남을 알림.	public static int _TAG_DRAW_PATTERN = 200024; //2013.09.17 by LYH >> 패턴 그리기 추가. <<		public static int _TAG_SEND_YSCALEDRAGPRICE = 200025;	//2015. 1. 21 목표가 전달 requestinfo 이벤트 및 값넘기기	//2015. 2. 24 차트 상하한가 표시	public static int _TAG_REQUEST_UPPERLOWERLIMIT = 200026;	//상하한가 데이터 요청		//2015. 3. 18 보이는 개수 및 조회 갯수 설정	public static int _TAG_CHANGE_REQUESTDATALENGTH = 200027;	//조회 갯수 변경		//2015. 11. 2 미니 설정창 추가	public static int _TAG_OPEN_INDICATOR = 200028;	//지표설정창 열기		public static int _TAG_REQUESTADD_BYNUMBER = 200029;	//2014. 3. 24 Y축 봉갯수 누르면 봉입력창 뜨고 봉갯수변경	public static int _TAG_REQUEST_ASSET_PIE_INFO = 200030; // 자산분석 - 파이차트 선택된 INDEX 전달 	public static int _TAG_REQUEST_DISALLOWINTERCEPT_TOUCHEVENT = 200031;	public static int _TAG_SYNC_PERIODVALUE = 200032;	//2015. 12. 11 map-chart 간 분틱값 동기화	public static int _TAG_DRAW_SPIDER = 200033;    public static int _TAG_NEWS_DATE = 200034;      //2016. 1. 14 뉴스차트 핸들러    public static int _TAG_LOAD_HTS_CLOUD = 200035; // 클라우드 HTS 불러오기    public static int _TAG_SET_KOREANTIME = 200036; //2017.09.13 by pjm 한국시 추가 >>    public static int _TAG_SET_MOD_SKIP = 200037;       //만기보정, 제외기준    public static int _TAG_OPEN_ALL_SCREEN = 200038;    //차트 내부 전체보기버튼 클릭    public static int _TAG_SET_ONETOUCHMODE = 200039;   //원터치 모드    public static int _TAG_OPEN_ALARM_SCREEN = 200040;  //차트 내부 알림버튼 클릭    public static int _TAG_TOUCH_ALARM_CHART = 200041;  //터치 된 가격 외부로 출력    public static int _TAG_SET_COMPARECONFIG_CLOSE = 20042; //비교차트 설정창 닫을때    public static int _TAG_SET_REALBONG = 20043; //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw    public static int _TAG_SET_TOOLBAR_CLOSE = 20044;    public static int _TAG_OPEN_SCREEN = 20045;    public static Activity _chartMain; //Main Activity를 설정한다.//    public static RelativeLayout _layout;    public static RTHandler rt;    //public static BaseChart _baseChart;    //public static NeoChart2 _neoChart_bottom = null;    public static NeoChart2 _neoChart;    public static MainFrame _mainFrame;    public static Handler mHandler = new Handler();    public static Facebook mFacebook; //Facebook 생성자.    public static TextFont tf=null;    public static String SERVER_IP = "128.134.127.187"; //dongbu server ip    public static String SERVER_PORT = "8700";    public static String symbol="005930";    public static String preSymbol="";    public static String codeName="삼성전자";    public static String market = "0";    public static String count="200";    static int MAXCHAR = 32;    public static HistoryData _historyData;    public static Bitmap captureImg;    public static Hashtable<String, Object> loadItem = new Hashtable<String, Object>();    //public static Hashtable<String, Object> loadPeriodSaveItem = new Hashtable<String, Object>(); //2015.04.27 by lyl - 주기별 차트 설정 추가    public static String delay = "0";    public static String dataPath = "http://www.dooriworld.com/java_codedata/";    public static int mainLeftMargin=0;    public static int mainTopMargin=45;    public static int chartWidth;    public static int chartHeight;    public static int jipyoMax=150; //지표상세설정의 SeekBar의 Max값 설정.    public static int jipyoMaxForMoveAvgLine=300; // 2012. 8. 8 주가이평선에 한정된 seekbar 의  Max 값. : I88    public static String dataTypeName="2";    public static String unit="1";    public static String compareDataTypeName="2";    public static String compareUnit="1";    public static int selectedTag=-1;    public static int preSelectMainTag=-1;    public static int chartMode = 0;    public static int preChartMode = 0;//    public static int baseLineType=-1;//    public static ArrayList<Integer> baseLineType = new ArrayList<Integer>();   //2013. 3. 6  기준선 다중선택    private static SharedPreferences m_prefConfig = null; // 2016.05.31 기준선 대비, 색상 굵기    public static String[][] codeData = null;    //public static String sendTrType="";    public static String nflag="0";    public static String nkey="";    final public static String defaultApCode="03815";    public static String apCode="03815";    public static String lcode="S31";    public static boolean doubleTouchToggle = false;    public static boolean isContinueAnalDrawMode = false;    public static boolean isCrossBtnSelect = false;    public static boolean isLastDataChangeState=false;    public static boolean isRealTicState=false;    public static boolean isChangeDataState=false;    public static boolean isProcessData=false;//데이터가 처리중인지 체크.    public static boolean isSurfaceChanged=false;    public static boolean divideStorageType=false;    public static String selectedDataType="StockType";//FutureType,     public static String selectedJipyo=null;//현재 지표종류.    public static String[] analItemLocation;//차트 로드시 변환값이 저장되는 변수.    public static final String HONEYCOMB = "honeycomb";    public static String deviceMode="";//DEVICE 모드.(버전에 따라 정해짐)    public static String deviceID="";    private static StringBuffer buf= new StringBuffer();    public static int FACEBOOK_ISLOGIN = 100000;    public static int TWITTER_ISLOGIN = 100001;    //2012. 7. 2   라인두께에 관련된 변수 2개 추가     public static float graphLineWidth = 1.0f;//graph line width    public static float graphLineWidth2 = 0.5f;//graph line width2    	//Twitter 관련함수처리.    public static String consumer_key = "wgttkmchzM3mWAElOi8Sg";    public static String consumer_secret = "WmyDhifVS9jv53dHYkZSQVEqcIDl4T2wyH4Lwg";    public static String TWITPIC_API_KEY = "f0c90f9a4ebed3262890f376ebe81841";    public static String appPackageId = "com.drfn.mchart";    public static String appVersion = "1.0";        //트위터 링크 주소 길이 제한(30자) 때문에, bit.ly 에서 짧은주소값으로 얻어온다.    //http://218.38.18.171/smtartPhone/uploads/ => http://bit.ly/iQ8OT    public static String imgPath="http://218.38.18.171/smartPhone/uploads/";         //2012.07.17 by LYH>>분차트 시간 올림기능 추가. <<    public static String roundType="";    //2014.10.20 by lyk - 2일선 차트 (라인차트 라인 색상 설정)    public static String m_sLineColor=""; //r;g;b    //2014.10.20 by lyk - 2일선 차트 (라인차트 라인 색상 설정) end    //2014.10.20 by lyk - 2일선 차트 (라인차트 text 색상 설정)    public static String m_sTextColor=""; //r;g;b    //2014.10.20 by lyk - 2일선 차트 (라인차트 text 색상 설정) end    //2012. 11. 20  해외선물 5일 분차트 플래그     public static boolean bIsLineFill = false;        //2012. 11. 20  해외선물 5일 분차트 플래그     public static boolean bIsMiniBong = false;        public static boolean bRateCompare = false;    	//2013.07.31 >> 기준선 라인 차트 타입 추가     public static boolean bStandardLine = false;        //2013.09.13 >> 종합차트 등에 탭차트 로 들어가는 차트 타입 추가     public static boolean bSubChart = false;        //2015.01.08 by LYH >> 3일차트     public static boolean b3DayChart = false;        //2015.01.08 by LYH >> 3일차트     public static boolean bNetBuyChart = false;	// 순매수차트    //2013. 1. 15 지표설정창-분틱설정-분인지 틱인지 플래그    public static boolean isMinValueSet = true;    public static boolean isInsertJipyo = false;//2016.11.04 by LHY << 지표설정시 기본값으로 저장 처리    public static boolean bIsForeignFuture = false; //2017.04.05 by PJM << 해외선물옵션 여부 판단.    public static boolean bIsGlobalStock = false; //2017.09.13 by pjm 해외주식 추가 >>    public static boolean bIsTodayLineChart = false; //2020.04.14 당일 라인차트 추가 - hjw    //2013. 1. 16 분틱설정 값 저장 배열    public static ArrayList<Hashtable<String, String>> bunPeriodList = new ArrayList<Hashtable<String, String>>();    public static ArrayList<Hashtable<String, String>> ticPeriodList = new ArrayList<Hashtable<String, String>>();	//2013. 1. 25  분석툴바 버튼 눌렸을 시 토스트메시지 띄우기 //	public static String[] astrToolbarNames = {"추세선", "수평선", "수직선", "사각형", "십자선", "원형", "삼등분선", "사등분선", "스피드라인", "피보나치팬", "피보나치조정대", "피보나치시간대", "앤드류스피치포크",//												"삭제", "연필", "문자", "존추세선", "피보나치아크", "갠팬", "하향갠팬", "전체삭제", "갠선", "가속저항호", "가속저항팬", "사이클구간","엘리어트파동선","직선회귀선",//												"직선회귀채널", "일주월분", "삼각형",  "갠그리드", "기준선", "자동추세선", "초기화", "차트설정", "분할","지표설정","차트저장하기","차트불러오기","십자선 수치조회",""};    //2013. 1. 25  분석툴바 버튼 눌렸을 시 토스트메시지 띄우기    public static String[] astrToolbarNames = {"라인추세선", "수평선", "수직선", "사각형", "십자선", "원형", "삼등분선", "사등분선", "스피드라인", "피보나치팬", "피보나치조정대", "피보나치시간대", "앤드류스피치포크",            "지우기", "그리기", "문자", "존추세선", "피보나치호", "갠팬", "하향갠팬", "모두지우기", "갠라인", "가속저항호", "가속저항팬", "사이클구간","엘리어트파동선","직선회귀선",            "직선회귀채널", "일주월분", "삼각형",  "갠그리드", "기준선", "자동추세선", "초기화", "차트설정", "분할","지표설정","저장","불러오기","십자선 수치조회","좌측연장선","우측연장선","양측연장선","평행선","수직구간","각","목표치NT","피보나치목표치","대각선","가격변화선"};    //2013.09.17 by LYH >> 패턴 그리기 추가. <<    public static String base = "base11";    final public static int TOOLBAR_CONFIG_START		=50001;//toolbar Start.    final public static int TOOLBAR_CONFIG_LINE			=50001;//추세선.    final public static int TOOLBAR_CONFIG_HORZ			=50002;//수평선긋기.    final public static int TOOLBAR_CONFIG_VERT			=50003;//수직선긋기.    final public static int TOOLBAR_CONFIG_RECT			=50004;//사각형.    final public static int TOOLBAR_CONFIG_CROSS		=50005;//십자선.    final public static int TOOLBAR_CONFIG_ROUND		=50006;//원형.    final public static int TOOLBAR_CONFIG_LINE_TRISECT	=50007;//삼등분선.    final public static int TOOLBAR_CONFIG_LINE_QUARTER	=50008;//사등분선.    final public static int TOOLBAR_CONFIG_SPEEDLINE	=50009;//스피드라인.    final public static int TOOLBAR_CONFIG_FIBOFAN		=50010;//피보나치팬.    final public static int TOOLBAR_CONFIG_FIBORET		=50011;//피보나치조정대.    final public static int TOOLBAR_CONFIG_FIBOTIME		=50012;//피보나치시간대.    final public static int TOOLBAR_CONFIG_ANDREW		=50013;//앤드류스피치포크.    final public static int TOOLBAR_CONFIG_ERASE		=50014;//삭제.    final public static int TOOLBAR_CONFIG_PENCIL		=50015;//그리기.    final public static int TOOLBAR_CONFIG_TEXT			=50016;//문자.    //final public static int TOOLBAR_CONFIG_ZONE			=50017;//존추세선.    final public static int TOOLBAR_CONFIG_FIBOARC		=50018;//피보나치호.    final public static int TOOLBAR_CONFIG_GANNFAN		=50019;//갠팬.    final public static int TOOLBAR_CONFIG_DOWNGANNFAN	=50020;//하향갠팬    final public static int TOOLBAR_CONFIG_ALL_ERASE	=50021;//전체삭제.    final public static int TOOLBAR_CONFIG_GANNLINE		=50022;//갠라인    final public static int TOOLBAR_CONFIG_SPEEDARC		=50023;//가속저항호    final public static int TOOLBAR_CONFIG_SPEEDFAN		=50024;//가속저항팬    final public static int TOOLBAR_CONFIG_CYCLELINES	=50025;//사이클구간    final public static int TOOLBAR_CONFIG_ELLIOT		=50026;//앨리어트파동선    final public static int TOOLBAR_CONFIG_REGRESSIONLINE=50027;//직선회귀선    final public static int TOOLBAR_CONFIG_REGRESSIONLINES=50028;//직선회귀채널    final public static int TOOLBAR_CONFIG_DWMM 		=50029;//일주월분    final public static int TOOLBAR_CONFIG_TRIANGLE		=50030;//삼각형    final public static int TOOLBAR_CONFIG_GANNGRID		=50031;//갠그리드.    final public static int TOOLBAR_CONFIG_BASELINE 	=50032;//기준선    final public static int TOOLBAR_CONFIG_AUTOLINE 	=50033;//자동추세선    final public static int TOOLBAR_CONFIG_INIT 		=50034;//초기화    final public static int TOOLBAR_CONFIG_SETTING 		=50035;//차트설정    final public static int TOOLBAR_CONFIG_DIVIDE	 	=50036;//분할    final public static int TOOLBAR_CONFIG_INDICATOR	=50037;//지표설정    //2015. 1. 13 저장/불러오기 버튼 분석툴바에 추가>>    final public static int TOOLBAR_CONFIG_SAVE			=50038;//차트 저장하기    final public static int TOOLBAR_CONFIG_LOAD			=50039;//차트 불러오기    //2015. 1. 13 저장/불러오기 버튼 분석툴바에 추가<<    final public static int TOOLBAR_CONFIG_VIEWPANEL	=50040;//십자선 수치조회		//2014. 3. 18 분석툴바에 십자선 툴팁 추가    final public static int TOOLBAR_CONFIG_LEFTLINE 	=50041; // 좌측연장선    final public static int TOOLBAR_CONFIG_RIGHTLINE 	=50042; // 우측연장선    final public static int TOOLBAR_CONFIG_BSLINE 	=50043; //양측연장선    final public static int TOOLBAR_CONFIG_PARALLEL 	=50044; //평행선    final public static int TOOLBAR_CONFIG_PERPENDICULAR 	=50045; // 수직구간    final public static int TOOLBAR_CONFIG_DEGREE 	=50046; // 각    final public static int TOOLBAR_CONFIG_TARGETNT 	=50047; //목표치NT    final public static int TOOLBAR_CONFIG_FIBOTARGET 	=50048; //피보나치목표치    final public static int TOOLBAR_CONFIG_DIAGONAL		=50049;//대각선(45)    final public static int TOOLBAR_CONFIG_PERIOD   =50050;  //가격변화선    final public static int TOOLBAR_CONFIG_END			=50051;//toolbar End.        final public static int TOOLBAR_CONFIG_YSCALE_HORZ	=60001;//            //이벤트 메시지  	public static String _POPUP_EVENT_CLOSE = "close";  	public static String _POPUP_EVENT_MINI_OPENINDICATOR = "openindicator";    //	public static int[] arrDefaultToolbarIndex = {//		TOOLBAR_CONFIG_BASELINE,//기준선//	    TOOLBAR_CONFIG_AUTOLINE,//자동추세선	//	    TOOLBAR_CONFIG_LINE,//추세선.//	    TOOLBAR_CONFIG_HORZ,//수평선긋기.//	    TOOLBAR_CONFIG_VERT,//수직선긋기.	    //	    TOOLBAR_CONFIG_CROSS,//십자선.//	    TOOLBAR_CONFIG_ERASE,//삭제.//	    TOOLBAR_CONFIG_ALL_ERASE,//전체삭제.//	    TOOLBAR_CONFIG_RECT,//사각형.//	    TOOLBAR_CONFIG_ROUND,//원형.//	    TOOLBAR_CONFIG_TRIANGLE,//삼각형	    //	    TOOLBAR_CONFIG_LINE_TRISECT,//삼등분선.//	    TOOLBAR_CONFIG_LINE_QUARTER,//사등분선.//	    TOOLBAR_CONFIG_SPEEDLINE,//스피드라인.//	    TOOLBAR_CONFIG_DWMM,//일주월분	    //	    TOOLBAR_CONFIG_FIBORET,//피보나치조정대.	    //	    TOOLBAR_CONFIG_FIBOTIME,//피보나치시간대.//	    TOOLBAR_CONFIG_FIBOARC,//피보나치아크.//	    TOOLBAR_CONFIG_FIBOFAN,//피보나치팬.//	    TOOLBAR_CONFIG_GANNFAN,//갠팬.//	    TOOLBAR_CONFIG_DOWNGANNFAN,//하향갠팬	    //	    TOOLBAR_CONFIG_ANDREW,//앤드류스피치포크.//	    TOOLBAR_CONFIG_GANNLINE,//갠선	    //	    TOOLBAR_CONFIG_SPEEDARC,//가속저항호//	    TOOLBAR_CONFIG_SPEEDFAN,//가속저항팬//	    TOOLBAR_CONFIG_CYCLELINES,//사이클구간//	    TOOLBAR_CONFIG_ELLIOT,//직선회귀채널//	    TOOLBAR_CONFIG_REGRESSIONLINE,//앨리어트파동선//	    TOOLBAR_CONFIG_REGRESSIONLINES,//직선회귀선//	    TOOLBAR_CONFIG_GANNGRID,//갠그리드.////	    TOOLBAR_CONFIG_TEXT,//문자.	    //	};//	public static int[] arrToolbarIndex = {//		TOOLBAR_CONFIG_BASELINE,//기준선//	    TOOLBAR_CONFIG_AUTOLINE,//자동추세선	//	    TOOLBAR_CONFIG_LINE,//추세선.//	    TOOLBAR_CONFIG_HORZ,//수평선긋기.//	    TOOLBAR_CONFIG_VERT,//수직선긋기.	    //	    TOOLBAR_CONFIG_CROSS,//십자선.//	    TOOLBAR_CONFIG_ERASE,//삭제.//	    TOOLBAR_CONFIG_ALL_ERASE,//전체삭제.//	    TOOLBAR_CONFIG_RECT,//사각형.//	    TOOLBAR_CONFIG_ROUND,//원형.//	    TOOLBAR_CONFIG_TRIANGLE,//삼각형	    //	    TOOLBAR_CONFIG_LINE_TRISECT,//삼등분선.//	    TOOLBAR_CONFIG_LINE_QUARTER,//사등분선.//	    TOOLBAR_CONFIG_SPEEDLINE,//스피드라인.//	    TOOLBAR_CONFIG_DWMM,//일주월분	    //	    TOOLBAR_CONFIG_FIBORET,//피보나치조정대.	    //	    TOOLBAR_CONFIG_FIBOTIME,//피보나치시간대.//	    TOOLBAR_CONFIG_FIBOARC,//피보나치아크.//	    TOOLBAR_CONFIG_FIBOFAN,//피보나치팬.//	    TOOLBAR_CONFIG_GANNFAN,//갠팬.//	    TOOLBAR_CONFIG_DOWNGANNFAN,//하향갠팬	    //	    TOOLBAR_CONFIG_ANDREW,//앤드류스피치포크.//	    TOOLBAR_CONFIG_GANNLINE,//갠선	    //	    TOOLBAR_CONFIG_SPEEDARC,//가속저항호//	    TOOLBAR_CONFIG_SPEEDFAN,//가속저항팬//	    TOOLBAR_CONFIG_CYCLELINES,//사이클구간//	    TOOLBAR_CONFIG_ELLIOT,//직선회귀채널	    //	    TOOLBAR_CONFIG_REGRESSIONLINE,//앨리어트파동선    //	    TOOLBAR_CONFIG_REGRESSIONLINES,//직선회귀선//	    TOOLBAR_CONFIG_GANNGRID,//갠그리드.////	    TOOLBAR_CONFIG_TEXT,//문자.	    //	};      //2013. 10. 24 분석툴바에  폰버전에서 제외됬던 분석툴 다시 추가>>//	public static int[] arrDefaultToolbarIndex = {//	    TOOLBAR_CONFIG_INIT,//	    TOOLBAR_CONFIG_SETTING,//	    TOOLBAR_CONFIG_LINE,//추세선.//	    TOOLBAR_CONFIG_HORZ,//수평선긋기.//	    TOOLBAR_CONFIG_VERT,//수직선긋기.	    //	    TOOLBAR_CONFIG_ALL_ERASE,//전체삭제.//		TOOLBAR_CONFIG_BASELINE,//기준선	    //	    TOOLBAR_CONFIG_DIVIDE,//	    TOOLBAR_CONFIG_DWMM,//	};//	public static int[] arrToolbarIndex = {//	    TOOLBAR_CONFIG_INIT,//	    TOOLBAR_CONFIG_SETTING,		//	    TOOLBAR_CONFIG_LINE,//추세선.//	    TOOLBAR_CONFIG_HORZ,//수평선긋기.//	    TOOLBAR_CONFIG_VERT,//수직선긋기.	    //	    TOOLBAR_CONFIG_ALL_ERASE,//전체삭제.//		TOOLBAR_CONFIG_BASELINE,//기준선	    //	    TOOLBAR_CONFIG_DIVIDE,//	    TOOLBAR_CONFIG_DWMM,//	};    public static int[] arrDefaultToolbarIndex = {//            TOOLBAR_CONFIG_SETTING,            TOOLBAR_CONFIG_INIT,//            TOOLBAR_CONFIG_DIVIDE,            TOOLBAR_CONFIG_DWMM,            TOOLBAR_CONFIG_SAVE,            TOOLBAR_CONFIG_LOAD,            TOOLBAR_CONFIG_BASELINE,            TOOLBAR_CONFIG_AUTOLINE,            TOOLBAR_CONFIG_ERASE,            TOOLBAR_CONFIG_ALL_ERASE,            TOOLBAR_CONFIG_LINE,            TOOLBAR_CONFIG_CROSS,            TOOLBAR_CONFIG_HORZ,            TOOLBAR_CONFIG_VERT,            TOOLBAR_CONFIG_VIEWPANEL,   //2020.09.11 by LYH >> 툴바에 수치조회 추가            TOOLBAR_CONFIG_ROUND,            TOOLBAR_CONFIG_RECT,            TOOLBAR_CONFIG_TRIANGLE,            TOOLBAR_CONFIG_LINE_TRISECT,            TOOLBAR_CONFIG_LINE_QUARTER,            TOOLBAR_CONFIG_SPEEDLINE,            TOOLBAR_CONFIG_REGRESSIONLINES,            TOOLBAR_CONFIG_ELLIOT,            TOOLBAR_CONFIG_FIBOARC,            TOOLBAR_CONFIG_FIBOFAN,            TOOLBAR_CONFIG_FIBORET,            TOOLBAR_CONFIG_FIBOTIME,            TOOLBAR_CONFIG_CYCLELINES,            TOOLBAR_CONFIG_GANNFAN,            TOOLBAR_CONFIG_DOWNGANNFAN,            TOOLBAR_CONFIG_GANNLINE,            TOOLBAR_CONFIG_GANNGRID,            TOOLBAR_CONFIG_ANDREW,            TOOLBAR_CONFIG_REGRESSIONLINE,            TOOLBAR_CONFIG_SPEEDFAN,            TOOLBAR_CONFIG_SPEEDARC,            TOOLBAR_CONFIG_LEFTLINE,            TOOLBAR_CONFIG_RIGHTLINE ,            TOOLBAR_CONFIG_BSLINE,            TOOLBAR_CONFIG_DEGREE ,            TOOLBAR_CONFIG_PERIOD,            TOOLBAR_CONFIG_PENCIL,            TOOLBAR_CONFIG_PARALLEL ,            TOOLBAR_CONFIG_DIAGONAL,            TOOLBAR_CONFIG_PERPENDICULAR ,            TOOLBAR_CONFIG_TARGETNT ,            TOOLBAR_CONFIG_FIBOTARGET//        TOOLBAR_CONFIG_TEXT,//        TOOLBAR_CONFIG_ZONE//        TOOLBAR_CONFIG_DWMM,//        TOOLBAR_CONFIG_INDICATOR,//        TOOLBAR_CONFIG_SAVE,//        TOOLBAR_CONFIG_LOAD,    };    public static int[] arrToolbarIndex = {//            TOOLBAR_CONFIG_SETTING,            TOOLBAR_CONFIG_INIT,//            TOOLBAR_CONFIG_DIVIDE,            TOOLBAR_CONFIG_DWMM,            TOOLBAR_CONFIG_SAVE,            TOOLBAR_CONFIG_LOAD,            TOOLBAR_CONFIG_BASELINE,            TOOLBAR_CONFIG_AUTOLINE,            TOOLBAR_CONFIG_ERASE,            TOOLBAR_CONFIG_ALL_ERASE,            TOOLBAR_CONFIG_LINE,            TOOLBAR_CONFIG_CROSS,            TOOLBAR_CONFIG_HORZ,            TOOLBAR_CONFIG_VERT,            TOOLBAR_CONFIG_VIEWPANEL,   //2020.09.11 by LYH >> 툴바에 수치조회 추가            TOOLBAR_CONFIG_ROUND,            TOOLBAR_CONFIG_RECT,            TOOLBAR_CONFIG_TRIANGLE,            TOOLBAR_CONFIG_LINE_TRISECT,            TOOLBAR_CONFIG_LINE_QUARTER,            TOOLBAR_CONFIG_SPEEDLINE,            TOOLBAR_CONFIG_REGRESSIONLINES,            TOOLBAR_CONFIG_ELLIOT,            TOOLBAR_CONFIG_FIBOARC,            TOOLBAR_CONFIG_FIBOFAN,            TOOLBAR_CONFIG_FIBORET,            TOOLBAR_CONFIG_FIBOTIME,            TOOLBAR_CONFIG_CYCLELINES,            TOOLBAR_CONFIG_GANNFAN,            TOOLBAR_CONFIG_DOWNGANNFAN,            TOOLBAR_CONFIG_GANNLINE,            TOOLBAR_CONFIG_GANNGRID,            TOOLBAR_CONFIG_ANDREW,            TOOLBAR_CONFIG_REGRESSIONLINE,            TOOLBAR_CONFIG_SPEEDFAN,            TOOLBAR_CONFIG_SPEEDARC,            TOOLBAR_CONFIG_LEFTLINE,            TOOLBAR_CONFIG_RIGHTLINE ,            TOOLBAR_CONFIG_BSLINE,            TOOLBAR_CONFIG_DEGREE ,            TOOLBAR_CONFIG_PERIOD,            TOOLBAR_CONFIG_PENCIL,            TOOLBAR_CONFIG_PARALLEL ,            TOOLBAR_CONFIG_DIAGONAL,            TOOLBAR_CONFIG_PERPENDICULAR ,            TOOLBAR_CONFIG_TARGETNT ,            TOOLBAR_CONFIG_FIBOTARGET//        TOOLBAR_CONFIG_TEXT,//        TOOLBAR_CONFIG_ZONE//        TOOLBAR_CONFIG_DWMM,//        TOOLBAR_CONFIG_INDICATOR,//        TOOLBAR_CONFIG_SAVE,//        TOOLBAR_CONFIG_LOAD,    };    //2013. 10. 24 분석툴바에  폰버전에서 제외됬던 분석툴 다시 추가>>    //2014.05.16 by LYH >> 선택한 툴 버튼만 추가.    public static String[] arrToolbarSelected = {"1","1","1","1","1","1","1","1","1","1","1","1","1",            "1","1","1","1","1","1","1","1","1","1",            "1","1","1","1","1","1", "1","1","1","1","1"            ,"1","1","1","1","1","1","1","1","1","1","1","1","1"};    public static String[] arrToolbarDefaultSelected = {"1","1","1","1","1","1","1","1","1","1","1","1","1",            "1","1","1","1","1","1","1","1","1","1",            "1","1","1","1","1","1", "1","1","1","1","1"            ,"1","1","1","1","1","1","1","1","1","1","1","1","1"};    //2014.05.16 by LYH <<	    //2012. 7. 17 차트유형 문자열상수 선언  - drfnkimsh    final public static String CANDLE_TYPE_CANDLE = "캔들"; //캔들형    final public static String CANDLE_TYPE_CANDLE_TRANSPARENCY = "투명캔들"; //투명캔들형    final public static String CANDLE_TYPE_BAR = 	"바";//바형    final public static String CANDLE_TYPE_BAR_OHLC = 	"바(시고저종)";//2015.04.30 by lyk - 바(시고저종) 유형 추가    final public static String CANDLE_TYPE_LINE = 	"라인";//라인형    final public static String CANDLE_TYPE_LINEAR = "Linear";//선형차트     final public static String CANDLE_TYPE_LOG = "Log";//로그차트     final public static String CANDLE_TYPE_PF = "PnF";//P$F형    final public static String CANDLE_TYPE_THIRD = "삼선전환도";//삼선전환도형    final public static String CANDLE_TYPE_SWING = "스윙";//스윙    final public static String CANDLE_TYPE_RENKO = "렌코";//렌코    final public static String CANDLE_TYPE_REVERSECLOCK = "역시계곡선";//역시계곡선    final public static String CANDLE_TYPE_KAGI = "Kagi";//Kagi //2015.06.23 by lyk - 차트 유형 추가    final public static String CANDLE_TYPE_RANGE_LINE = "종가영역";    final public static String CANDLE_TYPE_VARAINCE = "분산형";    final public static String CANDLE_TYPE_FLOW = "FLOW";    final public static String CANDLE_TYPE_HEIKIN_ASHI = "Heikin-Ashi";    //2020.07.06 by LYH >> 캔들볼륨 >>    final public static String CANDLE_TYPE_CANDLE_VOLUME = "캔들볼륨";    final public static String CANDLE_TYPE_EQUI_VOLUME = "이큐볼륨";    //2020.07.06 by LYH >> 캔들볼륨 <<    final public static String CANDLE_TYPE_STAIR = "계단";        final public static int MENU_STYLE_BLACK =     500001;    //블랙스킨    final public static int MENU_STYLE_WHITE =     500002;    //화이트스킨    final public static int MENU_STYLE_AUTO =      500003;    //메인테마스킨	 //2015. 3. 4 차트 테마 메인따라가기 추가    final public static int MENU_STYLE_SKIN_END =  500004;    //End    final public static int JongGa_LastDay =     510001;    //전일(현재가) 기준    final public static int JongGa_LastBong =     510002;    //전봉기준	    public static int REMOVE_CONFIG_ID=30000;//취소.    public static int PERIOD_CONFIG_DAY=30001;//일간.    public static int PERIOD_CONFIG_WEEK=30002;//주간.    public static int PERIOD_CONFIG_MONTH=30003;//월간.    public static int PERIOD_CONFIG_YEAR=30006;//연간.    public static int PERIOD_CONFIG_MIN=30004;//일간.    public static int PERIOD_CONFIG_MIN1=30010;//일간.    public static int PERIOD_CONFIG_MIN2=30011;//일간.    public static int PERIOD_CONFIG_MIN3=30012;//일간.    public static int PERIOD_CONFIG_MIN4=30013;//일간.    public static int PERIOD_CONFIG_MIN5=30014;//일간.    public static int PERIOD_CONFIG_MIN6=30015;//일간.    public static int PERIOD_CONFIG_TIC=30005;//틱.    //    public static String TOOLBAR_TITLE_ERASE="순차적삭제";//순차적삭제.//    public static String TOOLBAR_TITLE_01="추세선";//.//    public static String TOOLBAR_TITLE_02="십자선";//.//    public static String TOOLBAR_TITLE_03="수직선긋기";//.//    public static String TOOLBAR_TITLE_04="수평선긋기";//.//    public static String TOOLBAR_TITLE_05="피보나치아크";//.//    public static String TOOLBAR_TITLE_06="피보나치팬";//.//    public static String TOOLBAR_TITLE_07="피보나치시간대";//.//    public static String TOOLBAR_TITLE_08="피보나치조정대";//.//    public static String TOOLBAR_TITLE_09="갠팬";//.//    public static String TOOLBAR_TITLE_10="갠그리드";//.//    public static String TOOLBAR_TITLE_11="삼등분선";//.//    public static String TOOLBAR_TITLE_12="사등분선";//.//    public static String TOOLBAR_TITLE_13="스피드라인";//.//    public static String TOOLBAR_TITLE_14="앤드류스피치포크";//.//    public static String TOOLBAR_TITLE_15="사각영역";//.//    public static String TOOLBAR_TITLE_16="원형영역";//.//    public static String TOOLBAR_TITLE_17="문자";//.        //2015. 1. 13 by lyk - 동일지표 이름 구분자     final public static String JIPYO_ADD_REMARK = "*"; //한자리만 사용가능     //2015. 1. 13 by lyk - 동일지표 이름 구분자 end        public static int BASIC_CHART=0;    public static int COMPARE_CHART=1;    public static int DIVIDE_CHART=2;    public static String TR_CHART_STOCK="03815";    public static String TR_CHART_FUTURE="03816";    public static String TR_CHART_UPJONG="03020";    public static String TR_CHART_INVESTOR="03030";    public static String TR_COMPARE_STOCK="03090";    public static String TR_COMPARE_UPJONG="03092";    public static String TR_COMPARE_FUTURE="03091";    public static String TR_CHART_STOCK_REAL="TR_CHART_STOCK_REAL";    public static String TR_CHART_FUTURE_REAL="TR_CHART_FUTURE_REAL";    public static String TR_CHART_UPJONG_REAL="TR_CHART_UPJONG_REAL";    public static String TR_TICKER="88802";    public static String TICKER_TYPE_O="TICKER_TYPE_O";    public static String TICKER_O="TICKER_O";    public static String TICKER_ITEM_O="TICKER_ITEM_O";    public static String TICKER_ITEM_FUT_O="TICKER_ITEM_FUT_O";    public static String TICKER_ITEM_FOR_O="TICKER_ITEM_FOR_O";    public static String GWANSIM_O="GWANSIM_O";    public static String GWANSIM_ITEM_O="GWANSIM_ITEM_O";    public static Bitmap bitmap = null;        public static String SIGNAL_LAYOUT = "signalLayout";    public static String HISTORY_LAYOUT = "historyLayout";    public static String INDICATOR_LAYOUT = "indicatorview";    public static String INDICATORVIEWDEFAULT_LAYOUT = "indicatorviewfordefaultLayout";    public static String SAVELOAD_LAYOUT = "saveloadLayout";    public static String PERIOD_LAYOUT = "periodLayout";    public static String ANALTOOL_LAYOUT = "analtoolLayout";    public static String CONFIG_LAYOUT = "configLayout";    public static String DIVIDE_LAYOUT = "divideLayout";    public static String DIVIDESYNC_LAYOUT = "divideSyncLayout";  //2013. 7. 25 분할및동기화메뉴 추가     public static String PERIODSETTING_LAYOUT = "periodsettingLayout";    public static String SYNC_LAYOUT = "syncLayout";    //2011.09.27 by metalpooh  >> 자동추세선 /  기준선 관련된  추가사항들.    public static String CHART_AUTOTREND_LAYOUT = "autotrendView";    public static String CHART_BASELINE_LAYOUT = "baselineView";    //2011.09.27 by metalpooh  <<    // 6.26 상세지표창 이외 영역 터치하면 상세지표창도 사라지도록 변수 선언    public static String DETAIL_LAYOUT = "detailLayout";        public static String SETDATAVIEW_LAYOUT = "setdataviewlayout";    public static String SETINQUIRYVIEW_LAYOUT = "setinquiryviewlayout";    public static boolean isSignalBtnState=false;    public static boolean isHistoryBtnState=false;    public static boolean isPeriodBtnState=false;    public static boolean isDivideBtnState=false;    public static boolean isCompareBtnState=false;    public static boolean isJipyoBtnState=false;    public static boolean isSaveloadBtnState=false;    public static boolean isAnaltoolbarBtnState=false;    public static boolean isSetdataBtnState = false;    public static boolean isSetinquiryBtnState = false;    public static boolean isBaseLineBtnState = false;    public static boolean isAutoTrendBtnState = false;        public static int divideType=0;    public static boolean isSyncJongmok=false;    public static boolean isSyncJugi=false;    public static int storageDivideIndex=-1;    //2019. 08. 21 by hyh - 자동추세선 복원 >>//    public static int autoTrendLowType = 0;//    public static int autoTrendWaveType = 0;//    public static int autoTrendHighType = 0;//    public static int autoTrendWType = 0;////    public static int endName = 3;//    public static int preName = 3;    //2019. 08. 21 by hyh - 자동추세선 복원 <<        public static final int  SKIN_BLACK = 0;    public static final int  SKIN_WHITE = 1;    public static final int  SKIN_AUTO_THEME = 2;	//2015. 3. 4 차트 테마 메인따라가기 추가    public static int skinType_Main = 1;    public static RelativeLayout chartLayout;    public static boolean isAnalToolbar = true;    public static boolean showAnalToolbar = true;    public static ViewGroup apiView;        //2012. 7. 26  api 레이아웃 선언     public static RelativeLayout apiLayout;    public static Context apiContext;    public static int nAPIWidth;    public static int nAPIHeight;        public static boolean bIsMigyul = false;        public static boolean bIsMulti = false;    public static Typeface typeface;    public static Typeface typefaceMid;    public static Typeface typefaceBold;    public static Typeface numericTypeface;    public static Typeface numericTypefaceMid;    public static Typeface numericTypefaceBold;    public static float nFontSize = 14;    public static float nFontSize_paint = 14;        public static int requestedOrientation;    public static boolean bIsCompare = false;        public static boolean bIsOneBlock = false;        public static boolean bHaveMA = true;    public static boolean linkedChart = false;        public static String cloudData = "";    public static int m_nRotateIndex = -1;    public static boolean isTrendType = false; //매매동향 차트 타입     public static boolean isAfterType = false; //시간외 차트 타입     public static boolean isJisuType = false; //주요지수 차트 타입     public static int isUpAfter = 1; //시간외 상승 상태 (1:상승, 0:하락, -1:보합)    public static int dbVersion = 22;	//2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정. 저장 버전업 (21->22)    public static int lastSaveDbVersion = 22;//2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정. 저장 버전업 (21->22)        public static boolean isModifyDetail = false;    public static boolean isSaveLocalMode = false;     	public static boolean isInitChart = false;        //2013. 11. 21 추세선 종목별 저장>>    public static SharedPreferences analPref = null;	    public static SharedPreferences.Editor analPrefEditor = null;    //2013. 11. 21 추세선 종목별 저장<<    //2016.11.04 by LHY << 지표설정시 기본값으로 저장 처리    public static SharedPreferences indicatorPref = null;    public static SharedPreferences.Editor indicatorPrefEditor = null;    //2016.11.04 by LHY << 지표설정시 기본값으로 저장 처리    //2015. 3. 4 차트 테마 메인따라가기 추가>>    public static boolean bIsAutoTheme = false; //메인테마를 따라갈지 여부    public static int currentTheme = 1;    //2015. 3. 4 차트 테마 메인따라가기 추가<<  //2015.04.07 by lyk - 주기별 차트 설정    public final static String strPeriodConfigSaveGubun = "@@@";    public final static String strPeriodConfigSaveGubun1 = ":::";    public final static String strPeriodConfigSaveGubun2 = "###";    public final static String strPeriodConfigSave_strKey = "periodstr_";    public final static String strPeriodConfigTableGubun = "===";	//2015.04.07 by lyk - 주기별 차트 설정 end        //비교차트    public static boolean[] compareChecks = new boolean[5];//비교차트 편집창에서 사용     public static boolean bSendCompareData = false;    public static Vector<String> compareArr = null;    public static String strCompData = null;    public static String strAppPath = "";    //2011.09.27 by metalpooh  <<    public static String[][] data_info_stock = {            {"자료일자", "8", "YYYYMMDD", "유"},            {"시가", "10", "× 1", "무"},            {"고가", "10", "× 1", "무"},            {"저가", "10", "× 1", "무"},            {"종가", "10", "× 1", "무"},            {"기본거래량", "10", "× 1", "무"},            {"거래대금", "12", "× 1", "무"},            {"매도거래량", "12", "× 1", "무"},            {"매수거래량", "12", "× 1", "무"},            {"락구분", "3", "× 1", "무"},            {"락비율", "10", "× 0.01", "무"},            {"상하한", "1", "× 1", "무"}    };    //2011.09.27 by metalpooh  <<    public static String[][] data_info_investor = {            {"자료일자", "8", "YYYYMMDD", "유"},            {"data1", "10", "× 1", "무"},            {"data2", "10", "× 1", "무"},            {"data3", "10", "× 1", "무"},            {"data4", "10", "× 1", "무"},            {"data5", "10", "× 1", "무"},            {"data6", "10", "× 1", "무"},            {"data7", "10", "× 1", "무"},            {"data8", "10", "× 1", "무"},    };////    public static String[][] data_info_rateperiod = {//            {"자료일자", "8", "YYYYMMDD", "유"},//            {"data1", "10", "× 0.01", "무"},//            {"data2", "10", "× 0.01", "무"},//            {"data3", "10", "× 1", "무"},//            {"data4", "10", "× 1", "무"},//            {"data5", "10", "× 1", "무"},//            {"data6", "10", "× 1", "무"},//            {"data7", "10", "× 1", "무"},//            {"data8", "10", "× 1", "무"},//    };//    public static String[][] data_info_future = {            {"자료일자", "8", "YYYYMMDD", "유"},            {"시가", "10", "× 0.01", "무"},            {"고가", "10", "× 0.01", "무"},            {"저가", "10", "× 0.01", "무"},            {"종가", "10", "× 0.01", "무"},            {"기본거래량", "10", "× 1", "무"},            {"거래대금", "12", "× 1", "무"},            {"매도거래량", "12", "× 1", "무"},            {"매수거래량", "12", "× 1", "무"},            {"락구분", "3", "× 1", "무"},            {"락비율", "10", "× 0.01", "무"},            {"상하한", "1", "× 1", "무"}    };//    public static String[][] data_info_ratecompare = {//            {"자료일자", "8", "YYYYMMDD", "유"},//            {"시가", "10", "× 0.01", "무"},//            {"고가", "10", "× 0.01", "무"},//            {"data1", "10", "× 0.01", "무"},//            {"data2", "10", "× 0.01", "무"},//            {"기본거래량", "10", "× 1", "무"},//            {"거래대금", "12", "× 1", "무"},//            {"상하한", "1", "× 1", "무"}//    };//    public static String[][] data_info_upjong = {//            {"자료일자", "8", "YYYYMMDD", "유"},//            {"시가", "10", "× 0.01", "무"},//            {"고가", "10", "× 0.01", "무"},//            {"저가", "10", "× 0.01", "무"},//            {"종가", "10", "× 0.01", "무"},//            {"기본거래량", "10", "× 1", "무"},//            {"거래대금", "12", "× 1", "무"}//    };    public static String userId="";    public static String title="";    public static String detail="";    public static String saveDate="";    public static String userIp="";    public static String verInfo="";    //2013. 1. 28 저장하기 사용자 입력 제목 저장 추가     public static String saveTitle="";    //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정    public static boolean isSaved= true;    public static boolean isSaveJongmok= true; //2021.02.03 by HJW - 차트저장 종목저장 여부 추가        public final static int BTN_CONFIG=7000;    public final static int BTN_CHUSE=7001;    public final static int BTN_ANAL=7002;    public final static int BTN_CLOSE=3;//Close Button        public static RectF currentFrame=null;    public static int[] currentTextures=null;    //    public static Vector analItem=null;//로드한 분석툴 정보.    public static String[] periodMinConfigInitList = {"1","3","5","10","30","60"}; //분 설정 초기값.    public static String[] periodMinConfigList = {"1","3","5","10","30","60"}; //분 설정 값.    public static String[] periodSelectList = {"1", "2","3","4","5","6","7","8","9","10",        "13","15","20","30","40","45","55","60","120","240"}; //분 설정 값.        public static Vector<BaseChart> divideChartList;//    public static PopupWindow baselinePopup = null;//    public static PopupWindow autotrendPopup = null;    public static PopupWindow savechartPopup = null;    public static PopupWindow loadchartPopup = null;    public static PopupWindow modifySavedPopup = null;        /** Dialog 닫기 처리를 위해 주소 저장 장소 (Reference) */    public static Dialog g_chartDialog = null;    public static int g_nDisWidth;            // 가로 사이즈    public static int g_nDisHeight;          // 세로 사이즈        //2013.03.25 by LYH >> 증권정보 팝 분차트 실시간 처리. <<    public static String[] strPreBongData = {"", "","","","","",""}; //일자, 시가, 고가 , 저가, 종가, 거래량.    public static void setMainFrame(MainFrame mainFrame) {        _mainFrame = mainFrame;            }        public static MainFrame getMainFrame() {        return _mainFrame;    }        public static void setChartMain(Activity chartMain) {        _chartMain = chartMain;         }       //    public static void initHistoryCode(String sCode, String fCode, String oCode, String uCode, String soCode) {//        if (_historyData == null) _historyData = new HistoryData();//        _historyData.initCode(sCode, fCode, oCode, uCode, soCode);//    }        public static void setDelay(String _delay) {        delay = _delay;          }    //    public static void setHistoryData(String code, String name, int type) {        //        _historyData.setHistoryData(code, name, type);//    }//    //    public static Vector getHistoryData(int type) {//        if (_historyData == null) _historyData = new HistoryData();//        return _historyData.getHistoryData(type);//    }//    //    public static int getHistorySelectIndex(int type) {//        return _historyData.getSelectIndex(type);//    }//    //    public static void setHistorySelectIndex(int index, int type) {//        _historyData.setSelectIndex(index, type);//    }//    //    public static String[] getHistoryCodeByIndex(int index, int type) {//        return _historyData.getHistoryCodeByIndex(index, type);//    }//    //    public static void moveHistoryCodeLast(int type) {//        _historyData.moveHistoryCodeLast(type);//    }//    //    public static String[] getLastHistoryCode(int type) {//        if(_historyData == null) return null;//        return _historyData.getLastHistoryCode(type);//    }//        public static String FrontZeroToSpace(String data) {	    int len = data.length();	    String str = removeFrontZero(data);        return new String(fillSpace(str, len, 1));	}	public static String removeFrontZero(String data) {	    if(data.length() <= 1) return data;	    String str = data;	    String sign="";	    if(data.startsWith("-")){	        sign = "-";	        str = new String(str.substring(1));	    }        while(str.charAt(0) == '0') {            if(str.length() >= 2 )            {            	if(str.charAt(1) == '.')            		break;            	else            		str = new String(str.substring(1));            }            else {                return "0";            }        }        return sign+str;	}		//소숫점으로 오는 데이터를 fl만큼 잘라서, 소숫점을 표시하여 리턴한다.	public static String formatFl2(String str, int fl, int comma) {	    return format(formatFl(str, fl, comma), fl, comma);	}		// 소숫점으로 오는 데이터 처리. 소숫점 뒷자리가 변환하고자 하는 크기보다 작으면	// 변환하고자 하는 크기만큼 0으로 처리한 후 처리한다.	public static String formatFl(String str, int fl, int comma) {	    if(str==null ||str.length()<=0) return "";	    int index = str.indexOf(".");	    String temp = "";        if(index > -1) {            temp = new String(str.substring(index+1));            if(temp.length() < fl)                 temp = makeZeroBack(temp, fl);            else                 temp = new String(temp.substring(0, fl));                    } else {            str += makeZeroBack("", fl);            return str;        }        if(buf.length()>0) buf.delete(0, buf.length());        buf.append(new String(str.substring(0,index)));        buf.append(temp);        str = buf.toString();        return str;	}	//소수점까지만 분리해서 리턴	public static String removeToDot(String str) {	    if(str==null ||str.length()<=0) return "";	    int index = str.indexOf(".");	    String rtnStr = "";	    if(index != -1) {	        rtnStr = new String(str.substring(0, index));	    } else {	        return str;	    }	    return rtnStr;	}	//세자리마다 콤마를 찍어주고 fl길이만큼 소수 표시	static DecimalFormat df = null;       // 세자리 마다 ','를 추가	public static String format(double value, int fl, int comma) {		value += 0.000000001;		if(df == null)		{			df = new DecimalFormat();       // 세자리 마다 ','를 추가			df.setGroupingSize(3);			df.setGroupingUsed(true);			DecimalFormatSymbols symbol = new DecimalFormatSymbols();			symbol.setGroupingSeparator(',');			df.setDecimalFormatSymbols(symbol);	    }  	    df.setMinimumFractionDigits(fl);	    df.setMaximumFractionDigits(fl);	  	    return df.format(value);	}    public static String format(String str, int fl, int comma) {        if(str==null ||str.length()<=0) return "";        double dData = 0;        try {        	dData = Double.parseDouble(str);        } catch(Exception e) {        	dData = 0;        }        return format(dData, fl, comma);        //        System.out.println(df.format(l)); //        //        char[] buffer = new char[MAXCHAR];//        if ((str.charAt(0)=='+')||(str.charAt(0)=='-')) {//            buffer[0]=str.charAt(0);//            str=str.substring(1);//        } else {//            buffer[0]=' ';//        }////        int index = MAXCHAR - 1;//        int i = str.length() - 1;////        if (fl!=0) {//            for(int j = 0;j < fl;j++) {//                if (i >= 0) {//                    if (Character.isDigit(str.charAt(i))) {//                        buffer[index] = str.charAt(i);//                    }//                } else {//                    buffer[index] = '0';//                }//                index--; i--;//            }//            buffer[index] = '.';//            index--;//            if (i < 0) {//                buffer[index] = '0';//                if(buffer[0]=='+'||buffer[0]=='-') {//                    index--;//                    buffer[index]=buffer[0];//                }//                return new String(buffer, index, MAXCHAR - index);//            }//        }//        int intIndex = index - comma;//        for(; i >= 0;i--) {//            if(str.charAt(i)=='.'||str.charAt(i)==',')//                continue;//            if(comma>0){//                if ((((index - intIndex) % (comma+1)) == 0) && Character.isDigit(str.charAt(i))) {//                    buffer[index] = ',';//                    index--;//                }//            }//            buffer[index] = str.charAt(i);//            index--;//        }//        if(buffer[0]=='+'||buffer[0]=='-') {//            buffer[index]=buffer[0];//            index--;//        }//        return new String(buffer, index + 1, MAXCHAR - index - 1);    }        public static int ATOI(String sTmp)    {      String tTmp = "0", cTmp = "";      sTmp = sTmp.trim();      for(int i=0;i<sTmp.length();i++)      {        cTmp = new String(sTmp.substring(i,i+1));        if(cTmp.equals("0") ||            cTmp.equals("1") ||            cTmp.equals("2") ||            cTmp.equals("3") ||            cTmp.equals("4") ||            cTmp.equals("5") ||            cTmp.equals("6") ||            cTmp.equals("7") ||            cTmp.equals("8") ||            cTmp.equals("9")) tTmp += cTmp;        else if(cTmp.equals("-") && i==0)          tTmp = "-";        else          break;      }      return(Integer.parseInt(tTmp));    }         public static final int FILLZERO=0;    public static final int FILLSPACE=1;    private static byte[] FILLER={ (byte)'0', (byte)' ' };    public static byte[] fillSpace(String str, int len, int filler){        byte[] result = new byte[len];                byte[] param=str.getBytes();        int strLen = param.length;        int index = 0;                if(filler==FILLZERO){//0을 앞에 채움             if(strLen<len) {                int cnt=len-strLen;//FILLER채우기                for( ;index<cnt; index++) result[index]=FILLER[filler];            }            for(int j=0,i=index;i<len;i++,j++) {                result[i]=param[j];            }        }else{//스페이스를 뒤에 채움            int cnt=strLen<len?strLen:len;            for(int i=0;i<cnt;i++, index++)                result[index]=param[i];            if(strLen<len)                for(;index<len;index++)                    result[index]=FILLER[filler];        }        return result;    }    public static String[] jisu_title={        "다우존스 산업지수","나스닥 종합","S&P 500지수","필라델피아 반도체지수","나스닥100 선물",        "S&P500 선물","일본 니케이 255지수","홍콩항셍지수","싱가폴 Straits Times","호주 All Odinaries",        "인도네시아 자카르타지수","태국 SET","대만 Weighted Average","영국 FTSE100","파리 CAC40","독일 닥스30"    };    /**** 차트 및 지표 List****/    public static String[][] chartList = {{"일본식봉차트", "Basic"} , {"로그차트", "Basic"}                                 , {"종가선차트", "Basic"} , {"미국식봉차트","Basic"}                                , {"매물분석도","Independence"} , {"역시계곡선","Independence"}                                , {"PnF","Independence"}, {"삼선전환도","Independence"}           //독립 차트,기본 차트 설정                                , {"스윙","Independence"}, {"Kagi","Independence"}, {"렌코","Independence"}, {"역시계곡선","Independence"}                                , {"분산형","Independence"}, {"FLOW","Basic"}                                , {"거래량" , "Indicator"}, {"MACD OSC", "Indicator"}, {"Stochastic Slow", "Indicator"}                                , {"Parabolic SAR", "Trend"}, {"Bollinger Band", "Trend"}, {"DMI", "Indicator"}                                 , {"RSI", "Indicator"}, {"A/B Ratio", "Indicator"}, {"ADX", "Indicator"}, {"RCI", "Indicator"}, {"ROC", "Indicator"}, {"SROC", "Indicator"}, {"Chaikins Volatility", "Indicator"}, {"RMI", "Indicator"}, {"VHF", "Indicator"}, {"Sigma", "Indicator"}, {"ATR", "Indicator"}, {"Price Oscillator", "Indicator"}, {"Volume Oscillator", "Indicator"}, {"VROC", "Indicator"}, {"NCO", "Indicator"}, {"PVT", "Indicator"}, {"Envelope", "Trend"}                                 , {"MACD", "Indicator"}, {"OBV", "Indicator"}, {"REVERSE", "Indicator"}, {"Sonar", "Indicator"}, {"Standard Deviation", "Indicator"}                                , {"Stochastic Fast", "Indicator"}, {"VMAO", "Indicator"}, {"VR", "Indicator"}, {"이격도", "Indicator"}                                , {"일목균형표", "Trend"}, {"투자심리선", "Indicator"}, {"William's R", "Indicator"},{"그물차트","Trend"},{"Pivot","Trend"}                                , {"Momentum","Indicator"},{"CCI","Indicator"},{"CO","Indicator"},{"MAC","Indicator"}                                , {"MFI","Indicator"},{"MI","Indicator"},{"NVI","Indicator"},{"Trix","Indicator"}                                ,{"Price Channel", "Trend"}	//2014.01.11 by LYH >> Price Channel 지표 추가                                ,{"Zig Zag", "Trend"},{"Demark", "Trend"},{"Pivot전봉기준 ", "Trend"} //2016.09.05 지그재그차트 추가                                };      public static String[][] getChartList() {        return chartList;    }        private static Vector<Hashtable<String, String>> chartItems = null;    public static Vector<Hashtable<String, String>> getChartListTag() {    	if(chartItems!=null) return chartItems;    	    	chartItems = new Vector<Hashtable<String, String>>();    	      	Hashtable<String, String> item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "캔들");    	item.put("tag", "20001");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "바");    	item.put("tag", "20002");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "라인");    	item.put("tag", "20003");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "Linear");    	item.put("tag", "20009");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "Log");    	item.put("tag", "20010");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "삼선전환도");    	item.put("tag", "20007");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "PnF");    	item.put("tag", "20011");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "스윙");    	item.put("tag", "20019");    	chartItems.add(item);    	    	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "렌코");    	item.put("tag", "20020");    	chartItems.add(item);    	    	//2015.04.29 by lyk - 역시계곡선 추가     	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "역시계곡선");    	item.put("tag", "20021");    	chartItems.add(item);    	//2015.04.29 by lyk - 역시계곡선 추가 end    	    	//2015.04.30 by lyk - 바(시고저종) 유형 추가    	item = new Hashtable<String, String>();    	item.put("type", "Basic");    	item.put("name", "바(시고저종)");    	item.put("tag", "20022");    	chartItems.add(item);    	//2015.04.30 by lyk - 바(시고저종) 유형 추가 end    	    	//2015.06.23 by lyk - 차트 유형 추가    	item = new Hashtable<String, String>();    	item.put("type", "Independence");    	item.put("name", "Kagi");    	item.put("tag", "20023");    	chartItems.add(item);    	//2015.06.23 by lyk - 차트 유형 추가 end        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "종가영역");        item.put("tag", "20024");        chartItems.add(item);        // 2017.07.05 by pjm - 차트 유형 추가 >>        item = new Hashtable<String, String>();        item.put("type", "Independence");        item.put("name", "분산형");        item.put("tag", "20025");        chartItems.add(item);        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "FLOW");        item.put("tag", "20026");        chartItems.add(item);        //2017.07.05 by pjm - 차트 유형 추가 <<        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "Heikin-Ashi");        item.put("tag", "20027");        chartItems.add(item);        //2020.07.06 by LYH >> 캔들볼륨 >>        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "캔들볼륨");        item.put("tag", "20028");        chartItems.add(item);        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "이큐볼륨");        item.put("tag", "20029");        chartItems.add(item);        //2020.07.06 by LYH >> 캔들볼륨 <<        item = new Hashtable<String, String>();        item.put("type", "Basic");        item.put("name", "계단");        item.put("tag", "20030");        chartItems.add(item);        return chartItems;    }    public static String getNote(char k, char c, char t) {        if(k=='S'){          switch(c){                case '0':                     if(t=='9') return "불성실공시";                    else return "";                case '1':                    if(t=='9') return "관리/불성실공시";                    else return "관리종목";                case '2':                    if(t=='9') return "감리/불성실공시";                    else return "감리종목";                case '3':                    if(t=='9') return "관리감리/불성실공시";                    else return "관리 감리";                case '6':                     if(t=='9') return "거래정지/불성실공시";                    else return "거래정지";                case '7':                     if(t=='9') return "거래중단/불성실공시";                    else return "거래중단";          }        }        else if(k=='K'){           switch(c){                case '0':                 	if(t=='0') return "";                	if(t=='1') return "투자유의";                	if(t=='2') return "지정해제";                	if(t=='9') return "불성실공시";                case '1':                	if(t=='0') return "관리종목";                	if(t=='1') return "관리/투자유의";                	if(t=='2') return "관리/지정해제";                	if(t=='9') return "관리/불성실공시";                case '2':                	if(t=='0') return "감리종목";                	if(t=='1') return "감리/투자유의";                	if(t=='2') return "감리/지정해제";                	if(t=='9') return "감리/불성실공시";                case '3':                	if(t=='0') return "관리 감리";                	if(t=='1') return "관리감리/투자유의";                	if(t=='2') return "관리감리/지정해제";                	if(t=='9') return "관리감리/불성실공시";                case '6':                	if(t=='0') return "거래정지";                	if(t=='1') return "거래정지/투자유의";                	if(t=='2') return "거래정지/지정해제";                	if(t=='9') return "거래정지/불성실공시";                case '7':                	if(t=='0') return "거래중단";                	if(t=='1') return "거래중단/투자유의";                	if(t=='2') return "거래중단/지정해제";                	if(t=='9') return "거래중단/불성실공시";           }        }        return "";        //return ms.isf.getNote(c);    }        public static boolean isInteger(String str) {        try{//            int d = new Integer(str).intValue();            return true;        }catch(Exception e){            return false;        }        //return false;    }        public static String formatDecimal(String str, boolean c, int f) {        String s;        if(str==null) return "";        /////////////////////////////////////////////ysp        if (!isInteger(str)) return str;                if ((str.indexOf('.')!=-1)||(str.indexOf(',')!=-1)) return str;        if (str.length()<=0) return "";        else s=str;        char[] buffer = new char[MAXCHAR];        if ((s.charAt(0)=='+')||(s.charAt(0)=='-')) {            buffer[0]=s.charAt(0);            s=new String(str.substring(1));        } else {            buffer[0]=' ';        }        int l = s.length();        int i, index;        index = MAXCHAR - 1;        i = l - 1;        if (f!=0) {            for(int ii = 0;ii < f;ii++) {                if (i >= 0) {                    if (Character.isDigit(s.charAt(i))) {                        buffer[index] = s.charAt(i);                    }                } else {                    buffer[index] = '0';                }                index--; i--;            }            buffer[index] = '.';            index--;            if (i < 0) {                buffer[index] = '0';                if(buffer[0]=='+'||buffer[0]=='-') {                    index--;                    buffer[index]=buffer[0];                }                return new String(buffer, index, MAXCHAR - index);            }        }        int intIndex = index - 3;        for(; i >= 0;i--) {            if (c && (((index - intIndex) % 4) == 0) && Character.isDigit(s.charAt(i))) {                buffer[index] = ',';                index--;            }            buffer[index] = s.charAt(i);            index--;        }        if(buffer[0]=='+'||buffer[0]=='-') {            buffer[index]=buffer[0];            index--;        }        return new String(buffer, index + 1, MAXCHAR - index - 1);    }        public static boolean startsWith(String s1, String s2) {        int len1=s1.length();        int len2=s2.length();        int idx=0;        if (len1<len2) return false;        for(int i=0;i<len1;i++) {            char c=s1.charAt(i);            if(c==' ') continue;            if(idx>=len2) return true;            if(c!=s2.charAt(idx)) return false;            idx++;        }        return true;    }        public static String[][] loadCode1(String filename, int[] dtt) {        Vector<String[]> v=new Vector<String[]>();        //int cnt=0;        int len=0;        String[] td;        for(int i=0;i<dtt.length;i++) {            len+=dtt[i];        }        len++;        byte[] bbuf = new  byte[len];                try {            URL fileURL = new URL(filename);            BufferedInputStream in = new BufferedInputStream( fileURL.openStream(), 3096);            int rl = MyRead1(in,bbuf,len);            /*            if(dtt.length==2){                dtt[1]=rl-dtt[0];            }            */            td = parseData1(dtt,bbuf);                        while(rl!=-1) {                v.addElement(td);                rl = MyRead1(in,bbuf,len);                if(dtt.length==2 && rl-dtt[0]>0) dtt[1]=rl-dtt[0];                td = parseData1(dtt,bbuf);                //cnt++;            }            in.close();        } catch(Exception e) {            e.printStackTrace();        }        if (v.size()>0) {            String[][] result=new String[v.size()][];            v.copyInto(result);            return result;        } else            return null;    }        public static int MyRead1(InputStream is, byte b[], int len) throws IOException {        if (len <= 0) return 0;    	int c = is.read();	    if (c == -1)  return -1;    	b[0] = (byte)c;    	int i = 1;    	try {    	    for (; i < len ; i++) {    	        c = is.read();    	        if (c==0) c = ' '; // convert null to space.    	        /*    	        if(c==10 || c==13) { // LF 나 CR이면 return i;    	            c = '';    	        }    	        */    	        if(c==10 || c==13) {    	            i=i-1;    	            continue;    	        }    	            	        //해외지수 데이터에 LF나 CR이 없어서 처리    	        b[i] = (byte) c;    	        /*if(c==10) {    	            return i;    	        }*/    	    }    	    i = len;	    } catch (IOException ee) {	        return -1;	    }	    return i;    }        public static String[] parseData1(int[] dtt, byte[] data) {        // make up data        for(int k=6; k<data.length; k++){            if(data[k]=='|'){                dtt[2]=k-(dtt[0]+dtt[1])+1;                break;            }        }        String[] sd = new String[dtt.length];        for(int i=0,j=0;i<dtt.length;i++) {            if (data.length>=(j+dtt[i])){                if(i==3){                    sd[i] = bitToByte(data,j+11);                }else{                    sd[i] = new String(data,j,dtt[i]);                    if(i==2 && sd[i].indexOf('|')>=0)                        sd[i]=new String(sd[i].substring(0,sd[i].length()-1));                }            } else {                return null;            }            j+=dtt[i];        }                return sd;    }            /*    public static byte[] readLine(InputStream is, byte[] t_buf) throws IOException {    	byte[] ret;    	    	int c = is.read();	    if (c == -1)  return null; //c=10;	 	t_buf[0] = (byte)c;    	    	int i = 1, len=1;    	try {    	    for (; i < 1024 ; i++) {    	        c = is.read();    	        if (c == -1)  return null; //c=10;    	        switch(c) {    	            case 0 : c = ' '; // convert null to space.    	                     t_buf[i] = (byte) c;    	                     len++;    	                     break;    	            case 13 : break;    	            case 10 :    	                     ret = new byte[len];    	                     System.arraycopy(t_buf, 0, ret, 0, len);    	                     return ret;    	                         	            default :              	                     t_buf[i] = (byte) c;    	                    len++;    	                    break;    	        }    	            	    }    	    ret = new byte[len];    	    System.arraycopy(t_buf, 0, ret, 0, len);    	    return ret;  	    } catch (IOException ee) {	        return null;	    }    }    */    public static byte[] readLine(InputStream is, byte[] t_buf) throws IOException {    	byte[] ret;    	    	int c = is.read();	    if (c == -1)  return null; //c=10;	 	t_buf[0] = (byte)c;    	    	int i = 1, len=1;    	try {    	    for (; i < 1024 ; i++) {    	        c = is.read();    	        if (c == -1)  {    	            c = 10; //EOF가 오면 지금까지 읽은 내용만 리턴. 2002.03.20 nykim    	        }    	        switch(c) {    	            case 0 : c = ' '; // convert null to space.    	                     t_buf[i] = (byte) c;    	                     len++;    	                     break;    	            case 13 : break;    	            case 10 :    	                     ret = new byte[len];    	                     System.arraycopy(t_buf, 0, ret, 0, len);    	                     return ret;    	                         	            default :              	                     t_buf[i] = (byte) c;    	                    len++;    	                    break;    	        }    	            	    }    	    ret = new byte[len];    	    System.arraycopy(t_buf, 0, ret, 0, len);    	    return ret;  	    } catch (IOException ee) {	        return null;	    }    }        public static String bitToByte(byte[] incode, int incnt){        byte[] outcode=new byte[24];        for(int ii=incnt; ii<incnt+3;ii++)incode[ii] ^= 0xff;                int tcode=0;        for(int pos=incnt; pos<incnt+3; pos++){            for(int work=7; work>=0; work--){                if(((incode[pos]>>work)&0x01)==0x01)outcode[tcode] ='1';               else outcode[tcode]='0';                tcode++;            }        }        String ret = new String(incode, incnt-11, 11)+new String(outcode,0,24);        //System.out.println(new String(outcode,0,24));        return ret;    }        public static String[] setNetworkRequest(int type, String code, int dataType, int count, String date, int id) {        if(code==null) return null;        if(count<=0) return null;        count=count%1000;        String trcode=null;        String param="";        if(type==0) {           // param+=getExtCodeByCode(code)[0].charAt(0);        }        if(id<10) id=10;        switch(dataType) {            case 0: // Tick                switch(type) {                    case 0: //현물                    trcode="I0005";                    //param+=UTIL.getExtCodeByCode(codeList[i])[0].charAt(0);                    break;                    case 1: //선물/옵션                    if(code.length()>4) trcode="I0306";                    else {                        code=new String((code+"    ").substring(0,8));                        trcode="I0206";                    }                    break;                    case 2: // 업종                                        return null; // no tick                    case 3: //개별 주식 옵션                    trcode="I0506";                                        break;                }                param+=code;                param+=new String(String.valueOf(count+1000).substring(1));            break;                        case 5: // 일            case 6: // 주            case 7: // 월                switch(type) {                    case 0: //현물                        trcode="I0006";                    break;                    case 1: //선물/옵션                        if(code.length()>4){                            trcode="I2033";                            dataType+=7;                        }                        else {                            code=new String((code+"    ").substring(0,8));                            trcode="I2023";                            dataType+=6;                        }                    break;                    case 2: // 업종                                            trcode="I2052";                    break;                    case 3: //개별주식 옵션                        trcode="I0507";                        dataType+=6;                    break;                                    }                param+=code;                param+=(char)((dataType-5)+(int)('0'));                param+=date;                                param+=new String(String.valueOf(count+1000).substring(1));            break;            default:            break;        }        if(trcode==null) return null;        String[] temp = {trcode, param};        return temp;        //UTIL.doNetworkRequest(trcode, id, param);    }        public static String[] setNetworkRequestByMin(int type, String code, int dataType, int count, String date, int id) {        if(code==null) return null;        if(count<=0) return null;                count=count%1000;        String trcode=null;        String param="";                if(id<10) id=10;        String temp = "" + dataType;        switch(type) {            case 0: //현물                trcode="I2007";                //param+=getExtCodeByCode(code)[0].charAt(0);                param += code;                param+=new String(String.valueOf(count+1000).substring(1));                param += new String(("000" + temp).substring(temp.length()));                            break;            case 1: //선물/옵션                                if(code.length()>4) {                    trcode="I2033";                    dataType++;                } else {                    code=new String((code+"    ").substring(0,8));                    trcode="I2023";                }                param += code;                param += dataType;                param+=new String(String.valueOf(count+1000).substring(1));            break;            case 2: // 업종                trcode="I2051";                param += code;                param += date;                param+=new String(String.valueOf(count+1000).substring(1));                param += new String(("000" + temp).substring(temp.length()));            break;            case 3: //개별 주식 옵션                trcode="I2043";                param += code;                param += dataType;                param+=new String(String.valueOf(count+1000).substring(1));            break;        }                if(trcode==null) return null;        String[] temp1 = {trcode, param};        return temp1;        //UTIL.doNetworkRequest(trcode, id, param);    }    //2021.08.27 by lyk - kakaopay - 월,일이 한 자리 숫자일때 십의 자리에 0을 쓰지않는 규칙 적용 >>    public static String makeTimeForKakaoRule(String s) {        if(s.length() == 2 && s.charAt(0) == '0') {            s = COMUtil.removeString(s, "0");        }        return s;    }    //2021.08.27 by lyk - kakaopay - 월,일이 한 자리 숫자일때 십의 자리에 0을 쓰지않는 규칙 적용 <<    public static String removeString(String charSource, String removeChar) {        int i = charSource.indexOf(removeChar);        String temp = charSource;        while(i != -1) {            temp = new String(temp.substring(0, i)) + new String(temp.substring(i + removeChar.length()));            i = temp.indexOf(removeChar);        }        return temp;           }        public static String[][] quickSort(String[][] data, int sortedCol, int low, int high, boolean ascending) {		if((high - low) <1) return data;		if(data[0].length < sortedCol) return data; 						String[] key = data[(high + low)/2];				int i = low;		int j = high;				if(ascending) {			while( i <= j ) {				// if ascending, key보다 큰 String 찾는다				while( (i < high) && (data[i][sortedCol].compareTo(key[sortedCol]) < 0) )  i++;				// if ascending, key보다 작거나 같은 String 찾는다                while( (j > low) && (data[j][sortedCol].compareTo(key[sortedCol]) > 0) )  j--;                if( i <= j ) {                	if( data[i][sortedCol].compareTo(data[j][sortedCol]) != 0 ) data = swap(data,i,j);                	i++;                	j--;                }			}		} else {//descending		   while( i <= j ) {		      // if descending, key보다 작은 String 찾는다		   	  while( (i < high) && (data[i][sortedCol].compareTo(key[sortedCol]) > 0) ) i++; 		   	  // if descending, key보다 크거나 같은 String 찾는다		   	  while( (j > low) && (data[j][sortedCol].compareTo(key[sortedCol]) < 0) ) j--;		   	  		   	  if( i <= j ) {		   	  	if( data[i][sortedCol].compareTo( data[j][sortedCol] ) != 0 ) data = swap(data,i,j);		   	  	i++;		   	  	j--;		   	  }		   }		}				if(low < j) data = quickSort( data, sortedCol, low, j, ascending);				if(j < high) data = quickSort( data, sortedCol, i, high, ascending);				return data;	}		public static Vector<String[]> quickSort(Vector<String[]> data, int sortedCol, int low, int high, boolean ascending) {		if((high - low) <1) return data;				int index = ((String[])data.elementAt(0)).length;		if(((String[])data.elementAt(0)).length < sortedCol) return data;		String[][] temp = new String[data.size()][index];		data.copyInto(temp);		temp = quickSort(temp, sortedCol, low, high, ascending);		Vector<String[]> v = new Vector<String[]>(temp.length);		for (int i = 0 ;  i < temp.length; i++) v.addElement(temp[i]);		return v;	}		public static String[] convertArray(String str, int num, String token) {  //**eun        if(str==null) return null;                String[] info = new String[num];        int tokLIdx=0, tokRIdx=0;//        String tokStr = null;        for(int i=0 ; i<num ; i++) {            tokRIdx = str.indexOf(token, tokLIdx);            info[i] = (tokRIdx==-1)?"":new String(str.substring(tokLIdx, tokRIdx));            tokLIdx = tokRIdx+1;        }                    return info;    }		public static String[][] swap(String[][] data, int left, int right) {		String[] tmp = data[left];		data[left] = data[right];		data[right] = tmp;		return data;	}        public static DataField[] makeFields(int[]fl, int[]ft, byte[]data, int in) {        Vector<DataField> v=new Vector<DataField>();        DataField f=null;        int index=in;        for(int i=0;i<fl.length;) {            if(index+fl[i]>data.length) {                //System.out.println("Corrupt protocol...");                //System.out.println("Desired length: " + (index+fl[i]) + " Actual(Real) length: " + data.length);//                String tmp_str = new String(data);                //System.out.println("RealData = " + tmp_str);                return null;            }            /********** ADD LHK debug **********            String tmp_str = new String(data);            System.out.println("RealData = " + tmp_str);            /********** END LHK debug **********/            switch(ft[i]) {                case 0: // integer                case 3: // double                case 4: // string                    if(f==null) f=new DataField();                    f.setValue(new String(data, index, fl[i]), ft[i]);                    if(i<fl.length-1) {                        if(ft[i+1]!=1 && ft[i+1]!=7) {                            v.addElement(f);                            f=null;                        }                    }else{                        v.addElement(f);                                            }                    index+=fl[i];                    i++;                                    break;                case 1: // attribute                    int at=data[index];                    if(at==32) {                        at=0;                    }else{                        at=(at&0x007f);                        switch(at) {                            case 0x10: at=1; break;                            case 0x20: at=2; break;                            case 0x30: at=3; break;                            case 0x40: at=4; break;                            case 0x50: at=5; break;                            default:                                at=0;                        }                    }                    char attr=(char)(at+(int)'0');                    //System.out.println("1111 = "+String.valueOf(attr));                    f.setValue(String.valueOf(attr), ft[i]);                    index+=fl[i];                    i++;                    v.addElement(f);                    f=null;                break;                case 2: // sign                    if(f==null) f=new DataField();                    f.setValue(new String(data, index, fl[i]), ft[i]);                    index+=fl[i];                    index+=fl[i+1];                    i+=2;                break;                case 5: // reserved for date/time                    if(f==null) f=new DataField();                    f.setValue(new String(data, index, fl[i]), ft[i]);                    index+=fl[i];                break;                case 7: // insert orgin attribute                	int att1 = Integer.parseInt(new String(data, index, fl[i]));                	switch(att1)            		{            			case 1:            			case 2:            				att1 = 3;            				break;            			case 3:            				att1 = 1;            				break;            			case 4:            			case 5:            				att1 = 2;            				break;            			default:            				att1 = 1;            				break;            		}                	//System.out.println("7777="+att1+ "||"+ft[i]);                    f.setValue(""+att1, ft[i]);                    index+=fl[i];                    i++;                    v.addElement(f);                    f=null;                break;                default:                    i++;            }        }        int n=v.size();        DataField[] result=new DataField[n];        v.copyInto(result);        return result;    }        public static MainBase getMainBase() {    	if(getMainFrame().mainBase!=null)     		return getMainFrame().mainBase;    	    	return null;    }        public static String makeZero(String str, int len) {        String result = "";        if(str.length()>len) {                     return new String(str.substring(0, len));        }        for(int i=str.length(); i<len; i++) result += "0";        return result+str;        }        public static String makeZeroBack(String str, int len) {        String result = "";        if(str.length()>len) {                     return new String(str.substring(0, len));        }        for(int i=str.length(); i<len; i++) result += "0";        return str+result;        }	  public static String cutStr(String str,int cutByte)	    {	      byte [] strByte = str.getBytes();	      if( strByte.length < cutByte )	        return str;	      int cnt = 0;	      for( int i = 0; i < cutByte; i++ )	      {	         if( strByte[i] < 0 )	         cnt++;	      }	     String r_str;	     if(cnt%2==0) r_str = new String(strByte, 0, cutByte );	     else r_str = new String(strByte, 0, cutByte + 1 );	     return r_str;	    }	      public static String[][] loadCodeAtHttp(String filename, int[] dtt) {    	if(codeData!=null) return codeData;    	    	String rtnVal="";    	Vector<String[]> v=new Vector<String[]>();    	try{    		URL url = new URL(filename);            URLConnection connection = url.openConnection();            HttpURLConnection httpConnection = (HttpURLConnection)connection;            int responseCode = httpConnection.getResponseCode();                        if(responseCode == HttpURLConnection.HTTP_OK){	             InputStream input = httpConnection.getInputStream();	             	             int len = -1;	             byte b[] = new byte[64000];	             if(buf.length()>0) buf.delete(0, buf.length());                   while ((len = input.read(b, 0, b.length)) > 0)                	   buf.append(new String(b, 0, len));                   input.close();                   rtnVal = buf.toString();            }           } catch(Exception e){            e.printStackTrace();           }           //           System.out.println("rtnVal:"+rtnVal);           StringTokenizer st = new StringTokenizer(rtnVal, "\n");           //보조메세지 분석//           _cdm.setPrevData("0");           int len = dtt.length;                      while (st.hasMoreTokens()) {        	   rtnVal = st.nextToken();        	   String[] sd=new String[len];        	   for(int i=0,j=0;i<len;i++) {        		   //sd[i] = COMUtil.cutStr(rtnVal, dtt[i]);                   sd[i] = new String(rtnVal.substring(j, dtt[i]));        		   //rtnVal = rtnVal.substring(dtt[i]);                   j+=dtt[i];               }        	   v.add(sd);           }                      if (v.size()<1) {           	return null;           }           codeData=new String[v.size()][];           if (v.size()>0) {           	v.copyInto(codeData);           }                                           return codeData;    }     public static String[][] loadFileAtHttp(String filename, int[] dtt) {    	String rtnVal="";    	Vector<String[]> v=new Vector<String[]>();    	try{    		URL url = new URL(filename);            URLConnection connection = url.openConnection();            HttpURLConnection httpConnection = (HttpURLConnection)connection;            int responseCode = httpConnection.getResponseCode();                        if(responseCode == HttpURLConnection.HTTP_OK){	             InputStream input = httpConnection.getInputStream();	             	             int len = -1;	             byte b[] = new byte[64000];	             if(buf.length()>0) buf.delete(0, buf.length());                   while ((len = input.read(b, 0, b.length)) > 0)                	   buf.append(new String(b, 0, len, "ms949"));                   input.close();                   rtnVal = buf.toString();            }           } catch(Exception e){            e.printStackTrace();           }           //           System.out.println("rtnVal:"+rtnVal);           StringTokenizer st = new StringTokenizer(rtnVal, "\n");           //보조메세지 분석//           _cdm.setPrevData("0");           int len = dtt.length;                      while (st.hasMoreTokens()) {        	   rtnVal = st.nextToken();        	   String[] sd=new String[len];        	   for(int i=0,j=0;i<len;i++) {        		   //sd[i] = COMUtil.cutStr(rtnVal, dtt[i]);                   sd[i] = new String(rtnVal.substring(j, dtt[i]));                   j+=dtt[i];               }        	   v.add(sd);           }                      if (v.size()<1) {           	return null;           }           String[][] retData=new String[v.size()][];           if (v.size()>0) {           	v.copyInto(retData);           }                     return retData;    }    public static String[][] loadCode(String filename, int[] dtt) {        Vector<String[]> v=new Vector<String[]>();        int cnt=0;        int len=0;        String[] td;        for(int i=0;i<dtt.length;i++) {            len+=dtt[i];        }        //len++;        byte[] bbuf = new  byte[len];                try {        	            URL fileURL = new URL(filename);            BufferedInputStream in = new BufferedInputStream( fileURL.openStream(), 3096);                       int rl = readLine(in,bbuf,len);            td = parseData(dtt,bbuf);                        while(rl!=-1) {            	if(cnt>3) break;                v.add(td);                rl = readLine(in,bbuf,len);                td = parseData(dtt,bbuf);                cnt++;            }            in.close();        } catch(Exception e) {            e.printStackTrace();        }        if (v.size()<1) {        	return null;        }        String[][] result=new String[v.size()][];        if (v.size()>0) {        	v.copyInto(result);        }                return result;    }    public static String[] parseData(int[] dtt, byte[] data) {        // make up data        String[] sd = new String[dtt.length];        int len = dtt.length;        for(int i=0,j=0;i<len;i++) {            if (data.length>=(j+dtt[i])){            	int dttVal = dtt[i];                sd[i] = new String(data,j,dttVal);            } else {                return null;            }            j+=dtt[i];        }                return sd;    }            public static String toKSC5601(String s){         if(s==null){             return null;         }         try{             return new String(s.getBytes("utf-8"),"utf-8"); //convert to hangul        }catch(Exception e){return s;}     }     public static boolean saveToFile(String fileName, boolean append, Vector v) {          //String homedir = System.getProperty("java.home");        //homedir+="\\";        File file = new File(fileName);        if(!file.exists()) {			append = false;			int index = (fileName).lastIndexOf("\\");			File f = new File(new String((fileName).substring(0, index)));			f.mkdirs();		}                try {            FileOutputStream out = new FileOutputStream(fileName, append);            for(int i = 0; i < v.size(); i++) {                out.write(((String)v.elementAt(i)+"\r\n").getBytes());            }            out.flush();            out.close();        }        catch(IOException e) {                        //System.out.println(fileName + " 화일생성 실패");            return false;        }                return true;    }        public static String[] loadConfigFile(String fileName) {//        String[] td;        byte[] t_buf;        Vector<String> vector = new Vector<String>(20, 10);        String homedir = System.getProperty("java.home");        homedir+="\\";        try {            FileInputStream in = new FileInputStream(homedir + fileName);                        t_buf=new byte[1024];                             byte[] data;            boolean b = true;            while(b) {                t_buf=new byte[1024];                                 data = readLine(in, t_buf);                if(data != null && data.length>0) {                    String imsi = new String(data);                    if(imsi.length() == 0) { b = false;  continue; }                    imsi = imsi.trim();                    vector.addElement(imsi);                } else b = false;            }            in.close();        } catch(Exception e) {            return null;        }                int vSize = vector.size();        if(vSize<1) return null;                String[] returnData = new String[vSize];        for(int i=0 ; i<vSize ; i++) {            returnData[i] = (String)vector.elementAt(i);        }        return returnData;    }        public static String getStringFromArray(Vector<String> datas, String gubun) {    	String rtnStr = "";    	if(datas==null) return rtnStr;    	int cnt = datas.size();    	for(int i=0; i<cnt; i++) {    		rtnStr = rtnStr + datas.elementAt(i)+gubun;    	}    	    	return rtnStr;    }        public static String makeSpace(String str, int len) {  // must str.length() <= len        if (str == null) return "";        String result = str;        if(result.length()>len) {                     return new String(result.substring(0, len));        }        for(int i=str.length(); i<len; i++) result += " ";        return result;            //return new String(fillSpace(str, len, 1));    }        public static String[] readMainInfo(String dataFile, String diff) {                String[] mainInfo = loadTextFile(dataFile);        if (mainInfo == null || mainInfo.length == 0) return null;                for (int i = 0 ; i < mainInfo.length ; i++) {            if(mainInfo[i].toUpperCase().equals("[" + diff.toUpperCase() + "]")) {                return setMapInfo(i, mainInfo);            }        }        return null;    }        public static String[] loadTextFile(String fileName) {//        String[] td;        byte[] t_buf;        Vector<String> vector = new Vector<String>(20, 10);                try {            //URL fileURL = new URL(_wts.getApplet().getCodeBase(), fileName);            //System.out.println(_wts.getApplet().getCodeBase() + "aa" + fileName);            FileInputStream in = null;            if(fileName.indexOf("C:") != -1)                in = new FileInputStream(fileName);            else                in = new FileInputStream("C:\\SK_JAVA\\"+fileName);            //BufferedInputStream in = new BufferedInputStream( fileURL.openStream(), 3096);            t_buf=new byte[1024];                             byte[] data;            boolean b = true;            while(b) {                t_buf=new byte[1024];                                 data = readLine(in, t_buf);                if(data != null && data.length>0) {                    String imsi = new String(data);                    if(imsi.length() == 0) { b = false;  continue; }                    imsi = imsi.trim();                    if(!imsi.startsWith("'"))//"'"는 주석이다.. 2002.02.19 nykim                        vector.addElement(imsi);                } else b = false;            }            in.close();        } catch(Exception e) {            //System.out.println(fileName + "읽기 실패");            return null;        }                int vSize = vector.size();        if(vSize<1) return null;                String[] returnData = new String[vSize];        for(int i=0 ; i<vSize ; i++) {            returnData[i] = (String)vector.elementAt(i);        }                return returnData;    }    /**     * 2004/05/28 수정. ykLee     * 일정한 간격 포맷의 데이터를 잘라서 배열에 넣는다.      * 기존 소스에 있던 오류 수정(버퍼스트링 첫번째 배열값 오류)    */    public static int readLine(BufferedInputStream is, byte b[], int len) throws IOException {        if (len <= 0) return 0;    	int c, i = 0;    	try {    	    for (; i < len ; i++) {    	        c = is.read();    	        if (i==0 && c == -1)  return -1;    	        //if (c==0) c = ' '; // convert null to space.    	        if(c==10 || c==13) {    	            i=i-1;    	            continue;    	        }    	        b[i] = (byte) c;    	        if(c==10) {    	            return i;    	        }    	    }	    } catch (IOException ee) {	        return -1;	    }	    return i;    }        public static String[] setMapInfo(int start, String[] winInfo) {        Vector<String> v = new Vector<String>(5, 4);        v.addElement(winInfo[start]);        start++;        for ( ; start < winInfo.length ; start++) {            if (winInfo[start].startsWith("[") || winInfo[start].startsWith("'") || winInfo[start].startsWith("#")) break;            v.addElement(winInfo[start]);        }        String[] temp = new String[v.size()];        v.copyInto(temp);        return temp;    }    public static String toKorean(String s)	{		try		{			if(s != null)				return new String(s.getBytes(), "utf-8");			else				return s;		}		catch(UnsupportedEncodingException _ex)		{			return "Encoding Error";		}	}    public static String toKorean2(String s)	{		try		{			if(s != null)				return new String(s.getBytes(), "EUC-KR");			else				return s;		}		catch(UnsupportedEncodingException _ex)		{			return "Encoding Error";		}	}		public static RTHandler getRTHandler(){        NetClient nc = _mainFrame.netClient;        if(nc != null) return nc.getRTHandler();        return null;    }    public static String getCheckCode(String code) {        //코드6자리 체킹 및 해외지수 코드 처리        boolean isNumber = true;        for(int i=0; i<code.length(); i++) {            if(!Character.isDigit(code.charAt(i))) {                isNumber = false;                break;            }        }        //if(isNumber) if(code.length()==6) code = code.substring(1);//5자리로 만들어준다.        if(isNumber) if(code.length()==5 && code.charAt(0)!='9') code = "0"+code;//6자리로 만들어준다.                return code;    }    public static boolean isDigit(String code) {    	if(code==null || code.equals("")) return false;        boolean isNumber = true;        for(int i=0; i<code.length(); i++) {            if(!Character.isDigit(code.charAt(i))) {                isNumber = false;                break;            }        }        return isNumber;    }            //특정 코드의 예외처리    public static int dtt[] = {10, 10};	public static String[][] refCode = null;	public static String getCode(String code) {	    try {		    if(refCode==null) refCode = loadCode(dataPath+"ReferenceCode.dat", dtt);//해외지수 심볼명 변경		} catch(Exception e) {		}	    	    if(refCode==null) return code;	            for(int i=0; i<refCode.length; i++) {            if(code.equalsIgnoreCase(refCode[i][0].trim())) {                code = refCode[i][1].trim();                break;            }        }        	    return code;	}		/**	*  code를 입력받아 lcode를 추출한다.	**/	public static String[][] LCodes = null;	public static String getLCode(String code) {	    //^ 로 들어오는 심볼처리	    code = removeString(code, "^");		    	    int dtt[] = {14, 3};	    try {		    if(LCodes==null) LCodes = loadCode(dataPath+"LCodes.dat", dtt);		} catch(Exception e) {		}	    	    if(LCodes==null) return "";	    	    Vector<String> temp = new Vector<String>();	    String lcode = "";        for(int i=0; i<LCodes.length; i++) {            if(code.equalsIgnoreCase(getCheckCode(LCodes[i][0].trim()))) {                if(lcode.equals(LCodes[i][1].trim())) continue;                lcode = LCodes[i][1].trim();                temp.addElement(lcode);            }        }                if(temp.size()==0 || temp.size()==1) return lcode;        else {            String tempcode = "";            for(int i=0; i<temp.size(); i++) {                tempcode+=(temp.elementAt(i)).toString()+";";            }            return tempcode;        }	}	public static float getPixel(int dip) {		//Pixel Convert TypedValue.COMPLEX_UNIT_DIP,//		float rtnVal = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dip,//				COMUtil._chartMain.getResources().getDisplayMetrics());////		return rtnVal;        //2023.08.07 by SJW - crashlytics 방어 코드 처리 >>        if (COMUtil.apiView == null) {            return 0.0f;        }        //2023.08.07 by SJW - crashlytics 방어 코드 처리 <<        Resources resources = COMUtil.apiView.getContext().getResources();        DisplayMetrics metrics = resources.getDisplayMetrics();        float px = dip * ((float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT);        return px;	}    public static float getPixel(float dip) {        //Pixel Convert TypedValue.COMPLEX_UNIT_DIP,//        float rtnVal = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dip,//                COMUtil._chartMain.getResources().getDisplayMetrics());//        int pixels = COMUtil.apiView.getResources().getDimensionPixelSize((int) dip);//        return (float)pixels;        //2023.08.07 by SJW - crashlytics 방어 코드 처리 >>        if (COMUtil.apiView == null) {            return 0.0f;        }        //2023.08.07 by SJW - crashlytics 방어 코드 처리 <<        Resources resources = COMUtil.apiView.getContext().getResources();        DisplayMetrics metrics = resources.getDisplayMetrics();        float px = dip * ((float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT);        return px;//        return rtnVal;    }    public static float convertDpToPixel(float dp, Context context) {	    Resources resources = context.getResources();	    DisplayMetrics metrics = resources.getDisplayMetrics();	    float px = dp * ((float) metrics.densityDpi / DisplayMetrics.DENSITY_DEFAULT);	    return px;	}	  private static final float DEFAULT_HDIP_DENSITY_SCALE = 1.5f;	  /**	   * 픽셀단위를 현재 디스플레이 화면에 비례한 크기로 반환합니다.	   * 	   * @param pixel 픽셀	   * @return 변환된 값 (DP)	   */	  public static int DPFromPixel(int pixel)	  {	    float scale = COMUtil._chartMain.getResources().getDisplayMetrics().density;	    	    return (int)(pixel / DEFAULT_HDIP_DENSITY_SCALE * scale);	  }	  	  /**	   * 현재 디스플레이 화면에 비례한 DP단위를 픽셀 크기로 반환합니다.	   * 	   * @param  DP 픽셀	   * @return 변환된 값 (pixel)	   */	  public static int PixelFromDP(int DP)	  {	    float scale = COMUtil._chartMain.getResources().getDisplayMetrics().density;	    	    return (int)(DP / scale * DEFAULT_HDIP_DENSITY_SCALE);	  }	//2011.08.05 by LYH >> 2개 이상 차트가 있는 경우 스래드로 돌며서 스테틱 변수를 침범 - 함수 안으로 이동//	private static ByteBuffer bb = null;//	private static FloatBuffer line = null;//	private static float[] lineVertices=new float[4];	//2011.08.05 by LYH <<    public static void drawLine(GL10 gl, float x1, float y1, float x2, float y2, int[] color, float alpha) {	    //2011.08.05 by LYH >> 2개 이상 차트가 있는 경우 스래드로 돌며서 스테틱 변수를 침범 - 함수 안으로 이동    	ByteBuffer bb = null;    	FloatBuffer line = null;    	float[] lineVertices=new float[4];    	//2011.08.05 by LYH <<    	gl.glClearColor(0.0f, 0.0f, 0.0f,0.0f);    //Black Background    	//2011.08.05 by LYH >> 막음    	//gl.glDisable(GL10.GL_DEPTH_TEST);    	//gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )    	//2011.08.05 by LYH <<     	 gl.glColor4f(color[0]/255.f, color[1]/255.f, color[2]/255.f, alpha);    	 gl.glPushMatrix();    	 //    	 float lineVertices[] = { x1, y1, x2, y2 };    	 lineVertices[0]=x1;    	 lineVertices[1]=y1;    	 lineVertices[2]=x2;    	 lineVertices[3]=y2;    	          //if(bb==null) {    	 //bb = ByteBuffer.allocateDirect(lineVertices.length * 4);         //if(bb==null)         	 bb = ByteBuffer.allocateDirect(lineVertices.length * 4);//         else	//         {//         	for(int i=0; i<lineVertices.length; i++ )//         		bb.putFloat(i, lineVertices[i]);//         }        	 bb.order(ByteOrder.nativeOrder());             line = bb.asFloatBuffer();         //}//         line.clear();         line.put(lineVertices);         line.position(0);                 gl.glVertexPointer(2, GL10.GL_FLOAT, 0, line );        gl.glDrawArrays(GL10.GL_LINES, 0, 2);        gl.glPopMatrix();    }//2011.08.05 by LYH >> 2개 이상 차트가 있는 경우 스래드로 돌며서 스테틱 변수를 침범 - 함수 안으로 이동    //	private static ByteBuffer bbRect = null;//	private static FloatBuffer lineRect = null;//	private static float[] rectVertices=new float[8];//2011.08.05 by LYH <<    public static void drawFillRect(GL10 gl, float x, float y, float w, float h, int[] color, float alpha) {    	// Calculate bounding rect and store in vertices//    	gl.glClearColor(0.0f, 0.0f, 0.0f,0.0f);    //Black Background//    	gl.glDisable(GL10.GL_DEPTH_TEST);//    	gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW ) 		//2011.08.05 by LYH >> 2개 이상 차트가 있는 경우 스래드로 돌며서 스테틱 변수를 침범 - 함수 안으로 이동    	ByteBuffer bbRect = null;    	FloatBuffer lineRect = null;    	float[] rectVertices=new float[8];    	//2011.08.05 by LYH <<    	gl.glPushMatrix();    	gl.glColor4f(color[0]/255.f, color[1]/255.f, color[2]/255.f, alpha);//    	float lineVertices[] = {//    			x,y,//top left//    			x,y+h,//bottom left//    			x+w,y+h,//bottom right//    			x+w,y//top right//    	};    	rectVertices[0]=x;    	rectVertices[1]=y;    	rectVertices[2]=x;    	rectVertices[3]=y+h;    	rectVertices[4]=x+w;    	rectVertices[5]=y+h;    	rectVertices[6]=x+w;    	rectVertices[7]=y;    	//if(bbRect==null) {//    	if(bbRect==null)     		bbRect = ByteBuffer.allocateDirect(rectVertices.length * 4);//        else	//        {//        	for(int i=0; i<rectVertices.length; i++ )//        		bbRect.putFloat(i, rectVertices[i]);//        }    		    		bbRect.order(ByteOrder.nativeOrder());	         lineRect = bbRect.asFloatBuffer();    	//}//    	lineRect.clear();    	lineRect.put(rectVertices);    	lineRect.position(0);    	    	gl.glVertexPointer (2, GL10.GL_FLOAT , 0, lineRect);    	gl.glDrawArrays (GL10.GL_TRIANGLE_FAN, 0, 4);    	gl.glPopMatrix();    	//bbRect=null;    }        public static void drawRect(GL10 gl, float x, float y, float w, float h, int[] color) {//    	gl.glClearColor(0.0f, 0.0f, 0.0f,0.0f);    //Black Background//    	gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW ) //    	gl.glDisable(GL10.GL_DEPTH_TEST);    	// Calculate bounding rect and store in vertices    	//2011.08.05 by LYH >> 2개 이상 차트가 있는 경우 스래드로 돌며서 스테틱 변수를 침범 - 함수 안으로 이동    	ByteBuffer bbRect = null;    	FloatBuffer lineRect = null;    	float[] rectVertices=new float[8];    	//2011.08.05 by LYH <<    	gl.glColor4f(color[0]/255.f, color[1]/255.f, color[2]/255.f, 1.0f);//    	gl.glColor4f((float)((float)Color.red(color)/(float)255),(float)((float)Color.blue(color)/(float)255), (float)((float)Color.green(color)/(float)255), 1.0f);    	    	gl.glPushMatrix();//    	float lineVertices[] = {//    			x,y,//top left//    			x,y+h,//bottom left//    			x+w,y+h,//bottom right//    			x+w,y//top right//    	};    	rectVertices[0]=x;    	rectVertices[1]=y;    	rectVertices[2]=x;    	rectVertices[3]=y+h;    	rectVertices[4]=x+w;    	rectVertices[5]=y+h;    	rectVertices[6]=x+w;    	rectVertices[7]=y;    	    	//if(bbRect==null) {    	//if(bbRect==null)    		bbRect = ByteBuffer.allocateDirect(rectVertices.length * 4);//        else	//        {//        	for(int i=0; i<rectVertices.length; i++ )//        		bbRect.putFloat(i, rectVertices[i]);//        }    		bbRect.order(ByteOrder.nativeOrder());	         lineRect = bbRect.asFloatBuffer();    	//}//    	lineRect.clear();    	lineRect.put(rectVertices);    	lineRect.position(0);    	    	gl.glVertexPointer (2, GL10.GL_FLOAT , 0, lineRect);    	gl.glDrawArrays (GL10.GL_LINE_LOOP, 0, 4);    	gl.glPopMatrix();    	//bbRect = null;    }    public static void drawCircle(GL10 gl, int x, int y, float size, boolean filled, int[] color) {    	//2011.08.05 by LYH >> 막음 <<    	//gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )     	gl.glColor4f(color[0]/255.f, color[1]/255.f, color[2]/255.f, 1.0f);//    	gl.glColor4f((float)((float)Color.red(color)/(float)255), (float)((float)Color.blue(color)/(float)255), (float)((float)Color.green(color)/(float)255), 1.0f);       	gl.glPushMatrix();    	Point center = new Point(x, y);    	COMUtil.GLDrawEllipse(gl, 24, size/2, size/2, center, filled);    	gl.glPopMatrix();    }    public static void drawCircle(GL10 gl, int x, int y, float width, float height, boolean filled, int[] color) {    	//2011.08.05 by LYH >> 막음 <<    	//gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )     	gl.glColor4f(color[0]/255.f, color[1]/255.f, color[2]/255.f, 1.0f);//    	gl.glColor4f((float)((float)Color.red(color)/(float)255), (float)((float)Color.blue(color)/(float)255), (float)((float)Color.green(color)/(float)255), 1.0f);       	gl.glPushMatrix();    	Point center = new Point(x, y);    	COMUtil.GLDrawEllipse(gl, 24, width/2, height/2, center, filled);    	gl.glPopMatrix();    }        public static void GLDrawEllipse(GL10 gl, int segments, float width, float height, Point center, boolean filled) {    	gl.glPushMatrix();    	float[] lineVertices=new float[segments*2];    	int count=0;     	for (float i = 0; i < 360.0f; i+=(360.0f/segments)) {      		    		lineVertices[count++] = (float)(Math.cos(Math.PI * (i) / 180.0)*width)+(float)center.x;      		lineVertices[count++] = (float)(Math.sin(Math.PI * (i) / 180.0)*height)+(float)center.y;     		    	}     	 ByteBuffer bb = ByteBuffer.allocateDirect(lineVertices.length * 4);         bb.order(ByteOrder.nativeOrder());         FloatBuffer line = bb.asFloatBuffer();         line.put(lineVertices);         line.position(0);             	gl.glVertexPointer (2, GL10.GL_FLOAT , 0, line);      	gl.glDrawArrays ((filled) ? GL10.GL_TRIANGLE_FAN : GL10.GL_LINE_LOOP, 0, segments);    	gl.glPopMatrix();    }        public static void GLDrawArc(GL10 gl, int segments, float width, float height, Point center, boolean filled) {    	gl.glPushMatrix();    	float[] lineVertices=new float[(segments+1)*2];    	int count=0;     	for (float i = 0; i <= 180.0f; i+=(180.0f/segments)) {      		    		lineVertices[count++] = (float)(Math.cos(Math.PI * (i) / 180.0)*width)+(float)center.x;      		lineVertices[count++] = (float)(Math.sin(Math.PI * (i) / 180.0)*height)+(float)center.y;     		    	}     	 ByteBuffer bb = ByteBuffer.allocateDirect(lineVertices.length * 4);         bb.order(ByteOrder.nativeOrder());         FloatBuffer line = bb.asFloatBuffer();         line.put(lineVertices);         line.position(0);             	gl.glVertexPointer (2, GL10.GL_FLOAT , 0, line);      	gl.glDrawArrays (GL10.GL_LINE_STRIP, 0, segments+1);    	gl.glPopMatrix();    }        public static String jipyoNameToEng(String str) {    //2012. 7. 5  title 에 한글 표시      	//현재 Text draw방식이 image font를 사용하기 때문에, 한글이 지원되지 않는다.		if (str.equals("가격") ||str.equals("종가")) {			str = "가격";		}else if (str.equals("기본거래량") ||str.equals("거래량")) {			str = "거래량";		}//		else if (str=="삼선전환도") {//			str = "THIRDCHART";//		}else if (str=="대기매물") {//			str = "VOLUMEFORSALE";//		}else if (str=="그물차트") {//			str = "RAINBOW";//		}else if (str=="P&F차트") {//			str = "P&F";//		}else if (str=="전환선") {//			str = "CHANGE";//		}else if (str=="기준선") {//			str = "BASELINE";//		}else if (str=="후행스팬") {//			str = "ESCORTSPAN";//		}else if (str=="선행스팬") {//			str = "PRECEDESPAN";//		}else if (str=="시가") {//			str = "OPEN";//		}else if (str=="고가") {//			str = "HIGH";//		}else if (str=="저가") {//			str = "LOW";//		}else if (str=="종가") {//			str = "CLOSE";//		}		//2012. 7. 9  십자선데이터 패널의  20MA 같은 타이틀을 가격/20 과 같은 형태로 나타내기 위해 주석처리 //		else if(str.indexOf("가격")!=-1) {//			int idx = str.indexOf("/");//			String val = new String(str.substring(idx+1));//			str=val+"MA";//		}//		else if (str.equals("가격/5")) {//			str = "5MA";//		}else if (str.equals("가격/20")) {//			str = "20MA";//		}else if (str.equals("가격/60")) {//			str = "60MA";//		}else if (str.equals("가격/120")) {//			str = "120MA";//		}else if (str.equals("이동평균")) {//			str = "5MA";//		}else if (str.equals("이동평균1")) {//			str = "20MA";//		}else if (str.equals("이동평균2")) {//			str = "60MA";//		}else if (str.equals("이동평균3")) {//			str = "120MA";//		}//		else if (str=="심리도") {//	        str = "PSYCHOLOGY";//	    }else if (str=="단기이격률") {//	        str = "SHORT DISPARITY";//	    }else if (str=="장기이격률") {//	        str = "LONG DISPARITY";//	    }else if (str=="이격도") {//	        str = "DISPARITY";//	    }else {//	    	str = str.toUpperCase();//	    }				return str;    }    private static Paint textPaint = new Paint();    private static Canvas canvas = null;//    private static Bitmap bitmap = null;    private static Drawable background = null;	public static void drawSpriteText(GL10 gl, Context context, String text, int x, int y, int color) {		gl.glRotatef(270.0f, 0, 0, 1);		// Create an empty, mutable bitmap		if(bitmap==null) bitmap = Bitmap.createBitmap(256, 256, Bitmap.Config.ARGB_4444);		// get a canvas to paint over the bitmap		if(canvas==null) canvas = new Canvas(bitmap);		bitmap.eraseColor(0);		// get a background image from resources		// note the image format must match the bitmap format		int layoutResId = COMUtil._chartMain.getResources().getIdentifier("bg_memo", "drawable", COMUtil._chartMain.getPackageName());		if(background==null) background = context.getResources().getDrawable(layoutResId);//		background.setBounds(0, 0, 256, 256);        Rect currentFrame = new Rect((int) COMUtil.currentFrame.left, (int) COMUtil.currentFrame.top, (int) COMUtil.currentFrame.right, (int) COMUtil.currentFrame.bottom);		background.setBounds(currentFrame);		background.draw(canvas); // draw the background to our bitmap		// Draw the text				textPaint.setTextSize(10);		textPaint.setAntiAlias(true);		textPaint.setARGB(0xff, 0x00, 0x00, 0x00);		textPaint.setColor(color);		// draw the text centered		canvas.drawText(text, x, y, textPaint);		//Generate one texture pointer...		gl.glGenTextures(1, currentTextures, 0);		//...and bind it to our array		gl.glBindTexture(GL10.GL_TEXTURE_2D, currentTextures[0]);		//Create Nearest Filtered Texture		gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);		gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);		//Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE		gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);		gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);		gl.glTexEnvx(GL10.GL_TEXTURE_ENV, GL10.GL_TEXTURE_ENV_MODE, 	    		GL10.GL_MODULATE);		//Use the Android GLUtils to specify a two-dimensional texture image from our bitmap		GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);		//Clean up		bitmap.recycle();	}    public static void drawString(final GL10 gl, int[] color, int x, int y, String str) {//    	int colorVal = Color.rgb(color[0], color[1], color[2]);//    	COMUtil.drawSpriteText(gl, COMUtil.mContext, str, x, y, Color.WHITE);    	    	gl.glPushMatrix();    	//tf.SetScale(0.95f);    	tf.SetPolyColor(color[0]/255.f, color[1]/255.f, color[2]/255.f);				//현재 Text draw방식이 image font를 사용하기 때문에, 한글이 지원되지 않는다.		str = COMUtil.jipyoNameToEng(str);				//str는 영문 대문자, 숫자 특수문자(일부)만 가능.		//tf.PrintAt(gl, str, x, COMUtil.currentFrame.height()-y-(int)COMUtil.getPixel(16)); //default:12		tf.PrintAt(gl, str, x, (int)COMUtil.currentFrame.height()-y-26); //default:12		//gl.glDisable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW ) 		gl.glPopMatrix();    }    //    //2011.08.05 by LYH >> COMUtil의 currentFrame 높이가 아니라 차트 높이 넘겨 받아 몬자 위치 조정//    public static void drawString(final GL10 gl, int[] color, int x, int y, String str, int nHeight) {//	   	gl.glPushMatrix();//    	//tf.SetScale(0.95f);//    	tf.SetPolyColor(color[0]/255.f, color[1]/255.f, color[2]/255.f);//		//		//현재 Text draw방식이 image font를 사용하기 때문에, 한글이 지원되지 않는다.//		str = COMUtil.jipyoNameToEng(str);		//		//str는 영문 대문자, 숫자 특수문자(일부)만 가능.//		tf.PrintAt(gl, str, x, nHeight-y-(int)COMUtil.getPixel(16)); //default:12 //		gl.glPopMatrix();//    }//    //2011.08.05 by LYH <<        public static void createFont(GL10 gl, Context context, String fontName) {//        if(tf==null) {        	tf = new TextFont(context, gl);        		        try {	        	tf.LoadFont(fontName, gl);	        } catch(IOException e) {	        	System.out.println(e);	        }//        }    }    public static Context mContext=null;    private static Toast toast=null;    public static void showMessage(final Context context, final String msg) {	      mHandler.post(new Runnable() {	          public void run() {	        	if(context == null)	        		return;	          	if(toast==null) {	        		toast = Toast.makeText(context, msg, Toast.LENGTH_SHORT);	        		toast.setGravity(Gravity.CENTER, 0, 0);	        	} else {	        		toast.setText(msg);	        	}	        	toast.show();	          }	      });  }        //2015. 1. 13 by lyk - 동일지표 추가 (추가리스트)    private static Vector<Hashtable<String, String>> addItems = null;    public static void setAddJipyoList(Vector<Hashtable<String, String>> items) {    	if(items==null) {    		alItems2 = null;    	}    	addItems = items;    }    public static Vector<Hashtable<String, String>> getAddJipyoList() {    	if(addItems==null) {    		addItems = new Vector<Hashtable<String, String>>();    	}    	return addItems;    }    public static void saveAddJipyoList(String fileName) {		SaveData data = new SaveData();		data.setAddList(COMUtil.getAddJipyoList());				try {			ObjectOutputStream oos = new ObjectOutputStream(new BufferedOutputStream(new FileOutputStream(COMUtil.getAddJipyoFilePath()+fileName)));			oos.writeObject(data);			oos.flush();			oos.close();		} catch (Exception e) {					}    }        public static void loadAddJipyoList(String fileName) {		  //2015. 1. 13 by lyk - 동일지표 복원		  try {			// 저장 파일을 객체로 읽는다.			   ObjectInputStream ois = new ObjectInputStream(new BufferedInputStream(new FileInputStream(COMUtil.getAddJipyoFilePath()+fileName)));			   			   if(ois!=null) {				// 읽어들인 객체는 오브젝트 형이므로 캐스팅을 해줘야 한다.				   SaveData open = (SaveData)ois.readObject();				   COMUtil.setAddJipyoList(open.getAddList());				   ois.close();			   }		  } catch (Exception e) {			  COMUtil.setAddJipyoList(null);			  e.printStackTrace();		  }		 //2015. 1. 13 by lyk - 동일지표 복원  end    }        public static void delAddJipyoList(String fileName) {    	try {	    	File file = new File(COMUtil.getAddJipyoFilePath()+fileName);	        file.delete();    	} catch (Exception e) {    		e.printStackTrace();    	}    }    //2015. 1. 13 by lyk - 동일지표 추가 (추가리스트) end    	private static Vector<Hashtable<String, String>> items = null;    //2017.05.11 by LYH >> 전략(신호, 강약) 추가    private static void addJipyoMenuItem(String strType, String strName, String strTag, String strDetailType, String strSubType){        Hashtable<String, String> item = new Hashtable<String, String>();        item.put("type",strType);        item.put("name", strName);        item.put("tag", strTag);        item.put("detailType", strDetailType);        //2017. 8. 1 by hyh - 지표설정 UI 변경. 임시 >>        item.put("subType", strSubType);        //2017. 8. 1 by hyh - 지표설정 UI 변경. 임시 <<        items.add(item);    }    //2017.05.11 by LYH << 전략(신호, 강약) 추가 end    public static Vector<Hashtable<String, String>> getJipyoMenu() {        if (items != null) return items;        items = new Vector<Hashtable<String, String>>();        //==================        // 오버레이        //==================        addJipyoMenuItem("Trend", "주가이동평균", "" + ChartUtil.PAVERAGE, "overlay", "overlay");        addJipyoMenuItem("Trend", "가격 & Box", "" + ChartUtil.PRICEBOX, "overlay", "overlay");        addJipyoMenuItem("Trend", "그물차트", "" + ChartUtil.RAINBOW, "overlay", "overlay");        addJipyoMenuItem("Trend", "매물대", "" + ChartUtil.STANDSCALE, "overlay", "overlay");        addJipyoMenuItem("Trend", "일목균형표", "" + ChartUtil.GLANCE_BALANCE, "overlay", "overlay");        addJipyoMenuItem("Trend", "Bollinger Band", "" + ChartUtil.BOLLINGER, "overlay", "overlay");        addJipyoMenuItem("Trend", "DEMA", "" + ChartUtil.DEMA, "overlay", "overlay");        addJipyoMenuItem("Trend", "Demark", "" + ChartUtil.DEMARK, "overlay", "overlay");        addJipyoMenuItem("Trend", "Envelope", "" + ChartUtil.ENVELOPE, "overlay", "overlay");        addJipyoMenuItem("Trend", "MAC", "" + ChartUtil.MAC, "overlay", "overlay");        addJipyoMenuItem("Trend", "Parabolic SAR", "" + ChartUtil.PARABOLIC, "overlay", "overlay");        addJipyoMenuItem("Trend", "Pivot", "" + ChartUtil.PIVOT, "overlay", "overlay");        addJipyoMenuItem("Trend", "Pivot전봉기준", "" + ChartUtil.PIVOTPRE, "overlay", "overlay");        addJipyoMenuItem("Trend", "Price Channel", "" + ChartUtil.PRICE_CHANNEL, "overlay", "overlay");        addJipyoMenuItem("Trend", "Starc Bands",""+ChartUtil.STARC_BANDS,"overlay","overlay");        addJipyoMenuItem("Trend", "TEMA", "" + ChartUtil.TEMA, "overlay", "overlay");        addJipyoMenuItem("Trend", "Zig Zag", "" + ChartUtil.ZIGZAG, "overlay", "overlay");        //==================        // 거래량지표        //==================        addJipyoMenuItem("Indicator", "거래량", "" + ChartUtil.VOLUME, "jipyo", "volume");        addJipyoMenuItem("Trend", "거래량이동평균", "" + ChartUtil.VAVERAGE, "jipyo", "volume");        addJipyoMenuItem("Indicator", "거래대금", "" + ChartUtil.TRADING_VALUE, "jipyo", "volume");        addJipyoMenuItem("Indicator", "Chaikins OSC", "" + ChartUtil.CO, "jipyo", "volume");        addJipyoMenuItem("Indicator", "CMF",""+ChartUtil.CMF,"jipyo","volume");        addJipyoMenuItem("Indicator", "Force Index",""+ChartUtil.FORCE_INDEX,"jipyo","volume");        addJipyoMenuItem("Indicator", "EOM", "" + ChartUtil.EOM, "jipyo", "volume");        addJipyoMenuItem("Indicator", "MFI", "" + ChartUtil.MFI, "jipyo", "volume");        addJipyoMenuItem("Indicator", "NVI", "" + ChartUtil.NVI, "jipyo", "volume");        addJipyoMenuItem("Indicator", "OBV", "" + ChartUtil.OBV, "jipyo", "volume");        addJipyoMenuItem("Indicator", "PVI",""+ChartUtil.PVI,"jipyo","volume");        addJipyoMenuItem("Indicator", "VA Oscillator",""+ChartUtil.VA_OSC,"jipyo","volume");        addJipyoMenuItem("Indicator", "Volume Oscillator", "" + ChartUtil.VMAO, "jipyo", "volume");        addJipyoMenuItem("Indicator", "VR", "" + ChartUtil.VR, "jipyo", "volume");        addJipyoMenuItem("Indicator", "VROC", "" + ChartUtil.VROC, "jipyo", "volume");        //시장지표        for(int i=0; i<ChartUtil.strMarkets.length; i++)        {            addJipyoMenuItem("Indicator",ChartUtil.strMarkets[i],""+(ChartUtil.MARKET1+i),"other","market");        }        //==================        // 추세지표        //==================        addJipyoMenuItem("Indicator", "AD Line", "" + ChartUtil.ADLINE, "jipyo", "trend");        addJipyoMenuItem("Indicator", "ADX", "" + ChartUtil.ADX, "jipyo", "trend");        addJipyoMenuItem("Indicator", "ADXR",""+ChartUtil.ADXR,"jipyo","trend");        addJipyoMenuItem("Indicator", "CCI", "" + ChartUtil.CCI, "jipyo", "trend");        addJipyoMenuItem("Indicator", "DMI", "" + ChartUtil.DMI, "jipyo", "trend");        addJipyoMenuItem("Indicator", "Formula",""+ChartUtil.FORMULA,"jipyo","trend");        addJipyoMenuItem("Indicator", "LRL", "" + ChartUtil.LRL, "jipyo", "trend");        addJipyoMenuItem("Indicator", "LRS", "" + ChartUtil.LRS, "jipyo", "trend");        addJipyoMenuItem("Indicator", "MACD", "" + ChartUtil.MACD, "jipyo", "trend");        addJipyoMenuItem("Indicator", "MACD OSC", "" + ChartUtil.MACD_OSC, "jipyo", "trend");        addJipyoMenuItem("Indicator", "MACD+OSC", "" + ChartUtil.MACDPLUSOSC, "jipyo", "trend");        addJipyoMenuItem("Indicator", "MAO", "" + ChartUtil.MAO, "jipyo", "trend");        addJipyoMenuItem("Indicator", "Momentum", "" + ChartUtil.Momentum, "jipyo", "trend");        addJipyoMenuItem("Indicator", "NDI",""+ChartUtil.NDI,"jipyo","trend");        addJipyoMenuItem("Indicator", "Price Oscillator", "" + ChartUtil.OSCP, "jipyo", "trend");        addJipyoMenuItem("Indicator", "Price ROC", "" + ChartUtil.PROC, "jipyo", "trend");        addJipyoMenuItem("Indicator", "Reverse", "" + ChartUtil.REVERSE, "jipyo", "trend");        addJipyoMenuItem("Indicator", "ROC", "" + ChartUtil.ROC, "jipyo", "trend");        addJipyoMenuItem("Indicator", "Sonar", "" + ChartUtil.SONAR, "jipyo", "trend");        addJipyoMenuItem("Indicator", "SROC", "" + ChartUtil.SROC, "jipyo", "trend");        addJipyoMenuItem("Indicator", "TRIX", "" + ChartUtil.TRIX, "jipyo", "trend");        addJipyoMenuItem("Indicator", "TSF", "" + ChartUtil.TSF, "jipyo", "trend");        addJipyoMenuItem("Indicator", "VHF", "" + ChartUtil.VHF, "jipyo", "trend");        //==================        // 변동성지표        //==================        addJipyoMenuItem("Indicator", "이격도", "" + ChartUtil.DISPARITY, "jipyo", "volatility");        addJipyoMenuItem("Indicator","이격도[지수]",""+ChartUtil.DISPARITYINDEX,"jipyo","volatility");        addJipyoMenuItem("Indicator", "AB Ratio", "" + ChartUtil.AB_Ratio, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "ATR", "" + ChartUtil.ATR, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Band %B", "" + ChartUtil.BANDB, "jipyo", "volatility");        addJipyoMenuItem("Indicator","Band Width",""+ChartUtil.BANDWIDTH,"jipyo","volatility");        addJipyoMenuItem("Indicator","Bollinger Band [보조]",""+ChartUtil.BOLLINGER_2,"jipyo","volatility");        addJipyoMenuItem("Indicator", "Chaikins Volatility", "" + ChartUtil.CV, "jipyo", "volatility");        addJipyoMenuItem("Indicator","DPO",""+ChartUtil.DPO,"jipyo","volatility");        addJipyoMenuItem("Indicator","DRF",""+ChartUtil.DRF,"jipyo","volatility");        addJipyoMenuItem("Indicator", "Mass Index", "" + ChartUtil.MI, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "NCO", "" + ChartUtil.NCO, "jipyo", "volatility");        addJipyoMenuItem("Indicator","Qstic",""+ChartUtil.QSTIC,"jipyo","volatility");        addJipyoMenuItem("Indicator", "RMI", "" + ChartUtil.RMI, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "RSI", "" + ChartUtil.RSI, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Sigma", "" + ChartUtil.SIGMA, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Standard Deviation", "" + ChartUtil.STDEV, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Stochastic Fast", "" + ChartUtil.STOCH_FST, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Stochastic Slow", "" + ChartUtil.STOCH_SLW, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Stochastics Oscillator", "" + ChartUtil.STOCH_OSC, "jipyo", "volatility");        addJipyoMenuItem("Indicator", "Williams R", "" + ChartUtil.WILLIAMS, "jipyo", "volatility");        //==================        // 2차파생지표        //==================        addJipyoMenuItem("Indicator", "%B+Stochastic", "" + ChartUtil.BANDBSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "LRS+Stochastic", "" + ChartUtil.LRSSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "MACD+Stochastic", "" + ChartUtil.MACDSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "Momentum+Stochastic", "" + ChartUtil.MOMENTUMSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "OBV+Momentum", "" + ChartUtil.OBVMOMENTUM, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "OBV+Stochastic", "" + ChartUtil.OBVSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "ROC+Stochastic", "" + ChartUtil.ROCSTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "RSI+MACD", "" + ChartUtil.RSIMACD, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "RSI+Stochastic", "" + ChartUtil.RSISTOCH, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "Sonar+심리도", "" + ChartUtil.SONARPSYCO, "jipyo", "derivation");        addJipyoMenuItem("Indicator", "Stochastic+RSI", "" + ChartUtil.STOCHRSI, "jipyo", "derivation");        //==================        // 시장강도지표        //==================        addJipyoMenuItem("Indicator", "심리도", "" + ChartUtil.PSYCO, "jipyo", "marketStrength");        addJipyoMenuItem("Indicator", "신심리도", "" + ChartUtil.NEWPSYCO, "jipyo", "marketStrength");        addJipyoMenuItem("Indicator","BPDL Short Trend",""+ChartUtil.BPDL_SHORT_TREND,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","BPDL Stochastic",""+ChartUtil.BPDL_STOCH,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Elder_Ray Bear Power",""+ChartUtil.ELDER_RAY_BEAR_POWER,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Elder_Ray Bull Power",""+ChartUtil.ELDER_RAY_BULL_POWER,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Force Index Long Term",""+ChartUtil.FORCE_INDEX_LONG_TERM,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Force Index Short Term",""+ChartUtil.FORCE_INDEX_SHORT_TERM,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","GM McClellan Oscillator",""+ChartUtil.GM_McCLELAN_OSC,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","GM McClellan Summation",""+ChartUtil.GM_McCLELAN_SUM,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","LFI",""+ChartUtil.LFI,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Moving Balance Indicator",""+ChartUtil.MOVING_BALANCE_INDICATOR,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","OBV[Midpoint]",""+ChartUtil.OBV_MIDPOINT,"jipyo","c");        addJipyoMenuItem("Indicator","OBV Oscillator",""+ChartUtil.OBV_OSC,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","OBV with Average Volume",""+ChartUtil.OBV_WITH_AVERAGE_VOLUME,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","PVT", "" + ChartUtil.PVT, "jipyo", "marketStrength");        addJipyoMenuItem("Indicator", "RCI", "" + ChartUtil.RCI, "jipyo", "marketStrength");        addJipyoMenuItem("Indicator","TRIN[Inverted]",""+ChartUtil.TRIN_INVERTED,"jipyo","marketStrength");        addJipyoMenuItem("Indicator","Volume & Price Accumulator",""+ChartUtil.VMP_ACC,"jipyo","marketStrength");//        //==================//        // 기타지표//        //==================//        addJipyoMenuItem("Indicator", "PVT", "" + ChartUtil.PVT, "jipyo", "other");//        addJipyoMenuItem("Indicator", "Reverse", "" + ChartUtil.REVERSE, "jipyo", "other");//        addJipyoMenuItem("Indicator","Bollinger Band [보조]",""+ChartUtil.BOLLINGER_2,"jipyo","other");        //==================        // 신호검색        //==================        addJipyoMenuItem("strategy", "이동평균 크로스 신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS, "strategy", "signal");        addJipyoMenuItem("strategy", "단순지수 크로스 신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSMA_EMA, "strategy", "signal");        addJipyoMenuItem("strategy", "단순가중 크로스 신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSMA_WMA, "strategy", "signal");        addJipyoMenuItem("strategy", "멀티 이평크로스 신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS_MULTI, "strategy", "signal");        addJipyoMenuItem("strategy", "MACD 크로스 신호", "" + ChartUtil.INDICATOR_MACDSIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "MAO 지수크로스 신호", "" + ChartUtil.INDICATOR_MAOBASELINE, "strategy", "signal");        addJipyoMenuItem("strategy", "PVI 크로스 신호", "" + ChartUtil.INDICATOR_PVISIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "Parabolic SAR 신호", "" + ChartUtil.INDICATOR_PARABOLICSIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "Stochastics 신호", "" + ChartUtil.INDICATOR_STOCHASTICSKD, "strategy", "signal");        addJipyoMenuItem("strategy", "ADXRStrategy신호", "" + ChartUtil.INDICATOR_ADXRSTRATEGY, "strategy", "signal");        addJipyoMenuItem("strategy", "CCIBaseLine신호", "" + ChartUtil.INDICATOR_CCIBASELINE, "strategy", "signal");        addJipyoMenuItem("strategy", "CCIOverSoldOverBought신호", "" + ChartUtil.INDICATOR_CCIOVERSOLDOVERBOUGHT, "strategy", "signal");        addJipyoMenuItem("strategy", "Disparity신호", "" + ChartUtil.INDICATOR_DISPARITYSIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "DMI신호", "" + ChartUtil.INDICATOR_DMISIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "GoldenDeadCrossEMA신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSEMA, "strategy", "signal");        //addJipyoMenuItem("strategy", "GoldenDeadCross신호", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS, "strategy", "signal");        addJipyoMenuItem("strategy", "MACDBaseLine신호", "" + ChartUtil.INDICATOR_MACDBASELINE, "strategy", "signal");        //addJipyoMenuItem("strategy", "Parabolic신호", "" + ChartUtil.INDICATOR_PARABOLICSIGNAL, "strategy", "signal");        addJipyoMenuItem("strategy", "SonarMomentum신호", "" + ChartUtil.INDICATOR_SONARMOMENTUM, "strategy", "signal");        addJipyoMenuItem("strategy", "SonarMomentumSignal신호", "" + ChartUtil.INDICATOR_SONARMOMENTUMSIGNAL, "strategy", "signal");        //addJipyoMenuItem("strategy", "StochasticsK_D신호", "" + ChartUtil.INDICATOR_STOCHASTICSKD, "strategy", "signal");        addJipyoMenuItem("strategy", "WilliamsR신호", "" + ChartUtil.INDICATOR_WILLIAMSR, "strategy", "signal");        //==================        // 캔들 강세/약세        //==================        addJipyoMenuItem("strategy", "이동평균 크로스 강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "단순지수 크로스 강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSMA_EMA_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "단순가중 크로스 강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSMA_WMA_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "멀티 이평크로스 강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS_MULTI_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "MACD 크로스 강세약세", "" + ChartUtil.INDICATOR_MACDSIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "MAO 지수크로스 강세약세", "" + ChartUtil.INDICATOR_MAOBASELINE_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "PVI 크로스 강세약세", "" + ChartUtil.INDICATOR_PVISIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "Parabolic SAR 강세약세", "" + ChartUtil.INDICATOR_PARABOLICSIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "Stochastics 강세약세", "" + ChartUtil.INDICATOR_STOCHASTICSKD_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "ADXRStrategy강세약세", "" + ChartUtil.INDICATOR_ADXRSTRATEGY_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "CCIBaseLine강세약세", "" + ChartUtil.INDICATOR_CCIBASELINE_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "CCIOverSoldOverBought강세약세", "" + ChartUtil.INDICATOR_CCIOVERSOLDOVERBOUGHT_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "Disparity강세약세", "" + ChartUtil.INDICATOR_DISPARITYSIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "DMI강세약세", "" + ChartUtil.INDICATOR_DMISIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "GoldenDeadCrossEMA강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSSEMA_SW, "strategy", "candle");        //addJipyoMenuItem("strategy", "GoldenDeadCross강세약세", "" + ChartUtil.INDICATOR_GOLDENDEADCROSS_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "MACDBaseLine강세약세", "" + ChartUtil.INDICATOR_MACDBASELINE_SW, "strategy", "candle");        //addJipyoMenuItem("strategy", "Parabolic강세약세", "" + ChartUtil.INDICATOR_PARABOLICSIGNAL_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "SonarMomentum강세약세", "" + ChartUtil.INDICATOR_SONARMOMENTUM_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "SonarMomentumSignal강세약세", "" + ChartUtil.INDICATOR_SONARMOMENTUMSIGNAL_SW, "strategy", "candle");        //addJipyoMenuItem("strategy", "StochasticsK_D강세약세", "" + ChartUtil.INDICATOR_STOCHASTICSKD_SW, "strategy", "candle");        addJipyoMenuItem("strategy", "WilliamsR강세약세", "" + ChartUtil.INDICATOR_WILLIAMSR_SW, "strategy", "candle");        return items;    }  //2015. 1. 13 - by lyk 동일지표 추가  	private static ArrayList<Vector<Hashtable<String, String>>> alItems = null;      public static ArrayList<Vector<Hashtable<String, String>>> getJipyoMenuArrayList() {      	if(alItems!=null && alItems.size()>0) return alItems;      	alItems = new ArrayList<Vector<Hashtable<String, String>>>();      	for(int i=0; i<items.size(); i++) {          	Vector<Hashtable<String, String>> vItem = new Vector();          	//리스트에 추가하지 않을 항목을 처리한다//          	if(items.get(i).get("name").equals("Parabolic SAR") ||//          			items.get(i).get("name").equals("대기매물") ||//          			items.get(i).get("name").equals("그물차트")) {          	if(items.get(i).get("detailType").equals("overlay") ||          			items.get(i).get("detailType").equals("other") ||          			items.get(i).get("name").equals("주가이동평균") ||          			items.get(i).get("name").equals("거래량") ||          			items.get(i).get("name").equals("거래량이동평균") ||          			items.get(i).get("name").equals("거래대금") ||          			items.get(i).get("name").equals("매수매도 거래량")) { //오버레이, 기타지표 타입은 제외          		continue;          	}          	vItem.add(items.get(i));          	//리스트에 추가하지 않을 항목을 처리한다          	alItems.add(vItem);      	}      	return alItems;      }      private static ArrayList<Vector<Hashtable<String, String>>> alItems2 = null;      public static ArrayList<Vector<Hashtable<String, String>>> getJipyoMenuArrayList2() {    	//2015. 1. 13 by lyk - 최초 앱 설치 후  동일지표 추가시 죽는 현상    	if(addItems==null)    		addItems = new Vector<Hashtable<String, String>>();    	//2015. 1. 13 by lyk - 최초 앱 설치 후  동일지표 추가시 죽는 현상 end      	if(alItems2==null)      		alItems2 = new ArrayList<Vector<Hashtable<String, String>>>();      	//2015. 2. 6 중복지표 체크했다가 풀고 지표추가하면 기존에 추가된 중복지표만큼 더 추가됨>>      	if(alItems2.size()>0)      	{      		alItems2.clear();      	}      	//2015. 2. 6 중복지표 체크했다가 풀고 지표추가하면 기존에 추가된 중복지표만큼 더 추가됨<<      	for(int i=0; i<addItems.size(); i++) {          	Vector vItem = new Vector();          	vItem.add(addItems.get(i));          	alItems2.add(vItem);      	}      	return alItems2;      }      //2015. 1. 13 - by lyk 동일지표 추가  end//    public static void makeAnalInfo() {//    	DoublePoint analDic;//		Vector datas = COMUtil._neoChart.analTools;//		String analInfoStr = "";//		if(datas!=null) {////			AnalTool at;//			DoublePoint analData[];//			for(int i=0; i<datas.size(); i++) {//				at = (AnalTool)datas.get(i);//				analData = at.data;//				String tmp = "title="+getEncodeData(at.getTitle())+"/"+"cnt="+analData.length+"/"+"location=";//				for(int k=0; k<analData.length; k++) {//					analDic = (DoublePoint)analData[k];//					String xVal = ""+analDic.x;//					String yVal = ""+analDic.y;////					//x값을 날짜로 변경.//					String[] xDatas = COMUtil._neoChart._cdm.getDatas(analDic.x);//					xVal = COMUtil.removeString(xDatas[0], "/"); // "/"제거.////					tmp += (xVal+":"+yVal+"-"); //log) 2011/03/22:864113-2011/04/28:925773//				}//				tmp += "|";//				analInfoStr += tmp;//			}//		}////    	StringTokenizer st = new StringTokenizer(analInfoStr, "|");//        Vector graphs=new Vector();//        String str="";//        String analTitle="";//        while (st.hasMoreTokens()) {//     	   Hashtable tmpDic = new Hashtable();//     	   Vector tmpItem = new Vector();//            str = st.nextToken();//            StringTokenizer datas2 = new StringTokenizer(str, "/");//            String item2="";//            int cnt=0;//            while (datas2.hasMoreTokens()) {//         	   item2 = datas2.nextToken();//         	   int nIndex = item2.indexOf("=");//         	   if(nIndex!=-1) {//         		   String xValue = "";//         		   String yValue = "";//         		   String key = new String(item2.substring(0, nIndex));//         		   if(key.equals("title")) {//         			   //분석툴 타입 설정.//         			   analTitle = new String(item2.substring(nIndex+1, item2.length()));//         		   } else if(key.equals("cnt")) {//         			   cnt =Integer.parseInt(new String(item2.substring(nIndex+1, item2.length())));//         		   } else if(key.equals("location")) {//         			   item2 = new String(item2.substring(nIndex+1, item2.length()));//         			   StringTokenizer datas3 = new StringTokenizer(item2, "-");//         			   while (datas3.hasMoreTokens()) {//         				   String item3 = datas3.nextToken();//         				   nIndex = item3.indexOf(":");//         				   if(nIndex==-1) break;//         				   else {//         					   xValue = new String(item3.substring(0, nIndex));//         					   yValue = new String(item3.substring(nIndex+1, item3.length()));//         				   }//         				   String[] itemDic = new String[2];//         				   itemDic[0]=xValue;//         				   itemDic[1]=yValue;//         				   tmpItem.add(itemDic);//         			   }////         			   tmpDic.put("title", getDecodeData(analTitle));//         			   tmpDic.put("location", tmpItem);//         			   graphs.add(tmpDic);//         		   }//         	   }//            }////        }//        if(graphs!=null && graphs.size()>0) {////        	COMUtil.analItem = graphs;//        	COMUtil._neoChart._cvm.analItem=graphs;//        }////    }    public static String getJipyoNameForTag(String tag) {        Vector<Hashtable<String, String>>  v = (Vector<Hashtable<String, String>>)COMUtil.getJipyoMenu().clone();        Vector<Hashtable<String, String>> addItems = COMUtil.getAddJipyoList();        for(int i=0; i<addItems.size(); i++) {            v.add(addItems.get(i));        }        int len = v.size();        for(int k=0; k<len; k++) {            Hashtable<String, String> item = (Hashtable<String, String>)v.get(k);            String cmp = (String)item.get("tag");            if(cmp.equals(tag)) {                return (String)item.get("name");            }        }        return "";    }    public static String getEncodeData(String str) {    	return str;//		String rtnStr="";//		try {//			rtnStr =  URLEncoder.encode(str,"utf-8");//		} catch(Exception e) {////		}//		return rtnStr;	}	public static String getDecodeData(String str) {		return str;//		String rtnStr="";//		try {//			rtnStr = URLDecoder.decode(str,"utf-8");//		} catch(Exception e) {////		}//		return rtnStr;	}	public static String getPeriod() {		String pstr="";		if(COMUtil.dataTypeName==null) COMUtil.dataTypeName="2";		String ptype = COMUtil.dataTypeName;		String unitType = COMUtil.unit;		if(ptype.equals("0")) {			pstr = "틱";		} else if(ptype.equals("2")) {			pstr = "일";		} else if(ptype.equals("3")) {			pstr = "주";		} else if(ptype.equals("4")) {			pstr = "월";		} else if(ptype.equals("5")) {			pstr = "년";		} else if(ptype.equals("1")) {			pstr = unitType+"분";		}		return pstr;	}	public static String getPeriod(String strDataTypeType, String unitType) {        String[] strTypes = strDataTypeType.split("/");        if(strTypes.length>0)            strDataTypeType = strTypes[0];        String[] unitTypes = unitType.split("/");        if(unitTypes.length>0)            unitType = unitTypes[0];		String pstr="";		if(strDataTypeType == null)			return "일";		String ptype = strDataTypeType;		if(ptype.equals("0")) {			pstr = unitType+"틱";		} else if(ptype.equals("2")) {			pstr = "일";		} else if(ptype.equals("3")) {			pstr = "주";		} else if(ptype.equals("4")) {			pstr = "월";		} else if(ptype.equals("5")) {			pstr = "년";		} else if(ptype.equals("1")) {			pstr = unitType+"분";		} else if(ptype.equals("6")) {			pstr = unitType+"초";		}		return pstr;	}	public static String stringFromData(byte[] data, int len) {		String rtnStr="";		try {			rtnStr = new String(data, 0, len, "ms949");		} catch(UnsupportedEncodingException e) {		}		return rtnStr;	}	public static String stringFromData(byte[] data, int offset, int len) {		String rtnStr="";		try {			rtnStr = new String(data, offset, len, "ms949");		} catch(UnsupportedEncodingException e) {		}		return rtnStr;	}	public static String getRandomString(int length)	{	  StringBuffer buffer = new StringBuffer();	  Random random = new Random();	  String chars[] =	    "a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z".split(",");	  for (int i=0 ; i<length ; i++)	  {	    buffer.append(chars[random.nextInt(chars.length)]);	  }	  return buffer.toString();	}	public static void closeAllState() {	    COMUtil.isSignalBtnState=!COMUtil.isSignalBtnState;	    COMUtil.isHistoryBtnState=!COMUtil.isHistoryBtnState;	    COMUtil.isPeriodBtnState=!COMUtil.isPeriodBtnState;	    COMUtil.isDivideBtnState=!COMUtil.isDivideBtnState;	    COMUtil.isCompareBtnState=!COMUtil.isCompareBtnState;	    COMUtil.isJipyoBtnState=!COMUtil.isJipyoBtnState;	    COMUtil.isSaveloadBtnState=!COMUtil.isSaveloadBtnState;	    COMUtil.isAnaltoolbarBtnState=!COMUtil.isAnaltoolbarBtnState;	}	//6.26 COMUtil.DETAIL_LAYOUT(상세지표) 추가	static String[] list = {COMUtil.SIGNAL_LAYOUT, COMUtil.HISTORY_LAYOUT, COMUtil.INDICATOR_LAYOUT , COMUtil.INDICATORVIEWDEFAULT_LAYOUT		, COMUtil.SAVELOAD_LAYOUT, COMUtil.PERIOD_LAYOUT, COMUtil.DIVIDE_LAYOUT, COMUtil.PERIODSETTING_LAYOUT, COMUtil.SETINQUIRYVIEW_LAYOUT, COMUtil.DETAIL_LAYOUT		//2012. 7. 23  기준선설정, 추세선설정  닫히도록 설정.		, COMUtil.CHART_AUTOTREND_LAYOUT, COMUtil.CHART_BASELINE_LAYOUT};	static boolean[] state = {COMUtil.isSignalBtnState, COMUtil.isHistoryBtnState, COMUtil.isJipyoBtnState, COMUtil.isJipyoBtnState,		COMUtil.isSaveloadBtnState, COMUtil.isPeriodBtnState, COMUtil.isDivideBtnState,false, COMUtil.isSetinquiryBtnState};	public static void setViewState(int index, boolean state) {		switch(index) {			case 0 :				COMUtil.isSignalBtnState = state;			break;			case 1 :				COMUtil.isHistoryBtnState = state;				COMUtil._chartMain.runOnUiThread(new Runnable() {	                public void run() {	    				Button imgButton = (Button)COMUtil._mainFrame.layout.findViewById(1010);	    				int layoutResId = COMUtil._chartMain.getResources().getIdentifier("m01", "drawable", COMUtil._chartMain.getPackageName());	    				imgButton.setBackgroundResource(layoutResId);	                }				});			break;			case 2 :				COMUtil.isJipyoBtnState = state;			break;			case 3 :				COMUtil.isJipyoBtnState = state;			break;			case 4 :				COMUtil.isSaveloadBtnState = state;			break;			case 5 :				COMUtil.isPeriodBtnState = state;			break;			case 6 :				COMUtil.isDivideBtnState = state;			break;			case 8 :				COMUtil.isSetinquiryBtnState = state;			break;		}	}    public static void closeAllView() {    	for(int i=0; i<list.length; i++) {    		final int m = i;    		if(COMUtil._mainFrame.layout==null) continue;			COMUtil._chartMain.runOnUiThread(new Runnable() {                public void run() {    	    		final LinearLayout closeRl = (LinearLayout)COMUtil._mainFrame.layout.findViewWithTag(list[m]);                	if(closeRl!=null) {	    				setViewState(m, false);	                	if(COMUtil._mainFrame.layout != null)	                	{	                		COMUtil._mainFrame.layout.removeView(closeRl);	                		COMUtil.unbindDrawables(closeRl);	                	}                	}                }			});    	}	    //System.gc();	    COMUtil._mainFrame.closePopup();    }	public static void unbindDrawables(View view) {		if(view==null) return;        if (view.getBackground() != null)        	view.getBackground().setCallback(null);        if (view instanceof ViewGroup) {            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {            COMUtil.unbindDrawables(((ViewGroup) view).getChildAt(i));            }            try{            	((ViewGroup) view).removeAllViews();            }catch(Exception e)            {            	return;            }        }    }	public static String getApcode(BaseChart pBaseChart) {		String rtnStr = "";		if(pBaseChart._cdm.codeItem.strRealKey.equals("SC0")) {			rtnStr = COMUtil.TR_CHART_FUTURE;//		} else if(pBaseChart._cdm.codeItem.strRealKey.equals("JS0")) {//			rtnStr = COMUtil.TR_CHART_UPJONG;		} else {			rtnStr= COMUtil.TR_CHART_STOCK;		}		return rtnStr;	}	public static String getDivideInfo() {    	// cnt / divideType / 종목동기화 / 기간동기화    	String strDivideInfo = "";    	Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;    	//if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {    	if(base.chartList.size()>1) {	    	String strCnt = ""+base.chartList.size();	    	String strDivideType = ""+base.nDivideType;	    	String strIsSyncJongmok = ""+base.m_bSyncJongMok;	    	String strIsSyncJugi = ""+base.m_bSyncJugi;	    	strDivideInfo = strCnt+"/"+strDivideType+"/"+strIsSyncJongmok+"/"+strIsSyncJugi;    	}    	return strDivideInfo;	}	public static String getMarketNameStr() {	    String strMarket= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strMarket = base._chart._cdm.codeItem.strMarket;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	//Vector<BaseChart> chartList = COMUtil.divideChartList;	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		//2013.10.04 by LYH >> 분할 상태에서 종목이 없는 경우 끝내지 않고 다음 종목 조회 가능하도록 개선	    		//strMarket += pBaseChart._cdm.codeItem.strMarket+"/";	    		if(pBaseChart._cdm.codeItem.strMarket.length()>0)	    			strMarket += pBaseChart._cdm.codeItem.strMarket+"/";	    		else	    			strMarket += "-/";	    		//2013.10.04 by LYH <<	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strSymbol = COMUtil.symbol;//	    }	    return strMarket;	}//	public static String getBaseLineStr() {//		String strConv = "";//		if(COMUtil.baseLineType!=null) {//			for(int type : COMUtil.baseLineType) {//				strConv += String.valueOf(type)+"=";//			}//		}////		return strConv;//	}	public static String getSymbolStr() {	    String strSymbol= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strSymbol = base._chart._cdm.codeItem.strCode;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	//Vector<BaseChart> chartList = COMUtil.divideChartList;	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		//2013.10.04 by LYH >> 분할 상태에서 종목이 없는 경우 끝내지 않고 다음 종목 조회 가능하도록 개선	    		//strSymbol += pBaseChart._cdm.codeItem.strCode+"/";	    		//2014. 3. 21 차트 종목명 저장하는 구분자 변경하기>>//	    		if(pBaseChart._cdm.codeItem.strCode.length()>0)////	    			strSymbol += pBaseChart._cdm.codeItem.strCode+"/";//	    		else//	    			strSymbol += "-/";	    		if(pBaseChart._cdm.codeItem.strCode.length()>0)	    			strSymbol += pBaseChart._cdm.codeItem.strCode+"~";	    		else	    			strSymbol += "-~";	    		//2014. 3. 21 차트 종목명 저장하는 구분자 변경하기<<	    		//2013.10.04 by LYH <<	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strSymbol = COMUtil.symbol;//	    }	    return strSymbol;	}	public static String getCodeNameStr() {	    String strCodeName= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strCodeName = base._chart._cdm.codeItem.strName;	    } else	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		//2014. 3. 21 차트 종목명 저장하는 구분자 변경하기>>	    		if(pBaseChart._cdm.codeItem.strName.length()>0)	    			strCodeName += pBaseChart._cdm.codeItem.strName+"~";	    		else	    			strCodeName += "-~";	    		//2014. 3. 21 차트 종목명 저장하는 구분자 변경하기<<	    	}	    }	    return strCodeName;	}	public static String getLCodeStr() {	    String strLCode= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strLCode = base._chart._cdm.codeItem.strRealKey;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		//2013.10.04 by LYH >> 분할 상태에서 종목이 없는 경우 끝내지 않고 다음 종목 조회 가능하도록 개선	    		//strLCode += pBaseChart._cdm.codeItem.strRealKey+"/";	    		if(pBaseChart._cdm.codeItem.strRealKey.length()>0)	    			strLCode += pBaseChart._cdm.codeItem.strRealKey+"/";	    		else	    			strLCode += "-/";	    		//2013.10.04 by LYH <<	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strLCode = COMUtil.lcode;//	    }	    return strLCode;	}	public static String getDataTypeName() {	    String strDataTypeName= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {	    	strDataTypeName = base.compareChart._cdm.codeItem.strDataType;	    	return strDataTypeName;	    }	    if(base.chartList.size()==1) {	    	strDataTypeName = base._chart._cdm.codeItem.strDataType;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		strDataTypeName += pBaseChart._cdm.codeItem.strDataType+"/";	    	}	    }	    return strDataTypeName;	}	public static String getCountStr() {	    String strCount= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strCount = ""+base._chart._cdm.getCount();	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		strCount += pBaseChart._cdm.getCount()+"/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strCount = ""+COMUtil.count;//	    }	    return strCount;	}	public static String getViewCountStr() {	    String strViewCount= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	if(base._chart._cvm.getViewNum()<5)	    		strViewCount = "40";	    	else	    		strViewCount = ""+base._chart._cvm.getViewNum();	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		if(pBaseChart._cvm.getViewNum()<5)	    			strViewCount += "40/";		    	else		    		strViewCount += pBaseChart._cvm.getViewNum()+"/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strViewCount = ""+COMUtil._neoChart._cvm.getViewNum();//	    }	    return strViewCount;	}	public static String getUnitStr() {	    String strUnit= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {	    	strUnit = base.compareChart._cdm.codeItem.strUnit;	    	return strUnit;	    }	    if(base.chartList.size()==1) {	    	strUnit = ""+base._chart._cdm.codeItem.strUnit;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		strUnit += pBaseChart._cdm.codeItem.strUnit+"/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strUnit = ""+COMUtil.unit;//	    }	    return strUnit;	}	/** 분설정값을 구성한다. **/	public static String getPeriodConfigStr() {	    String strPeriodItem= "";		String[] datas = COMUtil.periodMinConfigList;		if(datas!=null) {			int dataLen = datas.length;			for(int i=0; i<dataLen; i++) {				String tmp = datas[i]+"-";				strPeriodItem += tmp;			}		}	    return strPeriodItem;	}	//2013. 1. 16 분틱설정 값 저장	public static String getBunPeriodListStr() {	    String strPeriodItem= "";//		String[] datas = COMUtil.periodMinConfigList;//	    ArrayList<Hashtable<String, String>> datas = bunPeriodList;//		if(datas!=null) {//			int dataLen = datas.size();//			for(int i=0; i<dataLen; i++) {//				Hashtable item = datas.get(i);//				String tmp = (String)item.get("title")+"-";//				strPeriodItem += tmp;//				tmp = (String)item.get("checked")+"-";//				strPeriodItem += tmp;//			}//		}	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		//분데이터:분체크데이터#틱데이터:틱체크데이터    	for(int i = 0; i < 7; i++)    	{    		strPeriodItem += String.valueOf(base.astrMinData[i]) + "=";    		if(i<6)    		{    			strPeriodItem += String.valueOf(base.astrMinCheckData[i]) + "=";    		}    		else    		{    			strPeriodItem += String.valueOf(base.astrMinCheckData[i]);    		}    	}	    return strPeriodItem;	}	public static int[] setBunPeriodListStr(String strPeriodItem)	{		strPeriodItem = strPeriodItem.replaceAll(":", "=");		String[] strBunPeriod = strPeriodItem.split("=");//		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();		int[] result = new int[7];//		Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		int nRstCnt = 0;		for(int i = 0; i < strBunPeriod.length; i=i+2, nRstCnt++)		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strBunPeriod[i]);//			item.put("checked", strBunPeriod[i+1]);			try {				result[nRstCnt] = Integer.parseInt(strBunPeriod[i]);			} catch (Exception e) {//				result[nRstCnt] = 1;			}//			result[i+1] = Integer.parseInt(strBunPeriod[i+1]);//			result.add(item);		}		return result;	}	public static int[] setBunCheckPeriodListStr(String strPeriodItem)	{		String[] strBunPeriod = strPeriodItem.split("=");//		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();		int[] result = new int[7];//		Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		int nRstCnt = 0;		for(int i = 1; i < strBunPeriod.length; i=i+2, nRstCnt++)		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strBunPeriod[i]);//			item.put("checked", strBunPeriod[i+1]);			try {				result[nRstCnt] = Integer.parseInt(strBunPeriod[i]);			} catch(Exception e) {//				result[nRstCnt] = 1;			}//			result[i+1] = Integer.parseInt(strBunPeriod[i+1]);//			result.add(item);		}		return result;	}	public static int[] setTicPeriodListStr(String strPeriodItem)	{		strPeriodItem = strPeriodItem.replaceAll(":", "=");		String[] strTicPeriod = strPeriodItem.split("=");//		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();		int[] result = new int[7];//		for(int i = 0; i < strTicPeriod.length; i=i+2)//		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strTicPeriod[i]);//			item.put("checked", strTicPeriod[i+1]);////			result.add(item);//		}//		Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		int nRstCnt = 0;		for(int i = 0; i < strTicPeriod.length; i=i+2, nRstCnt++)		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strBunPeriod[i]);//			item.put("checked", strBunPeriod[i+1]);			try {				result[nRstCnt] = Integer.parseInt(strTicPeriod[i]);			} catch(Exception e) {//				result[nRstCnt] = 1;			}//			result[i+1] = Integer.parseInt(strBunPeriod[i+1]);//			result.add(item);		}		return result;	}	public static int[] setTicCheckPeriodListStr(String strPeriodItem)	{		String[] strTicPeriod = strPeriodItem.split("=");//		ArrayList<Hashtable<String, String>> result = new ArrayList<Hashtable<String, String>>();		int[] result = new int[7];//		for(int i = 0; i < strTicPeriod.length; i=i+2)//		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strTicPeriod[i]);//			item.put("checked", strTicPeriod[i+1]);////			result.add(item);//		}//		Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		int nRstCnt = 0;		for(int i = 1; i < strTicPeriod.length; i=i+2, nRstCnt++)		{//			Hashtable item = new Hashtable<String, String>();//			item.put("title", strBunPeriod[i]);//			item.put("checked", strBunPeriod[i+1]);			try {				result[nRstCnt] = Integer.parseInt(strTicPeriod[i]);			} catch(Exception e) {//				result[nRstCnt] = 1;			}//			result[i+1] = Integer.parseInt(strBunPeriod[i+1]);//			result.add(item);		}		return result;	}	public static String getTicPeriodListStr() {	    String strPeriodItem= "";//	    ArrayList<Hashtable<String, String>> datas = ticPeriodList;//		if(datas!=null) {//			int dataLen = datas.size();//			for(int i=0; i<dataLen; i++) {//				Hashtable item = datas.get(i);//				String tmp = (String)item.get("title")+"-";//				strPeriodItem += tmp;//				tmp = (String)item.get("checked")+"-";//				strPeriodItem += tmp;//			}//		}	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		//분데이터:분체크데이터#틱데이터:틱체크데이터    	for(int i = 0; i < 7; i++)    	{    		strPeriodItem += String.valueOf(base.astrTikData[i]) + "=";    		if(i<6)    		{    			strPeriodItem += String.valueOf(base.astrTikCheckData[i]) + "=";    		}    		else    		{    			strPeriodItem += String.valueOf(base.astrTikCheckData[i]);    		}    	}	    return strPeriodItem;	}	public static String getAnalInfoStr() {	    String strAnalInfoStr= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strAnalInfoStr = getAnalInfoStr(base._chart);	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		String tmp="";				tmp = getAnalInfoStr(pBaseChart);				strAnalInfoStr += tmp+"/=/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strAnalInfoStr = getAnalInfoStr(COMUtil._neoChart);//	    }	    return strAnalInfoStr;	}	//2015. 1. 13 by lyk 중복지표 추가/삭제 처리	public static String getAddJipyoListStr() {	    String strAddJipyoStr= "";	    Vector<Hashtable<String, String>> addItems = COMUtil.getAddJipyoList(); //type,name,tag,detailType	    Hashtable<String, String> item = null;	    for(int i=0; i<addItems.size(); i++) {	    	item = (Hashtable<String, String>)addItems.get(i);	    	Object[] arrays = item.keySet().toArray();	    	String[] keys = COMUtil.convertToString(arrays);	    	String itemStr = "";	    	for(int k=0; k<keys.length; k++) {	    		itemStr += keys[k]+"="+addItems.get(i).get(keys[k])+"/";	    	}	    	strAddJipyoStr += itemStr + "|";		}	    return strAddJipyoStr;	}	public static String[] convertToString(Object[] objectArray){       String[] strArray = new String[objectArray.length];       for (int i = 0; i < objectArray.length; i++)       {           strArray[i] = new String((String) objectArray[i]);       }       return strArray;	}	//2015. 1. 13 by lyk 중복지표 추가/삭제 처리 end//	//2013. 11. 21 추세선 종목별 저장>>//	public static String getAnalInfoStrBySymbol() {//	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;//	    return getAnalInfoStr(base._chart);//	}//	//2013. 11. 21 추세선 종목별 저장<<//	public static String getGraphListStr() {	    if(COMUtil._mainFrame.mainBase.baseP.getClass() == Base15.class)	        return "";	    String strGraphList= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {//			Vector datas = COMUtil._neoChart.getGraphList();	    	Vector<String> datas = base._chart.getGraphConfigList();	    	String item = "";			for(int i=0; i<datas.size(); i++) {//				String tmp = COMUtil.getEncodeData((String)datas.get(i))+"-";				item = "";				if(datas.get(i)!=null)					item = (String)datas.get(i);//					item = COMUtil.getEncodeData((String)datas.get(i));//				String tmp = item+"#";				String tmp = item+"~";	//2015. 9. 2 주기별차트 멀티차트시 구분자 변경 (음수값이 들어갈 경우 배열이 잘못 구성됨)				strGraphList += tmp;			}	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);//				Vector datas = COMUtil._neoChart.getGraphList();	    		Vector<String> datas = pBaseChart.getGraphConfigList();	    		String tmp="";	    		String item = "";				for(int k=0; k<datas.size(); k++) {					item = "";					if(datas.get(k)!=null)						item = (String)datas.get(k);//						item = COMUtil.getEncodeData((String)datas.get(k));//					tmp += COMUtil.getEncodeData((String)datas.get(k))+"-";//					tmp += item+"#";					tmp += item+"~";	//2015. 9. 2 주기별차트 멀티차트시 구분자 변경 (음수값이 들어갈 경우 배열이 잘못 구성됨)				}				strGraphList += tmp+"/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {////			Vector datas = COMUtil._neoChart.getGraphList();//	    	Vector<String> datas = COMUtil._neoChart.getGraphConfigList();//			for(int i=0; i<datas.size(); i++) {//				String tmp = COMUtil.getEncodeData((String)datas.get(i))+"-";//				strGraphList += tmp;//			}//	    }	    if(strGraphList==null)	    	strGraphList = "";	    return strGraphList;	}	//2015.04.07 by lyk - 주기별 차트 설정	public static String getPeriodSaveGraphListStr() {		//일(2),주(3),월(4),년(5),분(1),틱(0) 각 주기에 대한 설정값을 저장		Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;		String rtnValue = "";//		int[] dataTypes = {2,3,4,5,1,0};		//int[] dataTypes = {1, 2, 3, 4, 5, 8};        int[] dataTypes = {0, 1, 2, 3, 4, 5, 6};		if(base.chartList.size()==1) {			for(int i=0; i<dataTypes.length; i++) {				String itemStr = (String)COMUtil._mainFrame.loadPeriodSaveItem.get(COMUtil.getPeriodSaveKeyName()+dataTypes[i]+"_0");				if(itemStr!=null && !itemStr.equals("")) {					rtnValue += COMUtil.getPeriodSaveKeyName()+dataTypes[i] + "_0" + COMUtil.strPeriodConfigSaveGubun + itemStr + COMUtil.strPeriodConfigSaveGubun2;					//데이터구조:"periodKey@@@contents###"				}			}		} else {			Enumeration<String> enumStr = COMUtil._mainFrame.loadPeriodSaveItem.keys();		    do		    {		    	if(!enumStr.hasMoreElements()) {		    		break;		    	}		    	String key = enumStr.nextElement();		    	if(key.equals("")) {		    		continue;		    	}		    	try {			    	String itemStr = (String)COMUtil._mainFrame.loadPeriodSaveItem.get(key);			    	//key별로 저장			    	if(itemStr!=null && !itemStr.equals("")) {						rtnValue += key + COMUtil.strPeriodConfigSaveGubun + itemStr + COMUtil.strPeriodConfigSaveGubun2;						//데이터구조:"periodKey@@@contents###"					}		    	} catch (Exception e) {		    	}		    }while(enumStr.hasMoreElements());		}//		System.out.println("Debug_COMUtil_multi_periodGraphList:"+rtnValue);		return rtnValue;	}	public static String getPeriodSaveKeyName() {		return COMUtil._mainFrame.strFileName+"_"+COMUtil.strPeriodConfigSave_strKey;	}	//2015.04.07 by lyk - 주기별 차트 설정 end	public static String getApCodeStr() {	    String strApCode= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	strApCode = COMUtil.apCode;	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		strApCode += COMUtil.getApcode(pBaseChart)+"/";	    	}	    }//	    else if(COMUtil.chartMode == COMUtil.COMPARE_CHART) {//	    	strApCode = COMUtil.apCode;//	    }	    return strApCode;	}	public static String getAnalInfoStr(NeoChart2 chart) {		DoublePoint analDic;		Vector<AnalTool> datas = chart.analTools;		String analInfoStr = "";		if(datas!=null) {			AnalTool at;			DoublePoint analData[];			int dataLen = datas.size();			if(dataLen>10) { //10개 이상은 저장안됩니다.				//사용자 정의 저장일 경우에만 메시지 처리함.				String strLocalFileName = COMUtil._mainFrame.strLocalFileName;				if(COMUtil.isSaveLocalMode) {					COMUtil.showMessage(COMUtil._chartMain, "추세선은 10개까지만 저장됩니다.");				}				dataLen = 10;			}			for(int i=0; i<dataLen; i++) {				at = (AnalTool)datas.get(i);				analData = at.data;				//2015. 1. 13 by LYH >> 분석툴 수정기능 및 자석기능 추가//				String tmp = "title="+at.getTitle()+"/"+"cnt="+analData.length+"/"+"location=";//				String tmp = "title="+at.getTitle()+"/"+"cnt="+analData.length+"/"+"useprice="+(at.getUsePrice()?"1":"0")+"/"+"location=";                String strColor = at.getAtColor()[0]+":"+at.getAtColor()[1]+":"+at.getAtColor()[2]; //2016.12.19 - 분석툴 굵기,색상 추가				String tmp = "title="+at.getTitle()+"/"+"cnt="+analData.length+"/"+"useprice="+(at.getUsePrice()?"1":"0")+"/"+"color="+strColor+"/"+"lineThick="+at.getLineT()+"/"+"location=";  //2016.12.19 - 분석툴 굵기,색상 추가//				String tmp = "title="+COMUtil.getEncodeData(at.getTitle())+"/"+"cnt="+analData.length+"/"+"location=";				//2015. 1. 13 by LYH << 분석툴 수정기능 및 자석기능 추가				int analLen = analData.length;				for(int k=0; k<analLen; k++) {//					try {						analDic = (DoublePoint)analData[k];						String xVal="";						String yVal = "";						if(analDic!=null) {							xVal=String.format("%.0f", analDic.x);							yVal = ""+analDic.y;						}	//					//x값을 날짜로 변경.	//					String[] xDatas = COMUtil._neoChart._cdm.getDatas(analDic.x);	//					xVal = COMUtil.removeString(xDatas[0], "/"); // "/"제거.						tmp += (xVal+":"+yVal+"#"); //log) 2011/03/22:864113#2011/04/28:925773//					} catch (Exception e) {////					}				}				tmp += "|";				analInfoStr += tmp;			}		}		//log//		System.out.println("analInfoStr:"+analInfoStr);		return analInfoStr;	}	public static String getBaseLineStr() {	    String strConv= "";	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    if(base.chartList.size()==1) {	    	ChartViewModel _cvm = (ChartViewModel)COMUtil._mainFrame.mainBase.baseP._chart._cvm;	    	if(_cvm.baseLineType!=null) {	    		for(int type : _cvm.baseLineType) {	    			strConv += String.valueOf(type)+"=";	    		}	    	}	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {	    {	    	int cLen = base.chartList.size();	    	for(int i=0; i<cLen; i++) {	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);	    		ChartViewModel _cvm = (ChartViewModel)pBaseChart._cvm;	    		String tmp="";		    	if(_cvm.baseLineType!=null) {		    		for(int type : _cvm.baseLineType) {		    			tmp += String.valueOf(type)+"=";		    		}		    	}				strConv += tmp+"/";	    	}	    }	    return strConv;	}//	//2015.04.30 by lyk - 바(시고저종) 유형 추가//	public static String getBarTypeStr() {////	    String strConv= "";////	    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;//	    if(base.chartList.size()==1) {//	    	ChartViewModel _cvm = (ChartViewModel)COMUtil._mainFrame.mainBase.baseP._chart._cvm;//	    	//strConv = _cvm.bIsOHLCType;//	    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {//	    {//	    	int cLen = base.chartList.size();//	    	for(int i=0; i<cLen; i++) {//	    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);//	    		ChartViewModel _cvm = (ChartViewModel)pBaseChart._cvm;////				//strConv += _cvm.bIsOHLCType+"/";//	    	}//	    }////	    return strConv;//	}//	//2015.04.30 by lyk - 바(시고저종) 유형 추가 end	//2013. 10. 23 데이터 없이 흰화면일 때 실시간 받으면 봉 그리기 처리>>	public static String getSaveDate(String type) {		String rtnStr = "";		Date today = new Date();		SimpleDateFormat date = new SimpleDateFormat(type);		rtnStr = date.format(today);		return rtnStr;	}	//2013. 10. 23 데이터 없이 흰화면일 때 실시간 받으면 봉 그리기 처리<<	public static String getSaveDate() {		String rtnStr = "";		Date today = new Date();		SimpleDateFormat date = new SimpleDateFormat("yyyy.MM.dd");		rtnStr = date.format(today);		return rtnStr;	}	public static Vector<Hashtable<String, Object>> getAnalInfos(String str) {		   StringTokenizer st = new StringTokenizer(str, "\\|");           String analTitle="";           String strUsePrice = "";	//2015. 1. 13 by LYH >> 분석툴 수정기능 및 자석기능 추가        //2016.12.19 - 분석툴 굵기,색상 추가        String strColor = "";        String strLineThick = "";        //2016.12.19 - 분석툴 굵기,색상 추가 end           Vector<Hashtable<String, Object>> graphs=new Vector<Hashtable<String, Object>>();           while (st.hasMoreTokens()) {        	   Vector<String[]> tmpItem = new Vector<String[]>();               str = st.nextToken();               StringTokenizer datas2 = new StringTokenizer(str, "\\/");               String item2="";//               int cnt=0;               while (datas2.hasMoreTokens()) {            	   Hashtable<String, Object> tmpDic = new Hashtable<String, Object>();            	   item2 = datas2.nextToken();            	   int nIndex = item2.indexOf("=");            	   if(nIndex!=-1) {            		   String xValue = "";            		   String yValue = "";            		   String key = item2.substring(0, nIndex);            		   if(key.equals("title")) {            			   //분석툴 타입 설정.            			   analTitle = item2.substring(nIndex+1, item2.length());            		   } else if(key.equals("cnt")) {//            			   cnt =Integer.parseInt(item2.substring(nIndex+1, item2.length()));               			//2015. 1. 13 by LYH >> 분석툴 수정기능 및 자석기능 추가            		   } else if (key.equals("useprice")) {       					//해당 분석툴의 로케이션 정보 설정.            			   strUsePrice = item2.substring(nIndex+1, item2.length());            			//2015. 1. 13 by LYH << 분석툴 수정기능 및 자석기능 추가                       // 2016.12.19 - 분석툴 굵기,색상 추가                       } else if (key.equals("color")) {                           strColor = item2.substring(nIndex+1, item2.length());                       } else if (key.equals("lineThick")) {                           //해당 분석툴의 로케이션 정보 설정.                           strLineThick = item2.substring(nIndex+1, item2.length());                       //2016.12.19 - 분석툴 굵기,색상 추가 end            		   } else if(key.equals("location")) {            			   item2 = item2.substring(nIndex+1, item2.length());            			   StringTokenizer datas3 = new StringTokenizer(item2, "#");            			   while (datas3.hasMoreTokens()) {            				   String item3 = datas3.nextToken();            				   nIndex = item3.indexOf(":");            				   if(nIndex==-1) break;            				   else {            					   xValue = item3.substring(0, nIndex);            					   yValue = item3.substring(nIndex+1, item3.length());            				   }            				   String[] itemDic = new String[2];            				   itemDic[0]=xValue;            				   itemDic[1]=yValue;            				   tmpItem.add(itemDic);            			   }//            			   tmpDic.put("title", COMUtil.getDecodeData(analTitle));            			   tmpDic.put("title", analTitle);            			   tmpDic.put("location", tmpItem);            			   tmpDic.put("useprice", strUsePrice);	//2015. 1. 13 by LYH >> 분석툴 수정기능 및 자석기능 추가                           //2016.12.19 - 분석툴 굵기,색상 추가                           tmpDic.put("color", strColor);                           tmpDic.put("lineThick", strLineThick);                           //2016.12.19 - 분석툴 굵기,색상 추가 end            			   graphs.add(tmpDic);            		   }            	   }               }           }           return graphs;	}	//2015. 1. 13 by lyk 중복지표 추가/삭제 처리	public static Vector<Hashtable<String, String>> getAddJipyoList(String str) {		StringTokenizer st = new StringTokenizer(str, "\\|");        String analTitle="";        Vector<Hashtable<String, String>> items=new Vector<Hashtable<String, String>>();        while (st.hasMoreTokens()) {     	   Vector<String[]> tmpItem = new Vector<String[]>();            str = st.nextToken();            StringTokenizer datas2 = new StringTokenizer(str, "\\/");            String item2="";            Hashtable<String, String> tmpDic = new Hashtable<String, String>();            while (datas2.hasMoreTokens()) {         	   item2 = datas2.nextToken();         	   int nIndex = item2.indexOf("=");         	   if(nIndex!=-1) {         		   String key = item2.substring(0, nIndex);         		   String value = item2.substring(nIndex+1, item2.length());         		   tmpDic.put(key, value);         	   }            }            items.add(tmpDic);        }        return items;	}	//2015. 1. 13 by lyk 중복지표 추가/삭제 처리 end	/* 기준선 설정 저장 */	public static void saveGijunState(String name) {		if(name.equals("gijunChartSetting")) {			GijunSaveDBHelper gijunDBHelper = null;			SQLiteDatabase dbGijun = null;			Cursor cursorGijun = null;			String tableName = COMUtil._mainFrame.strGijunFileName; //ex)stock_gijunChartSetting			if(tableName == null)				return;			try {				gijunDBHelper = new GijunSaveDBHelper(_chartMain, tableName);				dbGijun = gijunDBHelper.getWritableDatabase();				cursorGijun = dbGijun.rawQuery("SELECT * FROM "+tableName, null);//				int curCnt = cursorGijun.getCount();				if(cursorGijun.getCount()<0) {					dbGijun.execSQL("DROP TABLE IF EXISTS "+tableName);					gijunDBHelper.onCreate(dbGijun);				}//				System.out.println("DEBUG_GIJUN_saveLastGijun:"+COMUtil.getBaseLineStr()+"===="+tableName);				dbGijun.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");				dbGijun.execSQL("INSERT INTO "+tableName+" VALUES (null, " +						" '"+COMUtil.getBaseLineStr()+"#"+COMUtil.getAutoWaveLineStr()+"'" + //2019. 08. 21 by hyh - 자동추세선 복원								");");				dbGijun.close();				gijunDBHelper.close();				cursorGijun.close();			} catch (Exception e) {				dbGijun.close();				gijunDBHelper.close();				cursorGijun.close();			}			return;		}	}	/* 최근 상태를 저장한다. */	public static void saveLastState(String tableName) {	    if(tableName == null)	        return;		//비교차트 저장		if(COMUtil.chartMode==COMUtil.COMPARE_CHART)		{	        if(tableName.equals("compare")) {				CompareChartLastsaveDBHelper mHelperCompare=null;				SQLiteDatabase dbCompare = null;				Cursor cursorCompare = null;				try {					mHelperCompare = new CompareChartLastsaveDBHelper(_chartMain, tableName);					dbCompare = mHelperCompare.getWritableDatabase();					cursorCompare = dbCompare.rawQuery("SELECT * FROM "+tableName, null);	//				int curCnt = cursorCompare.getCount();					if(cursorCompare.getCount()<0) {						dbCompare.execSQL("DROP TABLE IF EXISTS "+tableName);						mHelperCompare.onCreate(dbCompare);					}					dbCompare.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");					dbCompare.execSQL("INSERT INTO "+tableName+" VALUES (null, " +							" '"+COMUtil.strCompData+"'," +							" '"+COMUtil.dataTypeName+"'," +							" '"+COMUtil.unit+"'" +									");");					cursorCompare.close();					mHelperCompare.close();					dbCompare.close();				} catch (Exception e) {					try					{						cursorCompare.close();						mHelperCompare.close();						dbCompare.close();					}catch(Exception e2)					{					}				}			}			return;		}		//편의기능 저장		if(tableName!=null && tableName.equals("combChartSetting")) {			ConveniencesSaveDBHelper convenienceDBHelper=null;			SQLiteDatabase dbConvenience = null;			Cursor cursorConvenience = null;			try			{				convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);				dbConvenience = convenienceDBHelper.getWritableDatabase();				cursorConvenience = dbConvenience.rawQuery("SELECT * FROM "+tableName, null);	//			int curCnt = cursorConvenience.getCount();				if(cursorConvenience.getCount()<0) {					dbConvenience.execSQL("DROP TABLE IF EXISTS "+tableName);					convenienceDBHelper.onCreate(dbConvenience);				}	            //2016. 1. 11 종가 등락률 옵션처리 (bIsyJonggaCurrentPrice 추가), 2016.09.08 by LYH >> 오른쪽 여백 설정 기능(g_nPaddingRight), 2017.05.23 by PJM 사진줌방식(bIsZoomCenterView)	            String strConv = COMUtil.getCommonInfoStr();				//2013. 9. 3 도구설정 저장/불러오기>>				String strAnalTool = "";				//분석툴바의 아이디를 String 으로  만든다      ex) 1234/5678/.....				for(int i = 0; i < arrToolbarIndex.length; i++)				{					strAnalTool += String.valueOf(arrToolbarIndex[i])+"/";				}				//맨마지막에도  슬래쉬(/) 가 추가되어 있어서 그것을 제거.				strAnalTool = strAnalTool.substring(0, strAnalTool.length()-1);				//2014.05.16 by LYH >> 선택한 툴 버튼만 추가.				//툴바 순서와 체크 옵션의 구분자는 (:)				strAnalTool += ":";				for(int i = 0; i < arrToolbarSelected.length; i++)				{					strAnalTool += String.valueOf(arrToolbarSelected[i])+"/";				}				//맨마지막에도  슬래쉬(/) 가 추가되어 있어서 그것을 제거.				strAnalTool = strAnalTool.substring(0, strAnalTool.length()-1);				//2014.05.16 by LYH <<				dbConvenience.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");				dbConvenience.execSQL("INSERT INTO "+tableName+" VALUES (null, " +						" '"+strConv+"'," +						" '"+strAnalTool+"'"  +								");");				//2013. 9. 3 도구설정 저장/불러오기>>				dbConvenience.close();				convenienceDBHelper.close();				cursorConvenience.close();			}catch(Exception e)			{				try				{					dbConvenience.close();					convenienceDBHelper.close();					cursorConvenience.close();				}catch(Exception e2)				{				}			}			return;		}		//기준선 설정 저장		int index = tableName.indexOf("gijunChartSetting");		if(index >= 0) {			return;		}//			GijunSaveDBHelper gijunDBHelper = null;//			SQLiteDatabase dbGijun = null;//			Cursor cursorGijun = null;//			try {//				gijunDBHelper = new GijunSaveDBHelper(_chartMain, tableName);//				dbGijun = gijunDBHelper.getWritableDatabase();////				cursorGijun = dbGijun.rawQuery("SELECT * FROM "+tableName, null);//				int curCnt = cursorGijun.getCount();//				if(cursorGijun.getCount()<0) {//					dbGijun.execSQL("DROP TABLE IF EXISTS "+tableName);//					gijunDBHelper.onCreate(dbGijun);//				}////	//			String strConv = ""+COMUtil.bIsyScaleShow+"/"+COMUtil.bIsAdjustedStock+"/"+COMUtil.bIsMinMaxShow+"/"+COMUtil.isSetScreenViewPanel;//////				String strConv = "";////				ChartViewModel _cvm = (ChartViewModel)COMUtil._mainFrame.mainBase.baseP._chart._cvm;////				if(_cvm.baseLineType!=null) {////					for(int type : _cvm.baseLineType) {////						strConv += String.valueOf(type)+"=";////					}////				}//////				System.out.println("DEBUG_GIJUN_saveLastGijun:"+COMUtil.getBaseLineStr());////				dbGijun.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");//				dbGijun.execSQL("INSERT INTO "+tableName+" VALUES (null, " +//						" '"+COMUtil.getBaseLineStr()+"'" +//								");");//				dbGijun.close();//				gijunDBHelper.close();//				cursorGijun.close();//			} catch (Exception e) {//				dbGijun.close();//				gijunDBHelper.close();//				cursorGijun.close();//			}////			return;//		}		//2015. 1. 13 by lyk 중복지표 추가/삭제 처리//		COMUtil.saveAddJipyoList(COMUtil._mainFrame.strFileName);		//2015. 1. 13 by lyk 중복지표 추가/삭제 처리 end//		if(mHelper==null) {	        //SQL DB 설정.		ChartLastsaveDBHelper mHelper=null;		SQLiteDatabase db = null;		Cursor cursor = null;		try {	        mHelper = new ChartLastsaveDBHelper(_chartMain, tableName);	        db = mHelper.getWritableDatabase();//		}			cursor = db.rawQuery("SELECT * FROM "+tableName, null);		} catch(Exception e) {            if(mHelper != null) {                mHelper.close();            }            if(db != null) {                db.close();            }            if(cursor != null) {                cursor.close();            }			return;		}		try		{			String userIp = COMUtil.userIp;			if(userIp==null) userIp = "";	    	//차트 정보를 저장한다.			Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	    	int chartMode=0;	    	if(base.chartList.size()>1)	    		chartMode = COMUtil.DIVIDE_CHART;	    	else	    		chartMode = COMUtil.BASIC_CHART;	//    	//2015. 3. 4 차트 테마 메인따라가기 추가>>	//		int nSaveSkinType = COMUtil.SKIN_AUTO_THEME;	//		if(!COMUtil.bIsAutoTheme) {	//			nSaveSkinType = base._chart._cvm.nSkinType;	//    	}	//    	//2015. 3. 4 차트 테마 메인따라가기 추가<<			//2015.04.20 by lyk - 주기별 차트 설정 (주기별 설정이 아닌 경우 처리)			String sGraphList = COMUtil.getGraphListStr();			if(cursor.getCount()>0) {				cursor.moveToFirst();				if(COMUtil._mainFrame.bIsPeriodConfigSave) {					sGraphList = cursor.getString(17);				}			}			//2015.04.20 by lyk - 주기별 차트 설정 (주기별 설정이 아닌 경우 처리) end			//2015.05.26 by lyk - 주기별 차트 설정 저장(마지막 상태 저장시 실행)			COMUtil.setSavePeriodChartSave();			int data9 = COMUtil._mainFrame.bIsPeriodConfigSave?1:0;	//2015.04.16 by lyk - 주기별 차트 설정			//2015.05.26 by lyk - 주기별 차트 설정 저장(마지막 상태 저장시 실행) end			db.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");			db.execSQL("INSERT INTO "+tableName+" VALUES (null, " +					" '"+COMUtil.getDivideInfo()+"'," +					" '"+data9+COMUtil.strPeriodConfigTableGubun+COMUtil.getPeriodSaveGraphListStr()+"'," + //(2)//2015.04.08 by lyk - 주기별 차트 설정	//				" '"+COMUtil.verInfo+"'," +					" '"+COMUtil.getSaveDate()+"'," +                    " '"+COMUtil.getChartSizeInfo()+"'," +    //" '"+COMUtil.userId+"'," +  //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장					" '"+COMUtil.getAddJipyoListStr()+"'," + //2015. 1. 13 by lyk 중복지표 추가/삭제 처리 (//				" '"+userIp+"'," +)					" '"+COMUtil.codeName+"'," +					" '"+COMUtil.title+"'," +					" '"+COMUtil.detail+"'," +					" '"+""+"'," +					" '"+COMUtil.getSymbolStr()+"'," +					" '"+COMUtil.getLCodeStr()+"'," +					" '"+COMUtil.getApCodeStr()+"'," +					" '"+COMUtil.getDataTypeName()+"'," +					" '"+COMUtil.getCountStr()+"'," +//count					" '"+COMUtil.getViewCountStr()+"'," +//viewcount					" '"+COMUtil.getUnitStr()+"'," +  //valufOfMin	//				" '"+COMUtil.getGraphListStr()+"'," + //graphlist					" '"+sGraphList+"'," + //graphlist							//2015.04.20 by lyk - 주기별 차트 설정 (주기별 설정이 아닌 경우 처리)					" '"+COMUtil.getPeriodConfigStr()+"'," + //periodConfig					" '"+COMUtil.getAnalInfoStr()+"'," + //analinfo	//				" '"+chartMode+"/"+COMUtil._mainFrame.mainBase.baseP._chart._cvm.nSkinType+"'," + //chartMode/skinType					//" '"+chartMode+"/"+nSaveSkinType+"'," + //chartMode/skinType	 //2015. 3. 4 차트 테마 메인따라가기 추가	                " '"+chartMode+"/"+COMUtil.getSkinType()+"'," + //chartMode/skinType	 //2015. 3. 4 차트 테마 메인따라가기 추가					" '"+COMUtil._mainFrame.mainBase.baseP.nMarketType+"'," + //marketType					" '"+COMUtil.getBunPeriodListStr()+"'," + //분 주기 데이터					" '"+COMUtil.getTicPeriodListStr()+"'," + //틱 주기 데이터					" '"+COMUtil.getMarketNameStr()+"'," + //marketName(stock,elw. etc)					" '"+""+"'," +    //사용안함. 	saveTitleName                    " '"+""+"'," + //listNo(hts)설정안함 													 26                    " '"+COMUtil.getBaseLineStr()+"#"+COMUtil.getAutoWaveLineStr()+"'," + //baseline				 27 //2019. 08. 21 by hyh - 자동추세선 복원                    " '"+COMUtil.getCommonInfoStr()+"'," +    //commonInfo.										     28                    " '"+COMUtil.getFxMarginTypes()+"'," +    //fxMarginTypes.										 29                    " '"+COMUtil.getConnTypes()+"'," +        //connTypes.											 30                    " '"+COMUtil.getDayTypes()+"'," +         //dayTypes.											 31                    " '"+COMUtil.getFloorTypes()+"'," +        //floorTypes.                    " '"+COMUtil.isSaveJongmok+"'" +       //2021.02.03 by HJW - 차트저장 종목저장 여부 추가											 32					");");			cursor.close();			mHelper.close();			db.close();		}catch(Exception e)		{			try			{				cursor.close();				mHelper.close();				db.close();			}catch(Exception e2)			{			}		}        //2023.11.27 by lyk - kakaopay - 외부 설정값 저장소 별도 구성(추가수정) >>        try {            SharedPreferences sharedPref = null;            if (tableName.equals("stock")) {                sharedPref = COMUtil._chartMain.getPreferences(Context.MODE_PRIVATE);            } else if (!tableName.equals("")) {                sharedPref = COMUtil._chartMain.getSharedPreferences(tableName, Context.MODE_PRIVATE);            } else {                sharedPref = COMUtil._chartMain.getPreferences(Context.MODE_PRIVATE);            }            SharedPreferences.Editor editor = sharedPref.edit();            editor.putBoolean(COMUtil._chartMain.getString(R.string.avgBuyPriceFunc), COMUtil._neoChart._cvm.isAvgBuyPriceFunc);            editor.putBoolean(COMUtil._chartMain.getString(R.string.buySellPriceFunc), COMUtil._neoChart._cvm.isBuySellPriceFunc);            editor.putBoolean(COMUtil._chartMain.getString(R.string.corporateCalendarFunc), COMUtil._neoChart._cvm.isCorporateCalendarFunc);            editor.putBoolean(COMUtil._chartMain.getString(R.string.supportResistanceLine), COMUtil._neoChart._cvm.isSupportResistanceLine);            editor.putBoolean(COMUtil._chartMain.getString(R.string.autoTrendWaveLine), COMUtil._neoChart._cvm.isAutoTrendWaveLine);            editor.putBoolean(COMUtil._chartMain.getString(R.string.movingAverageLine), COMUtil._neoChart._cvm.isMovingAverageLine); //2023.11.20 by lky - 카카오페이 - 이동평균선 메뉴 설정값 저장            Log.d("kfits","saveLastState's isMovingAverageLine: "+COMUtil._neoChart._cvm.isMovingAverageLine);            editor.commit();        } catch(Exception e) {            return;        }        //2023.11.27 by lyk - kakaopay - 외부 설정값 저장소 별도 구성(추가수정) <<//		System.out.println("DEBUG_COMUtil_setLastState():");	}	/* 최근 상태 값을 읽어 복원한다. */	public static boolean setLastSaveState(String tableName) {		//비교차트 복원        if(COMUtil.chartMode==COMUtil.COMPARE_CHART) {        	if(tableName.equals("compare")) {	            try {	                CompareChartLastsaveDBHelper mHelperCompare = new CompareChartLastsaveDBHelper(_chartMain, tableName);	                SQLiteDatabase dbCompare = mHelperCompare.getReadableDatabase();	                Cursor cursorCompare = dbCompare.rawQuery("SELECT * FROM "+tableName, null);	                int curCnt = cursorCompare.getCount();	                if(!cursorCompare.moveToPosition(0)) {	                    cursorCompare.close();	                    mHelperCompare.close();	                    dbCompare.close();	                    return false;	                }	                String strCompData="", compareDataTypeName="", compareUnit="";	                if(!cursorCompare.getString(1).equals("null"))	                	strCompData=cursorCompare.getString(1);	                compareDataTypeName=cursorCompare.getString(2);	                compareUnit=cursorCompare.getString(3);	                //dataTypeName	                //valueOfMin	                //				System.out.println("strCompare:"+COMUtil.strCompData);	                //			}	                COMUtil.strCompData=strCompData;	                COMUtil.compareDataTypeName=compareDataTypeName;	                COMUtil.compareUnit=compareUnit;	                cursorCompare.close();	                mHelperCompare.close();	                dbCompare.close();	                _mainFrame.setStorageCompareData(COMUtil.strCompData);	                Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;	                Hashtable<String, Object> dic = new Hashtable<String, Object>();	                //    		dic.put("type", data);	                dic.put("code", base.compareChart.getCode(0));	                dic.put("name", base.compareChart.getName(0));	                dic.put("market",base.compareChart.getMarket(0));	                dic.put("period", COMUtil.compareDataTypeName);	                dic.put("unit", COMUtil.compareUnit);	                if(_mainFrame.userProtocol!=null) _mainFrame.userProtocol.requestInfo(COMUtil._TAG_SET_COMPARECHART,dic);	            } catch(Exception e) {	                return false;	            }        	}            return true;        }		//2013. 11. 21 추세선 종목별 저장>>		//종목별 분석툴바 그리기 정보를 저장할 Preference 초기화. singleton		if(null == COMUtil.analPref)		{			//차트 화면별로 저장하기 위해서 analToolBySymbol_저장파일명  으로 preference 명을 정한다.//			COMUtil.analPref = COMUtil._chartMain.getSharedPreferences("analToolBySymbol_"+tableName, Activity.MODE_PRIVATE);            COMUtil.analPref = COMUtil._chartMain.getSharedPreferences("analToolBySymbol_local", Activity.MODE_PRIVATE);			COMUtil.analPrefEditor = COMUtil.analPref.edit();            COMUtil.indicatorPref = COMUtil._chartMain.getSharedPreferences("analToolBySymbol_local", Activity.MODE_PRIVATE);            COMUtil.indicatorPrefEditor = COMUtil.indicatorPref.edit();		}		//2013. 11. 21 추세선 종목별 저장<<		boolean bool=false;		int index = tableName.indexOf("gijunChartSetting");		//비교차트 복원		if(COMUtil.chartMode==COMUtil.COMPARE_CHART) {			if(tableName.equals("combChartSetting") || index>=0)				return false;			CompareChartLastsaveDBHelper mHelperCompare = new CompareChartLastsaveDBHelper(_chartMain, tableName);			SQLiteDatabase dbCompare = mHelperCompare.getReadableDatabase();			Cursor cursorCompare = dbCompare.rawQuery("SELECT * FROM "+tableName, null);			int curCnt = cursorCompare.getCount();			if(!cursorCompare.moveToPosition(0)) {				cursorCompare.close();				mHelperCompare.close();				dbCompare.close();				return false;			}			//  //  통합 -> 비교//			if(COMUtil.linkedChart) {//				COMUtil.strCompData = combineMultiWithCompare(cursorCompare);//			} else {				COMUtil.strCompData=cursorCompare.getString(1);				COMUtil.compareDataTypeName=cursorCompare.getString(2);				COMUtil.compareUnit=cursorCompare.getString(3);				//dataTypeName				//valueOfMin//				System.out.println("strCompare:"+COMUtil.strCompData);//			}			cursorCompare.close();			mHelperCompare.close();			dbCompare.close();			Hashtable<String, Object> dic = new Hashtable<String, Object>();    		dic.put("comparedata", COMUtil.strCompData);//    		dic.put("symbol", COMUtil.symbol);//    		dic.put("name", COMUtil.codeName);//    		dic.put("market", COMUtil.market);    		dic.put("period", COMUtil.compareDataTypeName);    		dic.put("unit", COMUtil.compareUnit);			if(_mainFrame.userProtocol!=null) _mainFrame.userProtocol.requestInfo(COMUtil._TAG_STORAGE_TYPE, dic);			return true;		}        // 페이증권 미사용 기능으로 주석 처리		//편의기능 복원//		if(tableName.equals("combChartSetting")) {//			ConveniencesSaveDBHelper convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);//			SQLiteDatabase dbConvenience = convenienceDBHelper.getReadableDatabase();////			Cursor cursorConvenience = dbConvenience.rawQuery("SELECT * FROM "+tableName, null);//			if(!cursorConvenience.moveToPosition(0)) {//				cursorConvenience.close();//				convenienceDBHelper.close();//				dbConvenience.close();//				return false;//			}////			String strConv = cursorConvenience.getString(1);//			String[] arrConv = strConv.split("/");//			//2013. 1. 22 차트설정 - 일반설정   체크박스 및 라디오버튼 플래그 세팅//			if(arrConv[0].equals("1"))//				_mainFrame.bIsAdjustedStock = true;//			else//                _mainFrame.bIsAdjustedStock = false;////			if(arrConv[1].equals("1"))//                _mainFrame.bIsyScaleShow = true;//			else//                _mainFrame.bIsyScaleShow = false;////			if(arrConv[2].equals("1"))//                _mainFrame.bIsyJonggaShow = true;//			else//                _mainFrame.bIsyJonggaShow = false;////			if(arrConv[3].equals("1"))//                _mainFrame.bIsMinMaxShow = true;//			else//                _mainFrame.bIsMinMaxShow = false;////			if(arrConv[4].equals("1"))//                _mainFrame.bIsSetScreenViewPanel = true;//			else//                _mainFrame.bIsSetScreenViewPanel = false;////			//2013. 9. 3 추세선 그렸을 때 수치 가시성 여부 설정하는 것 기본환경에 추가>>//			if(arrConv[5].equals("1"))//                _mainFrame.bIsChuseLineValueTextShow = true;//			else//                _mainFrame.bIsChuseLineValueTextShow = false;//			//2013. 9. 3 추세선 그렸을 때 수치 가시성 여부 설정하는 것 기본환경에 추가>>////			//2013. 9. 3 분틱 날짜구분선 보이기 여부 처리>>//            if(arrConv.length >= 7)//            {//                if(arrConv[6].equals("1"))//                    _mainFrame.bIsDayDivisionLineShow = true;//                else//                    _mainFrame.bIsDayDivisionLineShow = false;//            }//			//2013. 9. 3 분틱 날짜구분선 보이기 여부 처리>>////            if(arrConv.length >= 8)//            {//                if(arrConv[7].equals("1"))//                    _mainFrame.bIsBongCntShow = true;//                else//                    _mainFrame.bIsBongCntShow = false;//            }////            if(arrConv.length >= 9)//            {//                if(arrConv[8].equals("1"))//                    _mainFrame.bIsyJonggaCurrentPrice = true;//                else//                    _mainFrame.bIsyJonggaCurrentPrice = false;//            }//            //2016.09.08 by LYH >> 오른쪽 여백 설정 기능//            if(arrConv.length >= 11)//            {//                if(arrConv[9].equals("1"))//                    _mainFrame.bIsUsePaddingRight = true;//                else//                    _mainFrame.bIsUsePaddingRight = false;//                if(arrConv[10].length()>0) {//                    try {//                        _mainFrame.g_nPaddingRight = Integer.parseInt(arrConv[10]);//                    }catch(Exception e){}//                }//            }//////            if(arrConv.length >= 13) {//                if (arrConv[11].equals("1"))//                    _mainFrame.bIsPeriodConfigSave = true;//                else//                    _mainFrame.bIsPeriodConfigSave = false;////                try {//                    int skinType = Integer.parseInt(arrConv[12]);////				//2015. 3. 4 차트 테마 메인따라가기 추가>>////					COMUtil.skinType = skinType;//                    if(skinType == COMUtil.SKIN_AUTO_THEME) {//                        COMUtil.bIsAutoTheme = true;//                        setSkinType(COMUtil.currentTheme);//                    } else {//                        COMUtil.bIsAutoTheme = false;//                        setSkinType(skinType);//                    }////				//2015. 3. 4 차트 테마 메인따라가기 추가<<////                }catch(Exception e){}//            }////            //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 >>//            if(arrConv.length >= 14) //2017.05.23 by PJM 사진줌방식, 폰트크기, 수치조회창 폰트크기 추가//            {//                if(arrConv[13].equals("1"))//                    _mainFrame.bIsZoomCenterView = true;//                else//                    _mainFrame.bIsZoomCenterView = false;////                if(arrConv[14].length()>0) {//                    try {//                        //_mainFrame.g_nFontSizeBtn = Integer.parseInt(arrConv[14]);//                        setFontSizeBtn(Integer.parseInt(arrConv[14]));//                    }catch(Exception e){}//                }////                if(arrConv[15].length()>0) {//                    try {//                        setVPFontSizeBtn(Integer.parseInt(arrConv[15]));//                    }catch(Exception e){}//                }//            }//            //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 <<////            //2017.09.13 by pjm 한국시간 추가 >>//            if(arrConv.length >= 17)//            {//                if(arrConv[16].length()>0)  {//                    try{//                        if(arrConv[16].equals("1"))//                            _mainFrame.bIsKoreanTime = true;//                        else//                            _mainFrame.bIsKoreanTime = false;//                    }catch (Exception e){}//                }//            }//            //2017.09.13 by pjm 한국시간 추가 <<////            //2020.03.26 차트 최대/최소 표시 설정 추가 - hjw >>//            if(arrConv.length >= 18)//            {//                if(arrConv[17].length()>0)  {//                    try{//                        if(arrConv[17].equals("1"))//                            _mainFrame.bIsHighLowShow = true;//                        else//                            _mainFrame.bIsHighLowShow = false;//                    }catch (Exception e){}//                }//            }//            //2020.03.26 차트 최대/최소 표시 설정 추가 - hjw <<////            //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw >>//            if (arrConv.length >= 19) {//                if (arrConv[18].length() > 0) {//                    try{//                        if(arrConv[18].equals("1"))//                            _mainFrame.bIsDetailScroll = true;//                        else//                            _mainFrame.bIsDetailScroll = false;//                    }catch (Exception e){}//                }//            }////            if (arrConv.length >= 20) {//                if (arrConv[19].length() > 0) {//                    try{//                        if(arrConv[19].equals("1"))//                            _mainFrame.bIsUseHubong = true;//                        else//                            _mainFrame.bIsUseHubong = false;//                    }catch (Exception e){}//                }//            }//            //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw <<////            if (arrConv.length >= 21) {//                if (arrConv[20].length() > 0) {//                    try{//                        if(arrConv[20].equals("1"))//                            _mainFrame.bIsShowToolBarOneq = true;//                        else//                            _mainFrame.bIsShowToolBarOneq = false;////                        _mainFrame.setShowToolBarOneq(_mainFrame.bIsShowToolBarOneq);//                    }catch (Exception e){}//                }//            }////            //2021.01.05 by HJW - X,YScale 격자선 옵션화 >>//            if (arrConv.length >= 22) {//                if (arrConv[21].length() > 0) {//                    try{//                        if(arrConv[21].equals("1"))//                            _mainFrame.bIsShowYScaleLine = true;//                        else//                            _mainFrame.bIsShowYScaleLine = false;////                    }catch (Exception e){}//                }//            }//            if (arrConv.length >= 23) {//                if (arrConv[22].length() > 0) {//                    try{//                        if(arrConv[22].equals("1"))//                            _mainFrame.bIsShowXScaleLine = true;//                        else//                            _mainFrame.bIsShowXScaleLine = false;////                    }catch (Exception e){}//                }//            }//            //2021.01.05 by HJW - X,YScale 격자선 옵션화 <<//            //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화 >>//            if (arrConv.length >= 24) {//                if (arrConv[23].length() > 0) {//                    try{//                        if(arrConv[23].equals("1"))//                            _mainFrame.bIsCrossLineJongga = true;//                        else//                            _mainFrame.bIsCrossLineJongga = false;////                    }catch (Exception e){}//                }//            }//            //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화 <<////			System.out.println("strCompare:"+COMUtil.strCompData);////			//2013. 9. 3 도구설정 저장/불러오기>>//			//DB에서 두번째 Column  의 데이터를 불러온다.//			String strAnalToolData = cursorConvenience.getString(2);////			String[] arrAnalTool = strAnalToolData.split("/");//			String[] arrAnalTool_Selected = strAnalToolData.split(":");		//2014.5.23 툴바 체크여부 상태 추가로  순서랑 체크 상태를 먼저 구분//			String[] arrAnalTool = null;//			String[] arrAnalSelected = null;//			if(arrAnalTool_Selected.length>=2)//			{//				arrAnalTool= arrAnalTool_Selected[0].split("/");//				arrAnalSelected = arrAnalTool_Selected[1].split("/");//			}//			else//			{//				arrAnalTool= strAnalToolData.split("/");;//			}////			//불러온 데이터를 분석툴바 순서 배열에 세팅//			if(arrAnalTool.length == COMUtil.arrDefaultToolbarIndex.length)//			{//				for(int i = 0; i < arrAnalTool.length; i++)//				{//					COMUtil.arrToolbarIndex[i] = Integer.parseInt(arrAnalTool[i]);//					if(arrAnalSelected != null)//						COMUtil.arrToolbarSelected[i] = arrAnalSelected[i];		//2014.05.16 by LYH >> 선택한 툴 버튼만 추가.//				}//			}//			//2013. 9. 3 도구설정 저장/불러오기>>////			cursorConvenience.close();//			convenienceDBHelper.close();//			dbConvenience.close();//			return true;//		}		//기준선설정 복원		if(index>=0) {            //2019. 08. 21 by hyh - 자동추세선 복원 >>////			tableName = COMUtil._mainFrame.strFileName+"_"+tableName; //ex)stock_gijunChartSetting////			GijunSaveDBHelper gijunDBHelper = new GijunSaveDBHelper(_chartMain, tableName);//			SQLiteDatabase dbGijun = gijunDBHelper.getReadableDatabase();//////			System.out.println("DEBUG_GIJUN_gijunChartSetting:"+tableName);////			Cursor cursorGijun = dbGijun.rawQuery("SELECT * FROM "+tableName, null);//			if(!cursorGijun.moveToPosition(0)) {//				cursorGijun.close();//				gijunDBHelper.close();//				dbGijun.close();//				return false;//			}////			try {//				String strConv = cursorGijun.getString(1);////				// 멀티차트 구분하여 처리//				String[] lists = strConv.split("/");////				if(lists!=null && lists.length>1) {////			    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;//			    if(base.chartList.size()==1) { //일반차트//					String strItem = lists[0];//					if(strItem!=null || !strItem.equals("")) {//						String[] arrConv = strItem.split("=");//						ChartViewModel _cvm = (ChartViewModel)COMUtil._mainFrame.mainBase.baseP._chart._cvm;//						if(_cvm.baseLineType!=null && _cvm.baseLineType.size()>0) {//							_cvm.baseLineType.clear();//						}//						for (String type : arrConv) {////							System.out.println("gijunChartSetting load : "+type);//							if(!type.equals("")) {//								_cvm.baseLineType.add(Integer.parseInt(type));//							}//						}//					}//			    } else { //멀티차트//			    	int cLen = base.chartList.size();////			    	System.out.println("DEBUG_GIJUN_chartLen:"+cLen+"_gijunLen:"+lists.length);//			    	if(lists.length>=cLen) {//				    	for(int i=0; i<cLen; i++) {//							String strItem = lists[i];//							if(strItem==null || strItem.equals("")) {//								continue;//							}//							String[] arrConv = strItem.split("=");////				    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);//							ChartViewModel _cvm = (ChartViewModel)pBaseChart._cvm;//							if(_cvm.baseLineType!=null && _cvm.baseLineType.size()>0) {//								_cvm.baseLineType.clear();//							}//							for (String type : arrConv) {////								System.out.println("gijunChartSetting load : "+type);//								if(!type.equals("")) {//									_cvm.baseLineType.add(Integer.parseInt(type));//								}//							}//				    	}//			    	}//				}////////				System.out.println("gijunChartSetting load length : "+_cvm.baseLineType.size());//			} catch(Exception e) {//				cursorGijun.close();//				gijunDBHelper.close();//				dbGijun.close();//				System.out.println(e.getMessage());//			}//			//2013. 1. 22 차트설정 - 일반설정   체크박스 및 라디오버튼 플래그 세팅////			if(arrConv[0].equals("true"))////				COMUtil.bIsyScaleShow = true;////			else////				COMUtil.bIsyScaleShow = false;////////			if(arrConv[1].equals("true"))////				COMUtil.bIsAdjustedStock = true;////			else////				COMUtil.bIsAdjustedStock = false;////////			if(arrConv[2].equals("true"))////				COMUtil.bIsMinMaxShow = true;////			else////				COMUtil.bIsMinMaxShow = false;////////			if(arrConv[3].equals("true"))////				COMUtil.isSetScreenViewPanel = true;////			else////				COMUtil.isSetScreenViewPanel = false;//////			System.out.println("strCompare:"+COMUtil.strCompData);////			cursorGijun.close();//			gijunDBHelper.close();//			dbGijun.close();            //2019. 08. 21 by hyh - 자동추세선 복원 <<			return true;		}			//2015. 1. 13 by lyk 중복지표 추가/삭제 처리//		  COMUtil.loadAddJipyoList(tableName);			//2015. 1. 13 by lyk 중복지표 추가/삭제 처리//		if(mHelper==null) {	        //SQL DB 설정.		ChartLastsaveDBHelper mHelper=null;		SQLiteDatabase db = null;		Cursor cursor = null;	        mHelper = new ChartLastsaveDBHelper(_chartMain, tableName);//		}	    try {	    	db = mHelper.getReadableDatabase();	    	cursor = db.rawQuery("SELECT * FROM "+tableName, null); //마지막 상태 저장소.(1row)	    } catch(Exception e) {	        if(db != null) {                db.close();            }	    	return false;	    }//        //해당 DB에 데이터가 없다면 클라우드 데이터를 적용한다.//		if(/*cursor.moveToPosition(0) && */cursor.getString(10).equals("")) {//			if(!COMUtil.cloudData.equals("")) {//				COMUtil.setCloudData(_chartMain, COMUtil.cloudData);//			}//			return false;//		}		 //차트정보를 복원한다.		bool = _mainFrame.setLocalStorageState(cursor, 0);		db.close();		cursor.close();		mHelper.close();        if (COMUtil.apiMode&& bool ==false) {        	Base11 base = (Base11)_mainFrame.mainBase.baseP;            base.checkMultiInit();        }        return bool;	}    // 2016.05.31 기준선 대비, 색상 굵기 >>    public static void setEnvData(ChartViewModel cvm){        String strColor = getEnvString("baseline_color", "");//        int nBaseLineColor[][]= {//                {228, 0, 56},//                {203, 101, 210},//                {106, 158, 208},//                {61, 180, 162},//                {159, 255, 0},//                {252, 135, 5},//                {159, 255, 0},//                {252, 135, 5},//                {152, 116, 232},//                {158, 40, 255},//                {230, 100, 39},//                {125, 125, 125},//                {228, 0, 56},//                {203, 101, 210},//                {106, 158, 208},//                {61, 180, 162},//                {159, 255, 0},//                {252, 135, 5},//                {159, 255, 0},//                {252, 135, 5}//        };        int nBaseLineColor[][] = CoSys.CHART_COLORS;//        int g_nBaseLineColor[][]= {//                {228, 0, 56},//                {203, 101, 210},//                {106, 158, 208},//                {61, 180, 162},//                {159, 255, 0},//                {252, 135, 5},//                {159, 255, 0},//                {252, 135, 5},//                {152, 116, 232},//                {158, 40, 255},//                {230, 100, 39},//                {125, 125, 125},//                {228, 0, 56},//                {203, 101, 210},//                {106, 158, 208},//                {61, 180, 162},//                {159, 255, 0},//                {252, 135, 5},//                {159, 255, 0},//                {252, 135, 5}//        };        int g_nBaseLineColor[][] = CoSys.CHART_COLORS;        if(strColor.length() >0)        {            String[] strColors = strColor.split("=");            if( strColors.length >=15)            {                for(int i = 0 ; i < 20 ; i++)	{                    g_nBaseLineColor[i][0] = nBaseLineColor[i][0] = Integer.parseInt(strColors[(i*3+0)]) ;                    g_nBaseLineColor[i][1] = nBaseLineColor[i][1] = Integer.parseInt(strColors[(i*3+1)]) ;                    g_nBaseLineColor[i][2] = nBaseLineColor[i][2] = Integer.parseInt(strColors[(i*3+2)]) ;                }            }        }        else        {            for(int i = 0 ; i < 20 ; i++)	{                g_nBaseLineColor[i][0] = nBaseLineColor[i][0];                g_nBaseLineColor[i][1] = nBaseLineColor[i][1];                g_nBaseLineColor[i][2] = nBaseLineColor[i][2];            }        }        String strThick = getEnvString("baseline_thick" ,"");        int nBaseLineThick[] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,1,1,1,1,1,1,1,1 };        int g_nBaseLineThick[] = { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,1,1,1,1,1,1,1,1 };        if(strThick.length()>0)        {            String[] strThicks = strThick.split("=");            if(strThicks.length>=20)            {                for(int i = 0 ; i < 20 ; i++)	{                    g_nBaseLineThick[i] = nBaseLineThick[i] = Integer.parseInt(strThicks[i]) ;                }            }        }        else        {            for(int i = 0 ; i < 20 ; i++)	{                g_nBaseLineThick[i] = nBaseLineThick[i];            }        }        String color = "";        for(int i = 0 ; i < 20 ; i++)	{            //공유정보            color = String.format("%d=%d=%d", g_nBaseLineColor[i][0], g_nBaseLineColor[i][1],  g_nBaseLineColor[i][2]);            cvm.baseLineColors.add(i,color);            cvm.baseLineThicks.add(i, g_nBaseLineThick[i]);        }    }    public static void setEnvString(String strKey, String strValue) //2017.10.19 LYH - 차트 불러오기 순서변경    {        if(strKey == null || strValue == null) return;        m_prefConfig =COMUtil._chartMain.getApplicationContext().getSharedPreferences("baseLine", Context.MODE_PRIVATE);        if(m_prefConfig == null) return;        SharedPreferences.Editor editConfig = m_prefConfig.edit();        editConfig.putString(strKey, strValue);        editConfig.commit();    }    public static String getEnvString(String strKey, String strDefault){        m_prefConfig =COMUtil._chartMain.getApplicationContext().getSharedPreferences("baseLine", Context.MODE_PRIVATE);        if(m_prefConfig == null) return strDefault;        if(!m_prefConfig.contains(strKey)) return strDefault;        try        {            return m_prefConfig.getString(strKey, strDefault);        }        catch(Exception e)        {            e.printStackTrace();            return strDefault;        }    }    // 2016.05.31 기준선 대비, 색상 굵기 <<    /** 비트맵에 글씨를쓴다 */	 public static Bitmap DRAWBIT(Bitmap bitmap_in,int w , int h,String text,int x, int y,int algin,int color){		  if(bitmap_in==null) bitmap_in = Bitmap.createBitmap(w,h,Bitmap.Config.ARGB_8888);		  Drawable DD = new BitmapDrawable(bitmap_in);		  Bitmap temp = Bitmap.createBitmap(w,h,Bitmap.Config.ARGB_8888);		  Canvas TEXT_C = new Canvas(temp);		  DD.setBounds(0,0,w,h);		  DD.draw(TEXT_C);		  Paint paint = new Paint();		  paint.setAntiAlias(true);		  paint.setColor(color);		  paint.setStrokeMiter(3);		  paint.setTextSize(12);		  switch(algin){		   case 0:		    paint.setTextAlign(Paint.Align.CENTER);		    break;		   case 1:		    paint.setTextAlign(Paint.Align.LEFT);		    break;		   case 2:		    paint.setTextAlign(Paint.Align.RIGHT);		    break;		  }		        TEXT_C.drawText(text, x, y, paint);		  TEXT_C.drawBitmap(temp,w,h, null);		  return temp;	 }//	public static HistoryDBHelper hHelper=null;	public static SQLiteDatabase hdb=null;	public static Cursor hcursor = null;    //SQL DB 설정.rmfo//	public static HistoryDBHelper getHDBHelper(Context context) {//	    if(hHelper==null) {//	        hHelper = new HistoryDBHelper(context);////			hdb = hHelper.getWritableDatabase();//	    }////	    return hHelper;//////		hcursor = hdb.rawQuery("SELECT * FROM historydata", null);////////		if(hcursor.getCount()<0) {////			hdb.execSQL("DROP TABLE IF EXISTS historydata");////			hHelper.onCreate(hdb);////		}////////		startManagingCursor(hcursor);//	}    public static void sendTR(String data) {    	//api 접속 모드 처리. 내부 tr을 사용하지 않음.    	if(_mainFrame.apiModeCheck(data, null)) {    		return;    	}    	if(COMUtil.isProcessData==true) { //데이터가 조회중에 들어온 요청은 무시한다.    		return;    	}    	String lCode="";    	String toastMsg="";    	//data type에 따른 처리.    	if(data.equals("requestAddData")) {    		//COMUtil.makeAnalInfo(); //데이터가 추가될 경우, 분석툴 좌표를 날짜 타입으로 저장함.    		 toastMsg="추가";    		//최대 조회 갯수를 999개로 제한한다.    		int cnt = COMUtil._neoChart._cdm.getCount();    		int addCnt = 0;    		if(COMUtil.dataTypeName.equals("2")) { //일.    			addCnt = 100;    		} else if(COMUtil.dataTypeName.equals("3") ||    				COMUtil.dataTypeName.equals("4")) { //주,월.    			addCnt = 50;    		} else {    			addCnt = 100;    		}    		int cmpCnt = cnt + addCnt;    		if(cmpCnt > 1000) {    			return;    		}    		COMUtil.nflag = "1"; // 다음 조회 구분자.    	} else if(data.equals(COMUtil.TR_CHART_FUTURE)) {//선물데이터.    		COMUtil.apCode=COMUtil.TR_CHART_FUTURE;    		COMUtil.lcode="SC0";    		COMUtil.nflag="0";    	} else if(data.equals(COMUtil.TR_CHART_STOCK)) {    		COMUtil.nflag = "0";    		COMUtil.apCode = COMUtil.TR_CHART_STOCK;    		COMUtil.lcode = "S31";//    	} else if(data.equals(COMUtil.TR_CHART_UPJONG)) {//    		COMUtil.nflag = "0";//    		COMUtil.apCode = COMUtil.TR_CHART_UPJONG;//    		COMUtil.lcode = "JS0";    	} else if(data.equals(COMUtil.TR_COMPARE_STOCK)) {    		COMUtil.nflag = "0";    		COMUtil.apCode = COMUtil.TR_COMPARE_STOCK;    		COMUtil.lcode = "S31";    	} else if(data.equals(COMUtil.TR_COMPARE_FUTURE)) {    		COMUtil.nflag = "0";    		COMUtil.apCode = COMUtil.TR_COMPARE_FUTURE;    		COMUtil.lcode = "SC0";    	} else if(data.equals(COMUtil.TR_COMPARE_UPJONG)) {    		COMUtil.nflag = "0";    		COMUtil.apCode = COMUtil.TR_COMPARE_UPJONG;    		COMUtil.lcode = "SC0";    	}    	else { //storageType.    		COMUtil.nflag = "0"; // 다음 조회 구분자.    	}    	COMUtil.setSendTrType(data);    	//data type에 따른 처리 끝.    	/* TR별 파라미터 생성하기 */        String param="";        if(COMUtil.apCode.equals("10101")) {        } else if(COMUtil.apCode.equals(COMUtil.TR_CHART_STOCK)) {            String code=COMUtil.symbol;            if(lCode.trim().equals("")) lCode = "JJ1";            if(COMUtil.getCheckCode(code).length()==6 && COMUtil.isDigit(code)) { //국내코드이면...                lCode = "S31";            }//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";//            if(dataTypeName.length() > 1) { //5,10분봉 등 처리작업//                minType = dataTypeName.substring(1);//                minType = COMUtil.makeSpace(minType, 2);//                dataTypeName2 = dataTypeName.substring(0, 1);//            }//            Calendar cal = Calendar.getInstance();//            String tmpMon = "" + cal.get(Calendar.MONTH)+1;//            if(tmpMon.length()==1) {//            	tmpMon="0"+tmpMon;//            }//            String tmpDay = "" + cal.get(Calendar.DAY_OF_MONTH);//            if(tmpDay.length()==1) {//            	tmpDay="0"+tmpDay;//            }            //String today = ""+cal.get(Calendar.YEAR)+tmpMon+tmpDay;            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            if(COMUtil.unit==null) COMUtil.unit = "1";            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace(COMUtil.nkey, 14);//다음/이전 fetch key            String nDataGubun = "0"; //0:가격, 1:비율            String ImgRgb = "1"; //0:허수봉, 1:실봉            String Irecordgb = "0"; //복기 구분값            String nDayBefore = COMUtil.makeSpace("", 2); //복기 시간 n일전            String Itime = COMUtil.makeSpace("", 6); //복기시간            if(dataType!=null && !dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = COMUtil.makeSpace(code, 6)+" "+today+count+unit+dataType+modGb+nflag+nkey+nDataGubun+ImgRgb+Irecordgb+nDayBefore+Itime;        } else if(COMUtil.apCode.equals(COMUtil.TR_CHART_FUTURE)) {            String code=COMUtil.makeSpace(COMUtil.symbol, 15);//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;//            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey;            if(nflag.equals("1")) {            	nkey = COMUtil.makeSpace(COMUtil.nkey, 14);//다음/이전 fetch key            } else {            	nkey = COMUtil.makeSpace("", 14);            }//            String nDataGubun = "0"; //0:가격, 1:비율            String ImgRgb = "1"; //0:허수봉, 1:실봉            String Irecordgb = "0"; //복기 구분값            String nDayBefore = COMUtil.makeSpace("", 2); //복기 시간 n일전            String Itime = COMUtil.makeSpace("", 6); //복기시간//            String reflect=COMUtil.makeSpace("", 1);//멀티차트 관련 플래그 값.//1            param = code+today+count+unit+dataType+nflag+nkey+ImgRgb+Irecordgb+nDayBefore+Itime;        } else if(COMUtil.apCode.equals(COMUtil.TR_CHART_UPJONG)) {            String code=COMUtil.makeSpace(COMUtil.symbol, 4);//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;//            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace("", 14);            if(!dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = code+today+count+unit+dataType+nflag+nkey;        }else if(COMUtil.apCode.equals(COMUtil.TR_COMPARE_STOCK)) {            String code=COMUtil.symbol;            if(lCode.trim().equals("")) lCode = "JJ1";            if(COMUtil.getCheckCode(code).length()==6 && COMUtil.isDigit(code)) { //국내코드이면...                lCode = "S31";            }//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            if(COMUtil.unit==null) COMUtil.unit = "1";            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace(COMUtil.nkey, 14);//다음/이전 fetch key            if(dataType!=null && !dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = COMUtil.makeSpace(code, 6)+today+count+unit+dataType+nflag+nkey;        } else if(COMUtil.apCode.equals(COMUtil.TR_COMPARE_UPJONG)) {            String code=COMUtil.makeSpace(COMUtil.symbol, 4);//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;//            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace("", 14);            if(!dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = code+today+count+unit+dataType+nflag+nkey;        } else if(COMUtil.apCode.equals(COMUtil.TR_COMPARE_FUTURE)) {            String code=COMUtil.makeSpace(COMUtil.symbol, 15);//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;//            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace(COMUtil.nkey, 14);//다음/이전 fetch key            if(!dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = code+today+count+unit+dataType+nflag+nkey;        } else {        	COMUtil.apCode = COMUtil.TR_CHART_STOCK;            String code=COMUtil.symbol;            if(lCode.trim().equals("")) lCode = "JJ1";            if(COMUtil.getCheckCode(code).length()==6 && COMUtil.isDigit(code)) { //국내코드이면...                lCode = "S31";            }//            String delay = COMUtil.delay; // delay=0; 실시간 dalay=1; 10분딜레이//            String minType = "";            String today = "99999999";            String tmpCount = "0";            if(COMUtil._neoChart!=null) {            	tmpCount = ""+COMUtil._neoChart._cvm.inquiryNum;            	if(COMUtil.getSendTrType().equals("requestAddData")) {            		if(COMUtil.dataTypeName.equals("2")) { //일            			tmpCount = "100";            		} else if(COMUtil.dataTypeName.equals("3") ||            				COMUtil.dataTypeName.equals("4")) { //주, 월            			tmpCount = "50";            		} else {            			tmpCount = "100";            		}            	}            }            String count = COMUtil.makeZero(tmpCount, 4);            String unit = COMUtil.makeZero(COMUtil.unit, 3);            String dataType = COMUtil.dataTypeName;            String modGb = "1";            String nflag = COMUtil.nflag;            String nkey = COMUtil.makeSpace(COMUtil.nkey, 14);//다음/이전 fetch key            String nDataGubun = "0"; //0:가격, 1:비율            String ImgRgb = "1"; //0:허수봉, 1:실봉            String Irecordgb = "0"; //복기 구분값            String nDayBefore = COMUtil.makeSpace("", 2); //복기 시간 n일전            String Itime = COMUtil.makeSpace("", 6); //복기시간            if(dataType!=null && !dataType.equals("1")) {            	unit = COMUtil.makeZero("1", 3);            }            param = COMUtil.makeSpace(code, 6)+" "+today+count+unit+dataType+modGb+nflag+nkey+nDataGubun+ImgRgb+Irecordgb+nDayBefore+Itime;        }        if(_mainFrame!=null) {        	_mainFrame.sendTR(COMUtil.apCode, param);    		String textTochange = toastMsg+"데이터 조회중입니다.";        	COMUtil.showMessage(_chartMain, textTochange); //Context, String msg        }        COMUtil.isProcessData=true;    }	public static void selectChart(int id) {		//차트 형태별 타입 결정//		if(id==3008 || COMUtil.dataTypeName.equals("0")) { //tic//			_mainFrame.mainBase.changeBlock_NotRepaint("종가선차트");//		}//		else {//			_mainFrame.mainBase.changeBlock_NotRepaint("일본식봉차트");//		}		//차트설정		if (id == 20001) {		//차트형태설정			_mainFrame.mainBase.addBasicConfig("캔들");		}		else if (id == ChartUtil.JBONG_TRANSPARENCY) {		//차트형태설정            _mainFrame.mainBase.addBasicConfig("투명캔들");        }		else if (id == 20002) {		//차트형태설정			//2015.04.30 by lyk - 바(시고저종) 유형 추가			//_mainFrame.mainBase.baseP._chart._cvm.bIsOHLCType = "0";			//2015.04.30 by lyk - 바(시고저종) 유형 추가 end			_mainFrame.mainBase.addBasicConfig("바");		}		//2015.04.30 by lyk - 바(시고저종) 유형 추가		else if (id == 20022) {		//차트형태설정			//_mainFrame.mainBase.baseP._chart._cvm.bIsOHLCType = "1";			_mainFrame.mainBase.addBasicConfig("바(시고저종)");		}		//2015.04.30 by lyk - 바(시고저종) 유형 추가 end        else if (id == 20024) {		//차트형태설정            //_mainFrame.mainBase.baseP._chart._cvm.bIsOHLCType = "1";            _mainFrame.mainBase.addBasicConfig("종가영역");        }		else if (id == 20003) {		//차트형태설정			_mainFrame.mainBase.addBasicConfig("라인");		}else if (id == 20004) {		//차트형태설정			_mainFrame.mainBase.addTrendConfig("일목균형표");		}else if (id == 20005) {		//차트형태설정			_mainFrame.mainBase.addTrendConfig("매물대");		}else if (id == 20006) {		//차트형태설정			_mainFrame.mainBase.addTrendConfig("그물차트");		}else if (id == 20007) {		//차트형태설정			_mainFrame.mainBase.addIndependenceConfig("삼선전환도");		}else if (id == 20011) {		//P&F			_mainFrame.mainBase.addIndependenceConfig("PnF");		}else if (id == 20008) {		//차트형태설정			_mainFrame.mainBase.addTrendConfig("Bollinger Band");		}else if (id == 20019) {		//P&F			_mainFrame.mainBase.addIndependenceConfig("스윙");		}else if (id == 20020) {		//P&F			_mainFrame.mainBase.addIndependenceConfig("렌코");		}else if (id == 20021) {		//역시계곡선 //2015.04.30 by lyk - 역시계곡선 추가			_mainFrame.mainBase.addIndependenceConfig("역시계곡선");		}		//2015.06.23 by lyk - 차트 유형 추가		else if (id == 20023) {		//Kagi			_mainFrame.mainBase.addIndependenceConfig("Kagi");		}		//2015.06.23 by lyk - 차트 유형 추가 end		else if (id == 20013) {		//Renko			COMUtil.showMessage(_chartMain, "추가 예정입니다");		}        //2017.07.05 by pjm - 차트 유형 추가 >>        else if (id == 20025) {		//분산형            _mainFrame.mainBase.addIndependenceConfig("분산형");        }        else if (id == 20026) {		//플로우형            _mainFrame.mainBase.addBasicConfig("FLOW");        }        //2017.07.05 by pjm - 차트 유형 추가 <<        else if (id == 20027) {     //Heikin-Ashi            _mainFrame.mainBase.addBasicConfig("Heikin-Ashi");        }        //2020.07.06 by LYH >> 캔들볼륨 >>        else if (id == 20028) {     //Candle Volume            _mainFrame.mainBase.addBasicConfig(CANDLE_TYPE_CANDLE_VOLUME);        }        else if (id == 20029) {     //Equi Volume            _mainFrame.mainBase.addBasicConfig(CANDLE_TYPE_EQUI_VOLUME);        }        //2020.07.06 by LYH >> 캔들볼륨 <<        else if (id == 20030) {     //Equi Volume            _mainFrame.mainBase.addBasicConfig(CANDLE_TYPE_STAIR);        }		//기간설정.		else if(id>=COMUtil.PERIOD_CONFIG_DAY && id <=COMUtil.PERIOD_CONFIG_MIN6) {			String strAPCode = COMUtil.apCode;			if(strAPCode.equals("10101")) {			} else if(strAPCode.equals(COMUtil.TR_CHART_STOCK) || strAPCode.equals(COMUtil.TR_CHART_FUTURE) ||					strAPCode.equals(COMUtil.TR_CHART_UPJONG) || strAPCode.equals(COMUtil.TR_COMPARE_STOCK) || strAPCode.equals(COMUtil.TR_COMPARE_FUTURE)					|| strAPCode.equals(COMUtil.TR_COMPARE_UPJONG)) {				if(COMUtil.chartMode==COMUtil.COMPARE_CHART) {					if(strAPCode.equals(COMUtil.TR_CHART_STOCK)) {						strAPCode = COMUtil.TR_COMPARE_STOCK;						COMUtil.apCode = strAPCode;					} else if(strAPCode.equals(COMUtil.TR_CHART_FUTURE)) {						strAPCode = COMUtil.TR_COMPARE_FUTURE;						COMUtil.apCode = strAPCode;					}					if(id==COMUtil.PERIOD_CONFIG_TIC) {						id=COMUtil.PERIOD_CONFIG_MIN;					}				}				if(id==COMUtil.PERIOD_CONFIG_DAY) { //day					COMUtil.dataTypeName = "2";					COMUtil.unit = "1";				}else if(id==COMUtil.PERIOD_CONFIG_WEEK) { //week					COMUtil.dataTypeName = "3";					COMUtil.unit = "1";				}else if(id==COMUtil.PERIOD_CONFIG_MONTH) { //mon					COMUtil.dataTypeName = "4";					COMUtil.unit = "1";				}else if(id==COMUtil.PERIOD_CONFIG_MIN) { //min					COMUtil.dataTypeName = "1";					COMUtil.unit = "1";				}else if(id>=COMUtil.PERIOD_CONFIG_MIN1 && id<=COMUtil.PERIOD_CONFIG_MIN6) { //기간설정(분).					COMUtil.dataTypeName = "1";					int nIndex = id-COMUtil.PERIOD_CONFIG_MIN1;					String slotValue = COMUtil.periodMinConfigList[nIndex];					COMUtil.unit = slotValue;				}else if(id==COMUtil.PERIOD_CONFIG_TIC) { //tic					COMUtil.dataTypeName = "0";					COMUtil.unit = "1";				}else if(id==COMUtil.PERIOD_CONFIG_YEAR) { //year					COMUtil.dataTypeName = "5";					COMUtil.unit = "1";				}				COMUtil.sendTR(strAPCode);			}		}		//분석툴바 적용.		else if(id>=COMUtil.TOOLBAR_CONFIG_LINE && id < COMUtil.TOOLBAR_CONFIG_END) { //추세선			_mainFrame.mainBase.baseP.setChartToolBar(id);		}	}	public static void setJipyo(CheckBox v) {		boolean isOn = v.isChecked();		String tag = v.getTag().toString();//		try {			if(isOn==true) {                COMUtil.isInsertJipyo = true;                addJipyo(tag);                COMUtil.isInsertJipyo = false;				//2013. 2. 8 체크안된 상세설정 오픈 : I114				// 새로 생성된 graph 에 unchkGraph 정보 복사//				String graphName = getGraphName(tag);//				NeoChart2 neoChart = COMUtil._neoChart;//				AbstractGraph oGraph = neoChart.getUnChkGraph(graphName);//				if(oGraph != null)//				{//					AbstractGraph nGraph = neoChart.getGraph(graphName);//					if(oGraph.getControlValue() != null)//					{//						nGraph.changeControlValue(oGraph.getControlValue());//					}//					neoChart.removeUnChkGraph(oGraph);////					COMUtil._neoChart.resetTitleBoundsAll();//					COMUtil._neoChart.makeGraphData();//					COMUtil._neoChart.repaintAll();//				}			} else {				//2013. 2. 8 체크안된 상세설정 오픈 : I114				// 삭제하기 전에 unChkGraph 로 이동//				String graphName = getGraphName(tag);//				NeoChart2 neoChart = COMUtil._neoChart;//				AbstractGraph graph = neoChart.getGraph(graphName);//	//			graph.toolLabelRemoveFromSuperview();//				neoChart.addUnChkGraph(graph);//				removeJipyo(tag);			}//		} catch(Exception e) {//			System.out.println(e.getMessage());//		}	}	public static String getGraphName(String strTag)	{		String graphName = null;		int tag = Integer.parseInt(strTag);		if (tag == ChartUtil.VOLUME) {		//지표설정(거래량)	        graphName = "거래량";		}else if (tag == ChartUtil.PAVERAGE) {		//지표설정(주가이동평균)	        graphName = "주가이동평균";		}else if (tag == ChartUtil.MACD) {		//지표설정(MACD)	        graphName = "MACD";		}else if (tag == ChartUtil.STOCH_FST) {		//지표설정(Fast Stochastic)	        graphName = "Stochastic";		}else if (tag == ChartUtil.STOCH_SLW) {		//지표설정(Stochastic Slow)	        graphName = "Stochastic Slow";		}else if (tag == ChartUtil.RSI) {		//지표설정(RSI)	        graphName = "RSI";		}else if (tag == ChartUtil.MACD_OSC) {		//지표설정(MACD OSC)	        graphName = "MACD OSC";		}else if (tag == ChartUtil.GLANCE_BALANCE) {		//지표설정(일목균형표)	        graphName = "일목균형표";		}else if (tag == ChartUtil.BOLLINGER) {		//지표설정(Bollinger Band)	        graphName = "Bollinger Band";		}else if (tag == ChartUtil.RAINBOW) {		//지표설정(그물차트)	        graphName = "그물차트";		}else if (tag == ChartUtil.PARABOLIC) {		//지표설정(Parabollic SAR)	        graphName = "Parabolic SAR";		}else if (tag == ChartUtil.STANDSCALE) {		//지표설정(매물대분석)	        graphName = "매물대";	    }else if (tag == ChartUtil.ENVELOPE) {		//지표설정(Envelope)	        graphName = "Envelope";		}else if (tag == ChartUtil.MAC) {		//지표설정(MAC)	        graphName = "MAC";		}else if (tag == ChartUtil.PIVOT) {		//지표설정(Pivot)	        graphName = "Pivot";		}else if (tag == ChartUtil.PIVOTPRE) {		//지표설정(Pivot)            graphName = "Pivot전봉기준";        }else if (tag == ChartUtil.DEMARK) {		//지표설정(지그재그차트)            graphName = "Demark";        }else if (tag == ChartUtil.ZIGZAG) {		//지표설정(지그재그차트)	        graphName = "Zig Zag";        }//2014.01.11 by LYH >> Price Channel 지표 추가	    else if (tag == ChartUtil.PRICE_CHANNEL) {		//지표설정(Price Channel)	        graphName = "Price Channel";		//2014.01.11 by LYH >> Price Channel 지표 추가		}else if (tag == ChartUtil.CCI) {		//지표설정(CCI)	        graphName = "CCI";		}else if (tag == ChartUtil.AB_Ratio) {		//지표설정(AB Ratio)	        graphName = "AB Ratio";		}else if (tag == ChartUtil.DMI) {		//지표설정(DMI)	        graphName = "DMI";		}else if (tag == ChartUtil.MFI) {		//지표설정(MFI)	        graphName = "MFI";		}else if (tag == ChartUtil.Momentum) {		//지표설정(Momentum)	        graphName = "Momentum";		}else if (tag == ChartUtil.NVI) {		//지표설정(NVI)	        graphName = "NVI";		}else if (tag == ChartUtil.OBV) {		//지표설정(OBV)	        graphName = "OBV";		}else if (tag == ChartUtil.SONAR) {		//지표설정(Sonar)	        graphName = "Sonar";		}else if (tag == ChartUtil.STDEV) {		//지표설정(STDEV)	        graphName = "Standard Deviation";		}else if (tag == ChartUtil.TRIX) {		//지표설정(TRIX)	        graphName = "TRIX";		}else if (tag == ChartUtil.VR) {		//지표설정(VR)	        graphName = "VR";		}else if (tag == ChartUtil.WILLIAMS) {		//지표설정(William's %R)	        graphName = "Williams R";		}else if (tag == ChartUtil.PSYCO) {		//지표설정(심리도)	        graphName = "심리도";		}else if (tag == ChartUtil.DISPARITY) {		//지표설정(이격도)	        graphName = "이격도";	    }else if (tag == ChartUtil.ADX) {		//지표설정(ADX)	        graphName = "ADX";	    }else if (tag == ChartUtil.RCI) {		//지표설정(RCI)	        graphName = "RCI";	    }else if (tag == ChartUtil.ROC) {		//지표설정(ROC)	        graphName = "ROC";	    }else if (tag == ChartUtil.SROC) {		//지표설정(SROC)	        graphName = "SROC";	    }else if (tag == ChartUtil.CV) {		//지표설정(Chaikins Volatility)	        graphName = "Chaikins Volatility";	    }else if (tag == ChartUtil.RMI) {		//지표설정(RMI)	        graphName = "RMI";	    }else if (tag == ChartUtil.VHF) {		//지표설정(VHF)	        graphName = "VHF";	    }else if (tag == ChartUtil.SIGMA) {		//지표설정(Sigma)	        graphName = "Sigma";		}else if (tag == ChartUtil.SIGMA) {		//지표설정(Sigma)	        graphName = "ATR";		}else if (tag == ChartUtil.ATR) {		//지표설정(ATR)	        graphName = "Chaikins OSC";	    }else if (tag == ChartUtil.OSCP) {		//지표설정(OSCP)	        graphName = "Price Oscillator";//	    }else if (tag == ChartUtil.OSCV) {		//지표설정(OSCV)//	        graphName = "Volume Oscillator";	    }else if (tag == ChartUtil.MI) {		//지표설정(Mass Index)	        graphName = "Mass Index";	    }else if (tag == ChartUtil.REVERSE) {		//지표설정(Reverse)	        graphName = "Reverse";	    }else if (tag == ChartUtil.VMAO) {		//지표설정(Volume Oscillator)	        graphName = "Volume Oscillator";	    }else if (tag == ChartUtil.MACDPLUSOSC) {		//지표설정(macd+osc)            graphName = "MACD+OSC";        }else if (tag == ChartUtil.MARKET1) {		//지표설정(시장지표)	        graphName = ChartUtil.strMarkets[0];	    }	    return graphName;	}	//2013. 2. 5  지표(오버레이 + 보조) 를 모두 내부적으로 가지고 있게 세팅해주는 함수. 지표설정창에서 체크 안된 지표도 수정가능하게	public static void addJipyoAll() {		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용)		//Vector<Hashtable<String, String>> items = COMUtil.getJipyoMenu();		Vector<Hashtable<String, String>>  items = (Vector<Hashtable<String, String>>)COMUtil.getJipyoMenu().clone();		Vector<Hashtable<String, String>> addItems = COMUtil.getAddJipyoList();		for(int i=0; i<addItems.size(); i++) {			items.add(addItems.get(i));		}		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용) end		for(int i=0; i<items.size(); i++) {			Hashtable<String, String> item = (Hashtable<String, String>)items.get(i);          	String itemTag = (String)item.get("tag");          	String itemType = (String)item.get("type");          	String itemName = (String)item.get("name");          	_mainFrame.mainBase.addIndicatorConfig(itemName);		}	}	public static void addJipyo(String tag) {		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용)		//Vector<Hashtable<String, String>> items = COMUtil.getJipyoMenu();		Vector<Hashtable<String, String>>  items = (Vector<Hashtable<String, String>>)COMUtil.getJipyoMenu().clone();		Vector<Hashtable<String, String>> addItems = COMUtil.getAddJipyoList();		for(int i=0; i<addItems.size(); i++) {			items.add(addItems.get(i));		}		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용) end		for(int i=0; i<items.size(); i++) {			Hashtable<String, String> item = (Hashtable<String, String>)items.get(i);          	String itemTag = (String)item.get("tag");          	String itemType = (String)item.get("type");          	String itemName = (String)item.get("name");          	if(tag.equals(itemTag)) {          		if(itemType.equals("Indicator")) {          			_mainFrame.mainBase.addIndicatorConfig(itemName);          		} else if(itemType.equals("Trend")) {          			_mainFrame.mainBase.addTrendConfig(itemName);          		} else if(itemType.equals("strategy")) {    //2017.05.11 by LYH >> 전략(신호, 강약) 추가                    _mainFrame.mainBase.addStrategyConfig(itemName);                }          	}		}	}	public static void removeJipyo(String tag) {		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용)		//Vector<Hashtable<String, String>> items = COMUtil.getJipyoMenu();		Vector<Hashtable<String, String>>  items = (Vector<Hashtable<String, String>>)COMUtil.getJipyoMenu().clone();		Vector<Hashtable<String, String>> addItems = COMUtil.getAddJipyoList();		for(int i=0; i<addItems.size(); i++) {			items.add(addItems.get(i));		}		//2015. 1. 13 by lyk - 동일지표 추가 (추가리스트 적용) end		for(int i=0; i<items.size(); i++) {			Hashtable<String, String> item = (Hashtable<String, String>)items.get(i);          	String itemTag = (String)item.get("tag");          	String itemType = (String)item.get("type");          	String itemName = (String)item.get("name");          	if(tag.equals(itemTag)) {          		if(itemType.equals("Indicator")) {          			_mainFrame.mainBase.removeIndicatorConfig(itemName);          			if (isMarketIndicator(itemName)) {          			    for (String code : getMainBase().baseP._chart.getGraphTagList()) {          			        if (code.equals(itemTag)) continue;          			        if (code.equals("30100")) {                                _mainFrame.apiModeCheck(ChartUtil.strMarkets[0], null);                            } else if (code.equals("30101")) {                                _mainFrame.apiModeCheck(ChartUtil.strMarkets[1], null);                            } else if (code.equals("30102")) {                                _mainFrame.apiModeCheck(ChartUtil.strMarkets[2], null);                            }                        }                    }          		} else if(itemType.equals("Trend")) {          			_mainFrame.mainBase.removeTrendConfig(itemName);          		} else if(itemType.equals("strategy")) {    //2017.05.11 by LYH >> 전략(신호, 강약) 추가                    _mainFrame.mainBase.removeStrategyConfig(itemName);                }          	}		}	}    private static RelativeLayout savepopoverLayout, loadpopoverLayout = null, modifypopoverLayout = null;    public static ModifySavedChartController modifySavedView = null;    //2013. 7. 31 저장하기창에 종목 상세내용(일시/종목/주기) 추가>>    //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정 start//    public static void modifySavedChart(int _nID, String strSaveTitle, String strMemo, final TextView _tvTitle) {    public static void modifySavedChart(String _strID, String strSaveTitle, String strMemo, final TextView _tvTitle, String strSaveDate, String strCodeName, String strPeriod, String strJipyoList) {    //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정 end        WindowManager wm = COMUtil._chartMain.getWindowManager();        Display display = wm.getDefaultDisplay();        int width = display.getWidth();        int height = display.getHeight();        RelativeLayout simpleLayout = new RelativeLayout(COMUtil._mainFrame.getContext());        simpleLayout.setLayoutParams(new LayoutParams(width, height));        simpleLayout.setFocusable(true);        simpleLayout.setBackgroundColor(Color.argb(70, 0, 0, 0));        simpleLayout.setGravity(Gravity.CENTER);        simpleLayout.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                if (modifySavedPopup != null) {                    modifySavedPopup.dismiss();                    modifySavedPopup = null;                }            }        });        modifySavedView = new ModifySavedChartController(_chartMain, simpleLayout, strSaveTitle, strMemo, strSaveDate, strCodeName, strPeriod, strJipyoList);        modifySavedView.setTag("modifySavedView");        modifySavedPopup = new PopupWindow(simpleLayout, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, true);        modifySavedPopup.setOutsideTouchable(true); // 이부분을 설정해주어야 팝업이 떳을때 다른부분에 이벤트를 줄수있습니다.        modifySavedPopup.setBackgroundDrawable(new BitmapDrawable());  // 이부분에 이벤트가 들어오게됩니다.        modifySavedPopup.showAtLocation(apiView.getRootView(), Gravity.CENTER, 0, 0);        //닫기 버튼        int resId = COMUtil.apiView.getContext().getResources().getIdentifier("frameabtnfunction", "id", COMUtil.apiView.getContext().getPackageName());        Button btnClose = (Button) simpleLayout.findViewById(resId);        btnClose.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                if (modifySavedPopup != null) {                    modifySavedPopup.dismiss();                    modifySavedPopup = null;                }                loadChart(null);            }        });        //확인 버튼        resId = COMUtil.apiView.getContext().getResources().getIdentifier("acceptbtn", "id", COMUtil.apiView.getContext().getPackageName());        Button btnAccept = (Button) simpleLayout.findViewById(resId);        //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정 start        final String strID = _strID;        btnAccept.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                if(modifySavedPopup!=null) {                    //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정 start                    isSaved = modifySavedView.modifyToFile(strID, _tvTitle);//                    modifySavedPopup.dismiss();//                    modifySavedPopup = null;//						COMUtil.loadchartPopup.getContentView().setVisibility(View.VISIBLE);//                    loadChart(null);                    if (COMUtil.isSaved)                        modifySavedView.modifyLocal(strID);                    //2020.05.19 by JJH >> 차트 불러오기 - 상세 설정 팝업 UI 수정 end                    InputMethodManager imm = (InputMethodManager) _chartMain.getSystemService(Context.INPUT_METHOD_SERVICE);                    imm.hideSoftInputFromWindow(v.getWindowToken(), 0);                    //자동회전 방지기능을 화면이 닫힐때 풀어준다.                    //COMUtil._chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);                }            }        });	}    public static SaveChartController chartSaveView = null;    public static LoadChartController chartLoadView = null;	public static void saveChart(View v) {        WindowManager wm = COMUtil._chartMain.getWindowManager();        Display display = wm.getDefaultDisplay();        int width = display.getWidth();        int height = display.getHeight();        RelativeLayout simpleLayout = new RelativeLayout(COMUtil._mainFrame.getContext());        simpleLayout.setLayoutParams(new LayoutParams(width, height));        simpleLayout.setTag("chartSaveLayout");        simpleLayout.setFocusable(true);        simpleLayout.setBackgroundColor(Color.argb(70, 0, 0, 0));        simpleLayout.setGravity(Gravity.CENTER);        simpleLayout.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                closeSaveChartPopup();            }        });        chartSaveView = new SaveChartController(_chartMain, simpleLayout);        chartSaveView.setTag("chartLoadView");        savechartPopup = new PopupWindow(simpleLayout, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, true);        savechartPopup.setOutsideTouchable(true); // 이부분을 설정해주어야 팝업이 떳을때 다른부분에 이벤트를 줄수있습니다.        savechartPopup.setBackgroundDrawable(new BitmapDrawable());  // 이부분에 이벤트가 들어오게됩니다.        savechartPopup.showAtLocation(apiView.getRootView(), Gravity.CENTER, 0, 0);        //차트설정 닫기 추가        int resId = COMUtil.apiView.getContext().getResources().getIdentifier("frameabtnfunction", "id", COMUtil.apiView.getContext().getPackageName());        Button btnClose = (Button) simpleLayout.findViewById(resId);        resId = COMUtil.apiView.getContext().getResources().getIdentifier("cancelbtn", "id", COMUtil.apiView.getContext().getPackageName());        Button btnCancel = (Button) simpleLayout.findViewById(resId);        resId = COMUtil.apiView.getContext().getResources().getIdentifier("acceptbtn", "id", COMUtil.apiView.getContext().getPackageName());        Button btnAccept = (Button) simpleLayout.findViewById(resId);        if (btnAccept != null) {            btnAccept.setOnClickListener(new Button.OnClickListener() {                public void onClick(View v) {                    if (savechartPopup != null) {                        chartSaveView.saveChartToFile();                    }                }            });        }        if (btnCancel != null) {            btnCancel.setOnClickListener(new Button.OnClickListener() {                public void onClick(View v) {                    closeSaveChartPopup();                }            });        }			btnClose.setOnClickListener(new Button.OnClickListener() {				public void onClick(View v) {					if(savechartPopup!=null) {//						chartSaveView.saveChartToFile();						savechartPopup.dismiss();						savechartPopup = null;	    				//자동회전 방지기능을 화면이 닫힐때 풀어준다.	    				//COMUtil._chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);					}				}			});			//2013. 1. 25 저장버튼 없어져서 주석//			resId = COMUtil.apiView.getContext().getResources().getIdentifier("savebutton", "id", COMUtil.apiView.getContext().getPackageName());//			//2012. 7.26 차트저장화면 버튼 변경 (이미지 삭제하고 기본버튼으로)//			Button saveBtn = (Button)periodLayout.findViewById(resId);//			saveBtn.setOnClickListener(new Button.OnClickListener() {//	        	public void onClick(View v) {//	        	//2012. 7. 23 차트저장  try-catch 주석처리////		        	try {//	        			chartSaveView.saveChartToFile();//		        		savechartPopup.dismiss();//						savechartPopup = null;//						//자동회전 방지기능을 화면이 닫힐때 풀어준다.//						//COMUtil._chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);////		        	}////		        	catch (Exception e) {////		        		System.out.println("SaveChart Error msg:"+e.getMessage());////		        	}//		        }//	        });//		}	}    public static void closeSaveChartPopup() {        if (savechartPopup != null) {            savechartPopup.dismiss();            savechartPopup = null;        }    }    public static void closeModifyChartPopup() {        if(modifySavedPopup != null){            modifySavedPopup.dismiss();            modifySavedPopup = null;        }    }    public static void loadChart(View v) {        WindowManager wm = COMUtil._chartMain.getWindowManager();        Display display = wm.getDefaultDisplay();        //2020.05.08 by JJH >> 가로모드 작업 (차트 불러오기 팝업) start//        int width = display.getWidth();        int width = 0;        //2020.05.08 by JJH >> 가로모드 작업 (차트 불러오기 팝업) end        int height = display.getHeight();        //2020.05.08 by JJH >> 가로모드 작업 (차트 불러오기 팝업) start        Configuration config = COMUtil.apiView.getContext().getResources().getConfiguration();        if(config.orientation == Configuration.ORIENTATION_LANDSCAPE)        {            //가로            width = (int) COMUtil.getPixel(320);        }else{            //세로            width = display.getWidth();        }        //2020.05.08 by JJH >> 가로모드 작업 (차트 불러오기 팝업) end        RelativeLayout simpleLayout = new RelativeLayout(COMUtil._mainFrame.getContext());        simpleLayout.setLayoutParams(new LayoutParams(width, height));        simpleLayout.setTag("chartLoadLayout");        simpleLayout.setFocusable(true);        simpleLayout.setBackgroundColor(Color.argb(70, 0, 0, 0));        simpleLayout.setGravity(Gravity.BOTTOM);        simpleLayout.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                if (loadchartPopup != null) {                    loadchartPopup.dismiss();                    loadchartPopup = null;                }            }        });        chartLoadView = new LoadChartController(_chartMain, simpleLayout);        chartLoadView.setTag("chartLoadView");        loadchartPopup = new PopupWindow(simpleLayout, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, true);        loadchartPopup.setOutsideTouchable(true); // 이부분을 설정해주어야 팝업이 떳을때 다른부분에 이벤트를 줄수있습니다.        loadchartPopup.setBackgroundDrawable(new BitmapDrawable());  // 이부분에 이벤트가 들어오게됩니다.        loadchartPopup.showAtLocation(apiView.getRootView(), Gravity.CENTER, 0, 0);//        loadchartPopup.setAnimationStyle(COMUtil._chartMain.getResources().getIdentifier("AnimationPopupStyle", "style", COMUtil._chartMain.getPackageName()));//        loadchartPopup.showAtLocation(COMUtil.apiView, Gravity.BOTTOM, 0, 0);        //차트설정 닫기 추가        int resId = COMUtil.apiView.getContext().getResources().getIdentifier("frameaBtnfunction", "id", COMUtil.apiView.getContext().getPackageName());        Button btnClose = (Button) simpleLayout.findViewById(resId);        btnClose.setOnClickListener(new Button.OnClickListener() {            public void onClick(View v) {                if (loadchartPopup != null) {                    loadchartPopup.dismiss();                    loadchartPopup = null;                }            }        });    }	public static void closeSaveChartPopover() {		//2012. 8. 21  레이아웃 null  검사 루틴 추가		if(savepopoverLayout != null)		{			savepopoverLayout.removeAllViews();			COMUtil._mainFrame.layout.removeView(savepopoverLayout);			COMUtil.unbindDrawables(savepopoverLayout);		    System.gc();		}	}	public static void closeLoadChartPopover() {		//2012. 8. 21  레이아웃 null  검사 루틴 추가		if(loadpopoverLayout != null)		{			loadpopoverLayout.removeAllViews();			COMUtil._mainFrame.layout.removeView(loadpopoverLayout);			COMUtil.unbindDrawables(loadpopoverLayout);		    System.gc();		}	}    public static void setDivideChart(View v) {		int tag = Integer.parseInt((String)v.getTag());    	if(_mainFrame!=null) {    		_mainFrame.mainBase.setDivision(tag);    	}    	if(COMUtil.apiMode) {    		if(_mainFrame!=null)    			_mainFrame.closeApiPopup();    	} else {			LinearLayout rl = (LinearLayout)COMUtil._mainFrame.layout.findViewWithTag(COMUtil.DIVIDE_LAYOUT);			if(rl != null)			{				rl.removeAllViews();				COMUtil._mainFrame.layout.removeView(rl);				COMUtil.unbindDrawables(rl);				System.gc();				COMUtil.isDivideBtnState = false;			}    	}    }  //2015.04.07 by lyk - 주기별 차트 설정 (지표값에 변동사항이 발생하면 주기별 설정 항목에 업데이트를 한다)  	public static void setSavePeriodChartSave() {//  		if(COMUtil.chartMode==COMUtil.DIVIDE_CHART) //주기별 차트 설정은 멀티차트일땐 처리하지 않는다. (오류발생)//  			return;  		if(COMUtil._mainFrame.bIsPeriodConfigSave) {  			if(COMUtil._mainFrame.ctlDataTypeName==null) {  				COMUtil._mainFrame.ctlDataTypeName = COMUtil.dataTypeName;  			}  		    Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;  		    int cLen = base.chartList.size();  		    if(cLen == 1) {                BaseChart pBaseChart = (BaseChart)base.chartList.get(0);  		    	COMUtil._mainFrame.loadPeriodSaveItem.put(COMUtil.getPeriodSaveKeyName()+pBaseChart._cdm.codeItem.strDataType+"_0", COMUtil.getGraphListStr());                //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장                if(pBaseChart.m_strSizeInfo != null)                    COMUtil._mainFrame.loadPeriodSizeInfo.put(COMUtil.getPeriodSaveKeyName()+pBaseChart._cdm.codeItem.strDataType+"_0", pBaseChart.m_strSizeInfo);                //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장 end  		    } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {  		    {  		    	for(int i=0; i<cLen; i++) {  		    		String strGraphList= "";  		    		BaseChart pBaseChart = (BaseChart)base.chartList.get(i);  		    		Vector<String> datas = pBaseChart.getGraphConfigList();  		    		String tmp="";  					for(int k=0; k<datas.size(); k++) {//  						tmp += COMUtil.getEncodeData((String)datas.get(k))+"-";  						tmp += COMUtil.getEncodeData((String)datas.get(k))+"~";	//2015. 9. 2 주기별차트 멀티차트시 구분자 변경 (음수값이 들어갈 경우 배열이 잘못 구성됨)  					}  					strGraphList += tmp;//  					System.out.println("Debug_savePeriodKey:"+COMUtil.getPeriodSaveKeyName()+pBaseChart._cdm.codeItem.strDataType+"_"+i);  					//화면이름+분index+기간  					COMUtil._mainFrame.loadPeriodSaveItem.put(COMUtil.getPeriodSaveKeyName()+pBaseChart._cdm.codeItem.strDataType+"_"+i, strGraphList);                    //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장                    if(pBaseChart.m_strSizeInfo != null)                        COMUtil._mainFrame.loadPeriodSizeInfo.put(COMUtil.getPeriodSaveKeyName()+pBaseChart._cdm.codeItem.strDataType+"_"+i, pBaseChart.m_strSizeInfo);                    //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장 end  		    	}  		    }  		}//  		else {//  			   String[] token = COMUtil.getGraphListStr().split("\\/");//  			   Vector<Vector<String>> graphLists = new Vector<Vector<String>>();//  	    	   String str="";//  	    	   for(int i=0; i<token.length; i++) {//  	    		   StringTokenizer st = new StringTokenizer(token[i], "-");//  	               Vector<String> graphs=new Vector<String>();//  	               while (st.hasMoreTokens()) {//  	                   str = COMUtil.getDecodeData(st.nextToken());//  	                   graphs.add(str);//  	               }//  	               graphLists.add(graphs);//  	    	   }//  	    	   if(graphLists.size()>0) {//  	    		   loadItem.put("graphList", graphLists.get(0));//  	    		   loadItem.put("graphLists", graphLists);//  	    	   }//  		}  	}  	//2015.04.07 by lyk - 주기별 차트 설정 (지표값에 변동사항이 발생하면 주기별 설정 항목에 업데이트를 한다) end	public static void removeChart(Vector item)	{	 	if(item==null || item.size()==0) return;		String type = (String)item.get(1);		String label = (String)item.get(0);		if(type==null || label==null) return;		if (type.equals("Independence")) {			_mainFrame.mainBase.removeIndependenceConfig(label);		} else if (type.equals("Basic")) {			_mainFrame.mainBase.removeBasicConfig(label);		}	}	//차트화면 종료하기.	public static void removeChart() {//		mainFrame.stopAll();		COMUtil.saveLastState("Chartprolastsavedata");		COMUtil._mainFrame.layout.removeAllViews();		COMUtil.unbindDrawables(COMUtil._mainFrame.layout);        //초기화면 재생성.        init(COMUtil._mainFrame.layout);        //차트 가로세로 전환 관련 코드//		_chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);		Display display = _chartMain.getWindowManager().getDefaultDisplay();		int width = display.getWidth();		int height = display.getHeight();		COMUtil.chartWidth=width;		COMUtil.chartHeight=height;	}	private static View viewUI = null;	final static int tag_ChartActivity = 0;	final static int tag_SignalActivity = 1;	final static int tag_OneclickActivity = 2;	final static int tag_JipyoContentActivity = 100;    public static void init(final RelativeLayout layout) {		LayoutInflater factory = LayoutInflater.from(_chartMain);		int layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro", "layout", COMUtil._chartMain.getPackageName());		viewUI = (View)factory.inflate(layoutResId, null);		layoutResId = COMUtil._chartMain.getResources().getIdentifier("button1", "id", COMUtil._chartMain.getPackageName());		Button button = (Button)viewUI.findViewById(layoutResId);		button.setOnClickListener(new View.OnClickListener(){	    	public void onClick(View v) {	            //차트생성	    		//차트 가로세로 전환 관련 코드	    		//_chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);	    		Display display = _chartMain.getWindowManager().getDefaultDisplay();	    		int width = display.getWidth();	    		int height = display.getHeight();	    		COMUtil.chartWidth=width;	    		COMUtil.chartHeight=height;	    		createCommonSocket("chart", layout);	    }		});		button.setOnTouchListener(				new View.OnTouchListener() {					public boolean onTouch(View v, MotionEvent event) {						switch(event.getAction()) {							case MotionEvent.ACTION_DOWN:								int layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn01_sel", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);//								 setButtonMode(button.getId());								 break;							case MotionEvent.ACTION_UP:								 layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn01", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);								 break;						}						return false;					}				}			);//		layout.addView(imgButton);		//조건검색		layoutResId = COMUtil._chartMain.getResources().getIdentifier("button2", "id", COMUtil._chartMain.getPackageName());		button = (Button)viewUI.findViewById(layoutResId);		button.setOnClickListener(new View.OnClickListener(){	    	public void onClick(View v) {	    		_chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);	    		Display display = _chartMain.getWindowManager().getDefaultDisplay();	    		int width = display.getWidth();	    		int height = display.getHeight();	    		COMUtil.chartWidth=width;	    		COMUtil.chartHeight=height;	    		createCommonSocket("");//	    		Intent intent = new Intent(_chartMain, SigFrameActivity.class);//	    		_chartMain.startActivityForResult(intent, tag_SignalActivity);	    	}		});		button.setOnTouchListener(				new View.OnTouchListener() {					public boolean onTouch(View v, MotionEvent event) {						switch(event.getAction()) {							case MotionEvent.ACTION_DOWN:								int layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn02_sel", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);//								 setButtonMode(button.getId());								 break;							case MotionEvent.ACTION_UP:								layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn02", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);								 break;						}						return false;					}				}			);//		layout.addView(imgButton);		//원클릭		layoutResId = COMUtil._chartMain.getResources().getIdentifier("button3", "id", COMUtil._chartMain.getPackageName());		button = (Button)viewUI.findViewById(layoutResId);		button.setOnClickListener(new View.OnClickListener(){	    	public void onClick(View v) {	    		_chartMain.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);	    		Display display = _chartMain.getWindowManager().getDefaultDisplay();	    		int width = display.getWidth();	    		int height = display.getHeight();	    		COMUtil.chartWidth=width;	    		COMUtil.chartHeight=height;	    		createCommonSocket("");//	    		Intent intent = new Intent(_chartMain, OneclickFrameActivity.class);//				intent.putExtra("selectRowItem", "0");//				_chartMain.startActivityForResult(intent, tag_OneclickActivity);	    	}		});		button.setOnTouchListener(				new View.OnTouchListener() {					public boolean onTouch(View v, MotionEvent event) {						switch(event.getAction()) {							case MotionEvent.ACTION_DOWN:								int layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn03_sel", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);//								 setButtonMode(button.getId());								 break;							case MotionEvent.ACTION_UP:								layoutResId = COMUtil._chartMain.getResources().getIdentifier("intro_btn03", "drawable", COMUtil._chartMain.getPackageName());								 v.setBackgroundResource(layoutResId);								 break;						}						return false;					}				}			);//		layout.addView(imgButton);		layout.addView(viewUI);    }    public static NetClient netClient = null;//    public MainFrame mainFrame = null;    //public LoadProgress progress;	public static void createChart() {		final String scode = COMUtil.symbol;		_chartMain.runOnUiThread(new Runnable() {            public void run() {        	    if(_mainFrame!=null) {        	    	_mainFrame.setUI();        	    }            }		});//		//test//		String chartData = "삼성전자                KOSDAQ    9670005     13000 -1.33    222483    971000    977000    962000    25944520110128            002000252UM=E@UD=1@RDATET=YYYYMMDD@RESETUSERREAL=1@BOUNDMARK=가격차트:1127000,833000:005930:1:980000:1@@PREVPRICE=종가:980000@@CB=종가:0|@                                                                                                                           20110128    998000   1014000    990000   1010000    383021 384604375000220110131   1009000   1010000    981000    981000    428852 424886772000520110201    982000    995000    979000    983000    269518 265789475720220110207   1002000   1004000    972000    972000    485191 478087574210520110208    970000    974000    959000    961000    610004 587749156140520110209    973000    973000    951000    960000    420301 404031269500520110210    960000    965000    935000    936000    614002 582156943470520110211    935000    943000    913000    915000    530889 491937984000520110214    928000    955000    925000    953000    391852 370052350000220110215    963000    970000    947000    958000    362193 347786554800220110216    952000    970000    945000    945000    304438 291233662530520110217    953000    963000    943000    954000    287009 273274474000220110218    965000    966000    957000    960000    205097 197164065000220110221    964000    965000    942000    948000    275361 262022609740520110222    939000    948000    934000    938000    243946 229543174000520110223    925000    941000    925000    930000    344149 320826694210520110224    926000    934000    920000    929000    362392 336067121060520110225    928000    933000    923000    926000    303972 281954187010520110228    920000    934000    920000    923000    325623 301284563000520110302    914000    923000    912000    918000    322780 296118999280520110303    919000    927000    916000    923000    362277 333530243660220110304    934000    945000    927000    945000    371501 347918173430220110307    943000    943000    906000    906000    638965 586951217950520110308    911000    912000    894000    899000    499287 450768691000520110309    906000    908000    882000    890000    527673 471726592000520110310    879000    884000    866000    866000    834229 725787412030520110311    861000    876000    860000    862000    543168 470378068640520110314    880000    901000    853000    900000    667121 586352613890220110315    901000    902000    856000    860000    727312 634469293000520110316    885000    895000    872000    886000    799142 707624949360220110317    878000    890000    868000    890000    450459 395859870640220110318    892000    895000    883000    891000    383562 341137570000220110321    891000    899000    884000    890000    290140 258855535000520110322    892000    897000    870000    875000    436722 383220456000520110323    880000    880000    859000    873000    505176 437670900000520110324    880000    888000    874000    880000    308119 271387304150220110325    892000    910000    890000    910000    622311 561467941000220110328    915000    922000    909000    916000    318215 291685787860220110329    907000    916000    900000    916000    344624 312351391000320110330    916000    929000    916000    926000    414257 382432304000220110331    936000    936000    921000    932000    527666 489592435830220110401    936000    940000    927000    940000    449733 420173916000220110404    940000    945000    939000    945000    334749 315541771000220110405    948000    948000    935000    945000    238698 224743420470320110406    940000    942000    915000    923000    550378 508211593060520110407    925000    935000    905000    909000    436076 399366872000520110408    911000    914000    895000    898000    521299 470356763830520110411    898000    907000    888000    894000    412638 368985651000520110412    886000    890000    882000    882000    316036 279708259000520110413    887000    901000    880000    901000    332860 295639846000220110414    900000    900000    884000    900000    505624 451223931000520110415    898000    899000    882000    888000    446008 394801688000520110418    891000    892000    866000    867000    549291 479931214300520110419    853000    875000    853000    875000    462304 398691503000220110420    889000    916000    886000    916000    641519 581047643800220110421    930000    937000    918000    928000    541665 503042713000220110422    924000    927000    902000    904000    377225 341990771000520110425    901000    911000    889000    889000    287621 257099312000520110426    899000    899000    880000    897000    384355 340963800000220110427    917000    927000    911000    924000    528108 487090978700220110428    924000    927000    899000    900000    416427 378680660360520110429    901000    908000    880000    893000    429874 382059985200520110502    910000    937000    904000    932000    651726 604591355000220110503    936000    940000    922000    938000    507510 474939457480220110504    930000    934000    900000    915000    515717 474411197970520110506    899000    914000    895000    899000    473222 426756551460520110509    908000    911000    891000    891000    271573 243540850000520110511    889000    895000    882000    892000    447932 397934884000220110512    886000    901000    883000    885000    552942 491893409860520110513    896000    924000    890000    916000    669154 610521571000220110516    917000    919000    898000    901000    322905 291205524000520110517    897000    898000    889000    890000    231293 206418949000520110518    893000    899000    886000    893000    331824 296334485000220110519    891000    898000    880000    880000    387733 343264787160520110520    885000    887000    880000    882000    221517 195614878780220110523    877000    885000    872000    873000    282045 246907676070520110524    872000    884000    865000    865000    290181 252602673000520110525    879000    879000    853000    856000    320945 275953523000520110526    868000    880000    865000    879000    279740 243824281260220110527    874000    899000    867000    891000    430296 382380573000220110530    895000    895000    876000    884000    205979 181582593000520110531    890000    914000    886000    902000    478089 431920119000220110601    902000    912000    895000    911000    313832 284509470000220110602    894000    897000    880000    883000    331899 294347402630520110603    890000    890000    877000    885000    201472 178231830000220110607    876000    889000    869000    887000    303586 267136034020220110608    885000    890000    875000    877000    258873 228123269000520110609    877000    879000    865000    865000    434119 377093139000520110610    870000    874000    851000    851000    392575 337888824650520110613    844000    853000    838000    853000    301387 254967818300220110614    851000    873000    848000    863000    213419 184086999000220110615    866000    869000    851000    865000    265758 228319226280220110616    853000    858000    844000    848000    239116 202842821000520110617    851000    852000    803000    819000    723027 591658371000520110620    813000    814000    795000    800000    472386 378292727000520110621    800000    820000    798000    814000    378374 306096744000220110622    824000    833000    822000    826000    330821 273659453000220110623    825000    839000    820000    831000    277391 230352648250220110624    821000    854000    821000    852000    469223 398530700000220110627    847000    847000    828000    835000    304257 253792756650520110628    840000    853000    831000    832000    239178 201272862000520110629    848000    849000    832000    833000    207146 17371956300k220110630    833000    835000    821000    826000    328339 271200105000520110701    843000    860000    838000    855000    442918 376708825430220110704    870000    883000    869000    878000    429433 377444632000220110705    880000    899000    878000    899000    422262 376402388770220110706    893000    898000    887000    898000    224722 200754737290520110707    898000    898000    879000    880000    358557 316986147510520110708    880000    888000    873000    885000    241809 213430447000220110711    880000    880000    862000    865000    320019 277461176000520110712    860000    861000    846000    850000    248144 211319033000520110713    848000    855000    836000    843000    329357 278331471000520110714    835000    835000    823000    831000    407918 337606192870520110715    830000    840000    821000    832000    273509 227113791160220110718    828000    830000    811000    813000    364738 297422966940520110719    806000    827000    806000    822000    291167 238440788400220110720    840000    854000    839000    851000    421882 357558539000220110721    846000    851000    832000    842000    206937 174120714000520110722    850000    856000    842000    850000    244517 207796778000220110725    850000    850000    834000    847000    190025 160105138000520110726    843000    851000    840000    850000    225408 190878630000220110727    848000    848000    836000    845000    201993 169892288000520110728    828000    840000    826000    837000    272890 227322620620520110729    846000    852000    837000    844000    302016 255325836920220110801    855000    875000    855000    870000    389024 337910198260220110802    853000    859000    850000    852000    269816 230440864090520110803    840000    844000    824000    833000    408465 340145234000520110804    839000    839000    815000    821000    346496 285026446590520110805    792000    805000    789000    789000    609081 484484977000520110808    770000    789000    760000    760000    607518 468889556000520110809    750000    753000    696000    724000    990040 715294567000520110810    760000    760000    720000    720000    986557 722171909000520110811    688000    725000    688000    708000    794832 560364475180520110812    721000    722000    700000    707000    677828 480217742340520110816    735000    750000    726000    750000    601622 442998336180220110817    751000    760000    741000    752000    293405 220057655000220110818    748000    749000    703000    709000    708503 507853323000520110819    688000    697000    672000    680000    580713 396428942200520110822    684000    702000    683000    691000    418952 290627485200220110823    700000    735000    699000    723000    492913 354974717660220110824    724000    735000    700000    708000    370403 263590447000520110825    737000    738000    721000    725000    381135 278593224000220110826    717000    734000    717000    726000    212815 154798119900220110829    742000    742000    724000    733000    260440 191215300000220110830    741000    748000    736000    742000    252964 188133510000220110831    747000    747000    731000    744000    290229 214644105000220110901    759000    788000    744000    771000    717411 553683953100220110902    765000    781000    763000    769000    258682 199136265000520110905    755000    756000    730000    731000    277488 205971771200520110906    726000    736000    710000    727000    264505 192183965660520110907    733000    778000    733000    773000    351504 267743152200220110908    780000    802000    778000    798000    574914 455134778810220110909    785000    812000    777000    780000    361802 286622145000520110914    780000    781000    741000    753000    551101 417965115050520110915    784000    784000    765000    771000    426593 330413671350220110916    794000    811000    792000    798000    476632 382494499800220110919    800000    814000    788000    808000    246920 198921865320220110920    811000    818000    796000    811000    281014 227671807500220110921    819000    828000    801000    813000    341563 279976029400220110922    796000    800000    778000    790000    307008 242095918000520110923    764000    780000    751000    758000    437123 335182350000520110926    760000    787000    759000    775000    480907 372873355200220110927    805000    805000    791000    804000    331600 265053077000220110928    824000    825000    791000    807000    486551 396065105000220110929    804000    848000    804000    837000    553981 459208153000220110930    830000    840000    811000    840000    516023 426734995540220111004    805000    832000    796000    828000    658616 535879422160520111005    824000    850000    817000    842000    644036 539857294000220111006    874000    879000    842000    855000    600160 522535944760220111007    865000    881000    850000    860000    530423 459548517200220111010    878000    885000    872000    874000    345316 303603150000220111011    885000    885000    869000    881000    459031 402558444500220111012    872000    899000    870000    898000    432600 379631072000220111013    898000    899000    881000    890000    325563 290235203000520111014    871000    894000    871000    886000    217319 192002736000520111017    890000    895000    881000    890000    213700 189630571000220111018    875000    893000    871000    883000    277012 244137400250520111019    885000    886000    870000    886000    214254 188293562730220111020    886000    920000    883000    907000    569192 518883157000220111021    920000    925000    907000    917000    466429 428526875910220111024    913000    943000    911000    941000    376214 351052340000220111025    936000    951000    935000    945000    365737 345409363600220111026    933000    946000    927000    934000    250360 232442802000520111027    929000    939000    919000    924000    349475 323667237000520111028    928000    946000    927000    945000    537992 504381986500220111031    941000    970000    933000    968000    476217 459146293120220111101    968000    999000    962000    990000    620094 613516877900220111102    970000    978000    966000    971000    569636 553597877000520111103    962000    971000    958000    967000    328782 316854710900520111104    983000   1005000    982000   1005000    535139 534201513500220111107    996000   1000000    986000    993000    280586 278984363000520111108    986000    990000    965000    970000    341584 333823567190520111109    970000    988000    966000    985000    386372 379130246680220111110    967000    973000    935000    935000    624218 593754998500520111111    945000    984000    930000    983000    486576 468318477900220111114    988000   1002000    987000    996000    282989 282079330000220111115    986000   1000000    980000    996000    234838 232788817400320111116    995000   1003000    973000    975000    339267 335326189000520111117    982000    992000    961000    980000    259445 253395979000220111118    971000    977000    962000    967000    222483 2153053330005";//        byte[] data = null;//        try {//        	data = chartData.getBytes("ms949");//        } catch(Exception e) {//        	return;//        }//        _mainFrame.setData(data);//        //test end		_chartMain.runOnUiThread(new Runnable() {            public void run() {        	    //SQLite에 저장된 마지막 상태값으로 설정한다.        	    boolean bool = COMUtil.setLastSaveState("Chartprolastsavedata");                if(scode!=null) setCode(scode);                if(bool==true) {                	COMUtil.sendTR("storageType");                } else {                	COMUtil.sendTR("StockType");                	COMUtil.selectedDataType="StockType";                }            }		});	}	public static void createCommonSocket(String type, RelativeLayout layout) {        String delay = "1";        COMUtil.setDelay(delay);        if(_mainFrame==null) _mainFrame = new MainFrame(_chartMain, layout);//		COMUtil.setMainFrame(_mainFrame);        _mainFrame.init();		String svr = COMUtil.SERVER_IP;// "128.134.127.187"; //dongbu server ip		String port = COMUtil.SERVER_PORT;// "8700";		if(!_mainFrame.createSocket(_chartMain, svr, port)) {//		    _chartMain.stop();		    return;		}		if(type.equals("chart")) {			createChart();		}	}	public static void createCommonSocket(String type) {//        String delay = "1";//        COMUtil.setDelay(delay);////        if(_mainFrame==null) _mainFrame = new MainFrame(_chartMain, COMUtil._mainFrame.layout);////		COMUtil.setMainFrame(_mainFrame);//        _mainFrame.init();//		String svr = COMUtil.SERVER_IP;// "128.134.127.187"; //dongbu server ip//		String port = COMUtil.SERVER_PORT;// "8700";//		if(!_mainFrame.createSocket(_chartMain, svr, port)) {//////		    _chartMain.stop();//		    return;//		}////		if(type.equals("chart")) {//			createChart();//		}	}	public static void setCode(String code) {	    if(_mainFrame!=null) _mainFrame.mainBase.setCode(code);	}	public static void reSetCode(String sCode, String fCode, String oCode, String uCode, String soCode) {		_mainFrame.reSetCode(sCode, fCode, oCode, uCode, soCode);	}	public static void onActivityResult (int requestCode, int resultCode, Intent data) {		if (resultCode == Activity.RESULT_OK)	    {	    	switch (requestCode) {	    		case tag_ChartActivity:	    			if(data==null) return;	    			String code = data.getStringExtra("selectCode");	    			String codeName = data.getStringExtra("selectCodeName");	    			COMUtil.symbol=code;	    			COMUtil.codeName = codeName;	    			setCode(code);	    			COMUtil.sendTR("S31");	    			break;		    	case tag_SignalActivity:		    	case tag_OneclickActivity:		    		if(_mainFrame!=null)		    			_mainFrame.stopAll();		    		_mainFrame = null;		    		break;		    	case tag_JipyoContentActivity:		    		break;		    	case C.FACEBOOK_AUTH_CODE:		    		COMUtil.mFacebook.authorizeCallback(requestCode, resultCode, data);		    		break;		    }	    }	    else	    {	      if (requestCode == C.FACEBOOK_AUTH_CODE)	      {	    	  COMUtil.mFacebook.authorizeCallback(requestCode, resultCode, data);	      }	    }    }	   /** 기간설정창(XML)에서 호출됨. **/    public static void setPeriodConfigFromXML(View v) {    	int tag = Integer.parseInt((String)v.getTag());//    	System.out.println("setPeriodConfigFromXML tag = " + tag);    	if(tag==8) { //분 설정화면.    		final LinearLayout periodsettingLayout = new LinearLayout(_chartMain);    		periodsettingLayout.setTag(COMUtil.PERIODSETTING_LAYOUT);    		//periodsettingLayout에 settingPeriod를 추가한다.    		//SettingPeriodView settingPeriod = new SettingPeriodView(_chartMain, periodsettingLayout);    		RelativeLayout.LayoutParams params =new RelativeLayout.LayoutParams(    				(int)COMUtil.getPixel(268), (int)COMUtil.getPixel(338));    		if(COMUtil.deviceMode.equals(COMUtil.HONEYCOMB)) {//    			params.leftMargin=v.getLeft()-params.width;//        		params.topMargin=COMUtil.mainTopMargin+(int)COMUtil.getPixel(30);    			params.addRule(RelativeLayout.CENTER_IN_PARENT);    		} else {    			params.addRule(RelativeLayout.CENTER_IN_PARENT);    		}    		periodsettingLayout.setLayoutParams(params);    		COMUtil._mainFrame.layout.addView(periodsettingLayout);    		return;    	}    	COMUtil.selectChart(tag);		LinearLayout rl = (LinearLayout)COMUtil._mainFrame.layout.findViewWithTag(COMUtil.PERIOD_LAYOUT);		if(rl==null) return;		rl.removeAllViews();		COMUtil._mainFrame.layout.removeView(rl);		COMUtil.unbindDrawables(rl);	    System.gc();	    COMUtil.isPeriodBtnState=false;    }    /** 차트설정창(XML)에서 호출됨. **/    public static void setChartFromXML(View v) {    	int tag = Integer.parseInt((String)v.getTag());    	Base11 base11 = (Base11)COMUtil._mainFrame.mainBase.baseP;    	if(tag == MENU_STYLE_BLACK || tag == MENU_STYLE_WHITE)    	{    		base11.setSkinType(tag-MENU_STYLE_BLACK);    		bIsAutoTheme = false;    		return;    	}//    	//2015. 3. 4 차트 테마 메인따라가기 추가>>    	else if(tag == MENU_STYLE_AUTO)    	{    		base11.setSkinType(COMUtil.currentTheme - MENU_STYLE_BLACK);    		bIsAutoTheme = true;    		return;    	}//    	//2015. 3. 4 차트 테마 메인따라가기 추가<<    	Vector<String> item=null;;    	String label="";		item = getChartMenu(tag);		if(item==null || item.size()==0) {			label = null;		} else {			label = (String)item.get(0);		}		if(label==null || !label.equals(COMUtil._neoChart._cvm.preSelectLabel)) {			if(COMUtil._neoChart._cvm.preMenuItem!=null) COMUtil.removeChart(COMUtil._neoChart._cvm.preMenuItem);		}		COMUtil._neoChart._cvm.preSelectLabel = label;		COMUtil._neoChart._cvm.preMenuItem = item;		COMUtil._neoChart._cvm.indicatorItem = item;		COMUtil.selectChart(tag);		//2012. 7. 17  지표유형 체크버튼 클릭하여 선택했을 떄 지표설정창 닫히지 않게 수정 - drfnkimsh//		LinearLayout rl = (LinearLayout)COMUtil._mainFrame.layout.findViewWithTag(COMUtil.INDICATOR_LAYOUT);//		if(rl==null) return;//		rl.removeAllViews();//		COMUtil._mainFrame.layout.removeView(rl);//		COMUtil.unbindDrawables(rl);//	    System.gc();//	    COMUtil.isJipyoBtnState = false;    }    //2021.03.28 by lyk - kakaopay - 외부 차트타입, 화면설정 연동 기능 >>    public static void selectChartFromOutside(int tag) {        Vector<String> item=null;;        String label="";        item = getChartMenu(tag);        if(item==null || item.size()==0) {            label = null;        } else {            label = (String)item.get(0);        }        if(label==null || !label.equals(COMUtil._neoChart._cvm.preSelectLabel)) {            if(COMUtil._neoChart._cvm.preMenuItem!=null) COMUtil.removeChart(COMUtil._neoChart._cvm.preMenuItem);        }        COMUtil._neoChart._cvm.preSelectLabel = label;        COMUtil._neoChart._cvm.preMenuItem = item;        COMUtil._neoChart._cvm.indicatorItem = item;        COMUtil.selectChart(tag);    }    //2021.03.28 by lyk - kakaopay - 외부 차트타입, 화면설정 연동 기능 <<    /**     * 2013. 8. 21  지표설정창의 차트유형/오버레이/보조지표의 가시성 컨트롤하는 함수인데, 굳이 COMUtil 에서 STATIC 함수로 호출 안해도 될 것으로 판단됨.  (이 상태가 Legacy)     * 따라서 IndicatorConfigView의 멤버함수 로 변경.  (변경후)     * **///    //2012. 7. 17  차트유형 핸들러 추가//    public static void setChartView(View v, RelativeLayout layout) {//    	//LinearLayout rl = (LinearLayout)layout.findViewWithTag(COMUtil.INDICATOR_LAYOUT);//    	LinearLayout ll = (LinearLayout)layout.findViewWithTag("indicatorView");//    	int layoutResId = v.getContext().getResources().getIdentifier("chartLayout", "id", v.getContext().getPackageName());//    	RelativeLayout rl1 = (RelativeLayout)ll.findViewById(layoutResId);//    	boolean bSelectChart = rl1.isShown();////    	boolean bSelectJipyo = rl2.isShown();//    	if (!bSelectChart) {//    		rl1.setVisibility(View.VISIBLE);////    		rl2.setVisibility(View.GONE);////    		bSelectJipyo = true;//    		bSelectChart = true;//    	} else if (bSelectChart) {//    		rl1.setVisibility(View.GONE);////    		rl2.setVisibility(View.VISIBLE);////    		bSelectJipyo = false;//    		bSelectChart = false;//    	}//    }////    //2012. 7. 17  오버레이 리스트뷰 기능 수정 -> 해당 리스트뷰의 가시성이 딴 리스트뷰(차트, 지표)에 영향주지 않음//    public static void setOverlayView(View v, RelativeLayout layout) {//    	//LinearLayout rl = (LinearLayout)layout.findViewWithTag(COMUtil.INDICATOR_LAYOUT);//    	LinearLayout ll = (LinearLayout)layout.findViewWithTag("indicatorView");//    	int layoutResId = v.getContext().getResources().getIdentifier("overlayLayout", "id", v.getContext().getPackageName());//    	RelativeLayout rl1 = (RelativeLayout)ll.findViewById(layoutResId);//    	layoutResId = v.getContext().getResources().getIdentifier("jipyoLayout", "id", v.getContext().getPackageName());////    	RelativeLayout rl2 = (RelativeLayout)ll.findViewById(layoutResId);//    	boolean bSelectOverlay = rl1.isShown();////    	boolean bSelectJipyo = rl2.isShown();//    	if (!bSelectOverlay) {//    		rl1.setVisibility(View.VISIBLE);////    		rl2.setVisibility(View.GONE);////    		bSelectJipyo = true;//    		bSelectOverlay = true;//    	} else if (bSelectOverlay) {//    		rl1.setVisibility(View.GONE);////    		rl2.setVisibility(View.VISIBLE);////    		bSelectJipyo = false;//    		bSelectOverlay = false;//    	}//    }////  //2012. 7. 17  오버레이 리스트뷰 기능 수정 -> 해당 리스트뷰의 가시성이 딴 리스트뷰(차트, 오버레이)에 영향주지 않음//    public static void setJipyoView(View v, RelativeLayout layout) {//    	//LinearLayout rl = (LinearLayout)layout.findViewWithTag(COMUtil.INDICATOR_LAYOUT);//    	LinearLayout ll = (LinearLayout)layout.findViewWithTag("indicatorView");////    	RelativeLayout rl1 = (RelativeLayout)ll.findViewById(R.id.overlayLayout);//    	int layoutResId = v.getContext().getResources().getIdentifier("jipyoLayout", "id", v.getContext().getPackageName());//    	RelativeLayout rl2 = (RelativeLayout)ll.findViewById(layoutResId);////    	boolean bSelectOverlay = rl1.isShown();//    	boolean bSelectJipyo = rl2.isShown();//    	if (!bSelectJipyo) {//    		rl2.setVisibility(View.VISIBLE);////    		rl1.setVisibility(View.GONE);//    		bSelectJipyo = true;////    		bSelectOverlay = true;//    	} else if (bSelectJipyo) {//    		// 2012. 7. 17 차트설정창 맨 아래인 '보조지표' 가 이 함수를 타는데  이 영역의 Listview를 감싸는 레이아웃을 gone 으로 하게 되면 아랫부분이 짤린다.  - drfnkimsh//    		rl2.setVisibility(View.GONE);////    		rl1.setVisibility(View.VISIBLE);//    		bSelectJipyo = false;////    		bSelectOverlay = false;//    	}//    }    public static Vector<String> getChartMenu(int id) {    	Vector<String> rtnVal = new Vector<String>();    	String tag = ""+id;    	for(int i=0; i<COMUtil.getChartListTag().size(); i++) {    		Vector<Hashtable<String, String>> v = COMUtil.getChartListTag();    		Hashtable<String, String> item = (Hashtable<String, String>)v.get(i);    		if(tag.equals(item.get("tag"))) {    			rtnVal.add(item.get("name"));    			rtnVal.add(item.get("type"));//    			rtnVal = item;    			break;    		}    	}    	return rtnVal;    }    public static String getLocalIpAddress() {    	try {    			for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();)    			{    				NetworkInterface intf = (NetworkInterface) en.nextElement();    				for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();)    				{    					InetAddress inetAddress = (InetAddress) enumIpAddr.nextElement();    					if (!inetAddress.isLoopbackAddress())    					{    						return inetAddress.getHostAddress().toString();    					}    				}    			}    		} catch (SocketException exception)    		{    			//Log.e("We got Exception here", exception.toString());    		}    	return "";    }	public static void destroy() {        if(_mainFrame!=null)        	_mainFrame.stopAll();        _mainFrame = null;        COMUtil.chartMode = COMUtil.BASIC_CHART;        System.gc();    }	public static Drawable getSmallBitmap(int id) {		InputStream is = _chartMain.getBaseContext().getResources().openRawResource(id);		Bitmap src = null;		Bitmap bitmap = null;        try {        	BitmapFactory.Options options = new BitmapFactory.Options();        	options.inSampleSize = 4;        	src = BitmapFactory.decodeStream(is, null, options);        	bitmap = Bitmap.createScaledBitmap(src, 256, 256, true);        	src.recycle();        } finally {            // Always clear and close            try {                is.close();                is = null;            } catch (IOException e) {            }        }		Drawable drawable = new BitmapDrawable(bitmap);		return drawable;	}	public static float getMeasureText(String text) {		if(textPaint==null) textPaint = new Paint();		return textPaint.measureText(text);	}	public static String getStateTitle() {		String rtnVal = "";//		rtnVal = COMUtil.codeName+"("+COMUtil.symbol+")"+" "+COMUtil.getPeriod();		String ptype = COMUtil._neoChart._cdm.codeItem.strDataType;		String unitType = COMUtil._neoChart._cdm.codeItem.strUnit;;		String period = COMUtil.getPeriod(ptype ,unitType);	    rtnVal = COMUtil._neoChart._cdm.codeItem.strName+"("+COMUtil._neoChart._cdm.codeItem.strCode +")"+" "+period;		return rtnVal;	}    //2019. 06. 25 by hyh - 서버 저장/불러오기 >>    public static String storageToCloud(Context context) {        SQLiteDatabase db = null;        Cursor cursor = null;        String rtnStr = "";        //화면별 저장된 DB를 읽어서 cloud용 string으로 변환한다.        String[] tableNames = {"domestic_multi", "overseas_multi", "fx_multi", "total_multi"};        //===========================        // 1. 화면별 최종 저장 상태        //===========================        ChartLastsaveDBHelper mChartLastSaveDBHelper = null;        String tableName = "";        String storageStr = "";        for (int i = 0; i < tableNames.length; i++) {            tableName = tableNames[i];            mChartLastSaveDBHelper = new ChartLastsaveDBHelper(context, tableName);            db = mChartLastSaveDBHelper.getWritableDatabase();            try {                cursor = db.rawQuery("SELECT * FROM " + tableName + " order by _id desc", null); //마지막 상태 저장소.(1row)                cursor.moveToPosition(0);                int curCnt = cursor.getCount();                if (curCnt < 1) {                    cursor.close();                    mChartLastSaveDBHelper.close();                    continue;                }                storageStr = storageToString(cursor);                rtnStr = rtnStr + "filename:" + tableName + "/@/" + storageStr + "@@@";                cursor.close();            }            catch (Exception e) {                e.printStackTrace();            }            finally {                db.close();                mChartLastSaveDBHelper.close();            }        }        //===========================        // 2. 화면별 저장불러오기 리스트        //===========================        ChartsaveDBHelper mChartSaveDBHelper = null;        for (int i = 0; i < tableNames.length; i++) {            tableName = tableNames[i] + "_local";            mChartSaveDBHelper = new ChartsaveDBHelper(context, tableName);            db = mChartSaveDBHelper.getWritableDatabase();            try {                cursor = db.rawQuery("SELECT * FROM " + tableName + " order by _id asc", null);                while (cursor.moveToNext()) {                    int curCnt = cursor.getCount();                    if (curCnt < 1) {                        cursor.close();                        mChartSaveDBHelper.close();                        break;                    }                    storageStr = storageToLocalString(cursor);                    rtnStr = rtnStr + "filename:" + tableName + "/@/" + storageStr + "@@@";                }                cursor.close();            }            catch (Exception e) {                e.printStackTrace();            }            finally {                db.close();                mChartSaveDBHelper.close();            }        }        //===========================        // 3. 공통설정        //===========================        tableName = "combChartSetting";        ConveniencesSaveDBHelper convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);        SQLiteDatabase dbConvenience = convenienceDBHelper.getReadableDatabase();        Cursor cursorConvenience = dbConvenience.rawQuery("SELECT * FROM " + tableName, null);        if (!cursorConvenience.moveToPosition(0)) {            cursorConvenience.close();            convenienceDBHelper.close();            dbConvenience.close();        }        else {            storageStr = "commonInfo:" + cursorConvenience.getString(1) + "/@/";            storageStr += "analInfo:" + cursorConvenience.getString(2) + "/@/";            if (COMUtil.indicatorPrefEditor != null) {                String indicatorStr = "";                Map<String, ?> allCachedEntries = COMUtil.indicatorPref.getAll();                for (String key : allCachedEntries.keySet()) {                    if (indicatorStr.length() == 0)                        indicatorStr = key + "~~~" + COMUtil.indicatorPref.getString(key, "");                    else                        indicatorStr = indicatorStr + "###" + key + "~~~" + COMUtil.indicatorPref.getString(key, "");                }                storageStr += "indicatorBaseInfo:" + indicatorStr + "/@/";            }            rtnStr = rtnStr + "filename:" + tableName + "/@/" + storageStr + "@@@";            cursorConvenience.close();            convenienceDBHelper.close();            dbConvenience.close();        }        return rtnStr;    }    public static void cloudToStorage(Context context, String data) {        if (data == null || data.equals("")) {            return;        }        //cloud의 스트링을 DB에 update한다.        String[] s = data.split("@@@");        if (s == null || s.length < 1)            return;        SQLiteOpenHelper mHelper = null;        SQLiteDatabase db = null;        Cursor cursor = null;        String sepStr = "";        String preStrFile = "";        try {            //보조메세지 분석            int nImageIndex = s.length - 2;            for (int i = 0; i < s.length; i++) {                sepStr = s[i];                String[] storageItems = sepStr.split("\\/@/");                if (storageItems == null || storageItems.length < 1)                    continue;                String strFile = storageItems[0].split(":")[1];                String itemKey = "";                String itemValue = "";                ContentValues args = new ContentValues();                int nIndex = 0;                int nLen = storageItems.length;                for (int k = 1; k < nLen; k++) {                    nIndex = nLen - k;                    String itemStr = storageItems[nIndex];                    String[] items = itemStr.split(":");                    itemKey = items[0];                    if (itemKey.equals("")) continue;                    if (items.length > 1) {                        //	        		itemValue = items[1];                        itemValue = itemStr.substring(itemKey.length() + 1);                    }                    else {                        itemValue = "";                    }                    args.put(itemKey, itemValue);                }                //===========================                // 3. 공통설정                //===========================                if (strFile.equals("combChartSetting")) {                    ConveniencesSaveDBHelper convenienceDBHelper = null;                    SQLiteDatabase dbConvenience = null;                    Cursor cursorConvenience = null;                    String tableName = strFile;                    try {                        convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);                        dbConvenience = convenienceDBHelper.getWritableDatabase();                        cursorConvenience = dbConvenience.rawQuery("SELECT * FROM " + tableName, null);                        //			int curCnt = cursorConvenience.getCount();                        if (cursorConvenience.getCount() < 0) {                            dbConvenience.execSQL("DROP TABLE IF EXISTS " + tableName);                            convenienceDBHelper.onCreate(dbConvenience);                        }                        //2016. 1. 11 종가 등락률 옵션처리 (bIsyJonggaCurrentPrice 추가), 2016.09.08 by LYH >> 오른쪽 여백 설정 기능(g_nPaddingRight)                        String strConv = args.getAsString("commonInfo");                        //2013. 9. 3 도구설정 저장/불러오기>>                        String strAnalTool = args.getAsString("analInfo");                        dbConvenience.execSQL("DELETE FROM " + tableName + " WHERE _id >=0");                        dbConvenience.execSQL("INSERT INTO " + tableName + " VALUES (null, " +                                " '" + strConv + "'," +                                " '" + strAnalTool + "'" +                                ");");                        //2013. 9. 3 도구설정 저장/불러오기>>                        dbConvenience.close();                        convenienceDBHelper.close();                        cursorConvenience.close();                        COMUtil.setLastSaveState("combChartSetting");                    } catch (Exception e) {                        try {                            dbConvenience.close();                            convenienceDBHelper.close();                            cursorConvenience.close();                        } catch (Exception e2) {                        }                    }                    String strIndicatorBaseInfo = args.getAsString("indicatorBaseInfo");                    if (COMUtil.indicatorPrefEditor != null && strIndicatorBaseInfo != null && strIndicatorBaseInfo.length() > 0) {                        String[] indicatorValues = strIndicatorBaseInfo.split("###");                        COMUtil.indicatorPrefEditor.clear();                        for (int j = 0; j < indicatorValues.length; j++) {                            String strInfo = indicatorValues[j];                            String[] arrInfo = strInfo.split("~~~");                            if (arrInfo.length > 1) {                                COMUtil.indicatorPrefEditor.putString(arrInfo[0], arrInfo[1]);                            }                        }                        //추가완료.                        COMUtil.indicatorPrefEditor.commit();                    }                    continue;                }                //===========================                // 2. 화면별 저장불러오기 리스트                //===========================                if (!preStrFile.equals(strFile)) {                    if (strFile.contains("_local")) {                        mHelper = new ChartsaveDBHelper(context, strFile);                    }                    else {                        mHelper = new ChartLastsaveDBHelper(context, strFile);                    }                    if (mHelper == null) {                        break;                    }                    db = mHelper.getWritableDatabase();                    cursor = db.rawQuery("SELECT * FROM " + strFile, null);                    if (!cursor.moveToPosition(0)) {                        db.execSQL("INSERT INTO " + strFile + " VALUES (null, " +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +    //사용안함.                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +                                " '" + "" + "'," +//count											14                                " '" + "" + "'," +//viewcount										15                                " '" + "" + "'," +  //valufOfMin									16                                " '" + "" + "'," + //graphlist                                " '" + "" + "'," + //periodConfig									18                                " '" + "" + "'," + //analinfo										19                                " '" + "" + "'," + //chartMode/skinType                                " '" + "" + "'," + //marketType									21                                " '" + "" + "'," + //2013. 1. 17 분틱주기 설정 bunperiod                                " '" + "" + "'," + //2013. 1. 17 분틱주기 설정 bunperiod                                " '" + "" + "'," +                                " '" + "" + "'," +  //2013. 1. 28 차트저장 타이틀 추가                                " '" + "" + "'," + //index                                " '" + "" + "'," + //baseline                                " '" + "" + "'," +  //commonInfo                                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                                " '" + "" + "'," +  //fxMarginTypes                                " '" + "" + "'," +  //connTypes                                " '" + "" + "'," +  //dayTypes                                " '" + "" + "'," +  //floorTypes                                " '" + "" + "'" +   //2021.02.03 by HJW - 차트저장 종목저장 여부 추가                                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                                ");");                    }                    db.execSQL("DELETE FROM " + strFile + " where _id>=0");                }                String strJipyoData = "";                if (args.getAsString("jipyodata") == null || args.getAsString("jipyodata").equals("null")) {                }                else {                    strJipyoData = args.getAsString("jipyodata");                }                String bunList = args.getAsString("bunPeriodList");                if (bunList == null || bunList.equals("") || bunList.equals("null")) {                    bunList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                }                String ticList = args.getAsString("ticPeriodList");                if (ticList == null || ticList.equals("") || ticList.equals("null")) {                    ticList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                }                String valueOfMin = args.getAsString("valueOfMin");                if (valueOfMin == null || valueOfMin.equals("") || valueOfMin.equals("null")) {                    valueOfMin = "1";                }                String viewCount = args.getAsString("viewCount");                if (viewCount == null || viewCount.equals("") || viewCount.equals("null")) {                    viewCount = "100";                }                String count = args.getAsString("count");                if (count == null || count.equals("") || count.equals("null")) {                    count = "200";                }                String chartMode = args.getAsString("chartMode");                if (chartMode == null || chartMode.equals("") || chartMode.equals("null")) {                    chartMode = "0";                }                String dataTypeName = args.getAsString("dataTypeName");                if (dataTypeName == null || dataTypeName.equals("") || dataTypeName.equals("null")) {                    dataTypeName = "2";                }                String analInfo = args.getAsString("analInfo");                if (analInfo == null || analInfo.equals("") || analInfo.equals("null") || dataTypeName.equals("0") || dataTypeName.equals("1")) {                    analInfo = "";                }                String divideInfo = args.getAsString("divideInfo");                if (divideInfo == null || divideInfo.equals("") || divideInfo.equals("null")) {                    divideInfo = "";                }                String saveTitleName = args.getAsString("saveTitleName");                if (saveTitleName == null || saveTitleName.equals("") || saveTitleName.equals("null")) {                    saveTitleName = "";                }                String baseLineInfo = args.getAsString("baseline");                if (baseLineInfo == null || baseLineInfo.equals("") || baseLineInfo.equals("null")) {                    baseLineInfo = "";                }                String commonInfo = args.getAsString("commonInfo");                if (commonInfo == null || commonInfo.equals("") || commonInfo.equals("null")) {                    commonInfo = "";                }                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                String fxMarginTypes = args.getAsString("fxMarginTypes");                if (fxMarginTypes == null || fxMarginTypes.equals("") || fxMarginTypes.equals("null")) {                    fxMarginTypes = "";                }                String connTypes = args.getAsString("connTypes");                if (connTypes == null || connTypes.equals("") || connTypes.equals("null")) {                    connTypes = "";                }                String dayTypes = args.getAsString("dayTypes");                if (dayTypes == null || dayTypes.equals("") || dayTypes.equals("null")) {                    dayTypes = "";                }                String floorTypes = args.getAsString("floorTypes");                if (fxMarginTypes == null || floorTypes.equals("") || floorTypes.equals("null")) {                    floorTypes = "";                }                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                String isSavedJongmok = args.getAsString("isSavedJongmok");                if (isSavedJongmok == null || isSavedJongmok.equals("") || isSavedJongmok.equals("null")) {                    isSavedJongmok = "";                }                db.execSQL("INSERT INTO " + strFile + " VALUES (null, " +                        " '" + divideInfo + "'," +                        " '" + "" + "'," +                        " '" + args.getAsString("savedate") + "'," +                        " '" + "" + "'," +                        " '" + args.getAsString("addJipyo") + "'," +                        " '" + args.getAsString("codeName") + "'," +                        " '" + args.getAsString("title") + "'," +                        " '" + args.getAsString("detail") + "'," +                        " '" + "" + "'," +                        " '" + args.getAsString("symbol") + "'," +                        " '" + args.getAsString("lcode") + "'," +                        " '" + args.getAsString("apCode") + "'," +                        " '" + dataTypeName + "'," +                        " '" + count + "'," +//count                        " '" + viewCount + "'," +//viewcount                        " '" + valueOfMin + "'," +  //valufOfMin                        " '" + strJipyoData + "'," + //graphlist                        " '" + "" + "'," + //not use                        " '" + analInfo + "'," + //analinfo                        " '" + chartMode + "'," + //chartMode/skinType                        " '" + args.getAsString("market") + "'," + //marketType                        " '" + bunList + "'," + //분 주기 데이터                        " '" + ticList + "'," + //틱 주기 데이터                        " '" + args.getAsString("marketName") + "'," + //marketName(stock,elw. etc)                        " '" + saveTitleName + "'," +  //2013. 1. 28 사용자입력 저장하기 타이틀                        " '" + "" + "'," + // index                        " ''," + //baseline //2019. 08. 21 by hyh - 자동추세선 복원                        " '" + commonInfo + "'," +    //  :1/1/1/1/1/1/1/1/                        //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                        " '" + fxMarginTypes + "'," +                        " '" + connTypes + "'," +                        " '" + dayTypes + "'," +                        " '" + floorTypes + "'," +                        //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                        " '" + isSavedJongmok + "'" + //2021.02.03 by HJW - 차트저장 종목저장 여부 추가                        ");");                preStrFile = strFile;            }        } catch (Exception e) {            e.printStackTrace();            cursor.close();            mHelper.close();            db.close();            return;        }        if (cursor != null) {    //2016.12.05 by LYH >> 저장한 리스트가 없는 경우 예외처리            cursor.close();            mHelper.close();            db.close();        }    }    //2019. 06. 25 by hyh - 서버 저장/불러오기 <<	public static String storageToCloud(Context context, String type) {		ChartLastsaveDBHelper mHelper=null;		SQLiteDatabase db = null;		Cursor cursor = null;		String rtnStr = "";		//화면별 저장된 DB를 읽어서 cloud용 string으로 변환한다.		String[] tableNames = {"stock", "elw", "etf", "future", "total", "total_future", "compare"};		String[] tableNames_multi = {"multi"};		if(type==null) {	//		System.out.println("DEBUG_COMUtil.bIsMulti:"+COMUtil.bIsMulti);			if(COMUtil.bIsMulti) {				tableNames = tableNames_multi;			}		} else if(type.equals("stock")) {		} else if(type.equals("multi")) {			tableNames = tableNames_multi;		} else {		}//		System.out.println("DEBUG_tableNames:"+tableNames[0]);		String tableName = "";		String storageStr = "";		for(int i=0; i<tableNames.length; i++) {			tableName = tableNames[i];	        mHelper = new ChartLastsaveDBHelper(context, tableName);	        db = mHelper.getWritableDatabase();	        cursor = db.rawQuery("SELECT * FROM "+tableName + " order by _id desc", null); //마지막 상태 저장소.(1row)	        cursor.moveToPosition(0);	        int curCnt = cursor.getCount();	        if(curCnt<1) {				cursor.close();				mHelper.close();	        	continue;	        }	        storageStr = storageToString(cursor);	        rtnStr = rtnStr+"filename:"+tableName+"/@/"+storageStr+"@@@";			cursor.close();			mHelper.close();		}		return rtnStr;	}	public static String storageToLocalCloud(Context context) {		ChartsaveDBHelper mHelper=null;		SQLiteDatabase db = null;		Cursor cursor = null;		String rtnStr = "";		//화면별 저장된 DB를 읽어서 cloud용 string으로 변환한다.		String tableName = COMUtil._mainFrame.strLocalFileName;		if(tableName==null && !tableName.equals(""))			return "";		String storageStr = "";        mHelper = new ChartsaveDBHelper(context, tableName);        if(mHelper==null) {            return "";        }        db = mHelper.getWritableDatabase();        cursor = db.rawQuery("SELECT * FROM "+tableName + " order by _id asc", null); //마지막 상태 저장소.(1row)        int nImageIndex=cursor.getCount()-1;        while(cursor.moveToNext()) {            int curCnt = cursor.getCount();            if(curCnt<1) {                cursor.close();                mHelper.close();                break;            }            storageStr = storageToLocalString(cursor);            rtnStr = rtnStr+"filename:"+tableName+"/@/"+storageStr+"@@@";            //saveTitleName            String strServerImage = strAppPath+"chart/MTS_" + nImageIndex+".jpg";            String strImageFile = cursor.getString(9);            copyImage(strImageFile, strServerImage);            nImageIndex--;        }        cursor.close();        mHelper.close();        //2016.10.19 by LYH >> 서버저장 불러오기 차트 설정 처리        tableName = "combChartSetting";        ConveniencesSaveDBHelper convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);        SQLiteDatabase dbConvenience = convenienceDBHelper.getReadableDatabase();        Cursor cursorConvenience = dbConvenience.rawQuery("SELECT * FROM "+tableName, null);        if(!cursorConvenience.moveToPosition(0)) {            cursorConvenience.close();            convenienceDBHelper.close();            dbConvenience.close();        }        else {            storageStr = "commonInfo:"+ cursorConvenience.getString(1)+"/@/";            storageStr += "analInfo:"+ cursorConvenience.getString(2)+"/@/";            if(COMUtil.indicatorPrefEditor != null)            {                String indicatorStr = "";                Map<String, ?> allCachedEntries = COMUtil.indicatorPref.getAll();                for (String key : allCachedEntries.keySet()) {                    if(indicatorStr.length()== 0)                        indicatorStr = key + "~~~"+ COMUtil.indicatorPref.getString(key,"");                    else                        indicatorStr = indicatorStr + "###" + key + "~~~"+ COMUtil.indicatorPref.getString(key,"");                }                storageStr += "indicatorBaseInfo:"+ indicatorStr+"/@/";            }            rtnStr = rtnStr+"filename:"+tableName+"/@/"+storageStr+"@@@";            cursorConvenience.close();            convenienceDBHelper.close();            dbConvenience.close();        }        //2016.10.19 by LYH << 서버저장 불러오기 차트 설정 처리		return rtnStr;	}    public static void copyImage(String strImage, String strCopyImage)    {        Bitmap myBitmap = BitmapFactory.decodeFile(strImage);        if(myBitmap !=null) {            File file = new File(strCopyImage);            if(!file.exists()) {                String strDstFolder = file.getParent();                if(strDstFolder != null)                {                    File f = new File(strDstFolder);                    f.mkdirs();                }            }            FileOutputStream out = null;            try {                out = new FileOutputStream(strCopyImage);                myBitmap.compress(Bitmap.CompressFormat.JPEG, 20, out);            } catch (FileNotFoundException e) {            } finally {                try {                    if (out != null)                        out.close();                } catch (IOException e) {                    e.printStackTrace();                }            }        }    }	public static String storageToString(Cursor cursor) {		String rtnStr="";		try {			//divideInfo			rtnStr += "divideInfo:"+ cursor.getString(1)+"/@/";			//chartMode			rtnStr += "chartMode:"+ cursor.getString(20)+"/@/";			//symbol			rtnStr += "symbol:"+ cursor.getString(10)+"/@/";			//lcode			rtnStr += "lcode:"+ cursor.getString(11)+"/@/";			//dataTypeName			rtnStr += "dataTypeName:"+ cursor.getString(13)+"/@/";			//count			rtnStr += "count:"+ cursor.getString(14)+"/@/";			//viewCount			rtnStr += "viewCount:"+ cursor.getString(15)+"/@/";			//valueOfMin			rtnStr += "valueOfMin:"+ cursor.getString(16)+"/@/";			//apCode			rtnStr += "apCode:"+ cursor.getString(12)+"/@/";			//market			rtnStr += "market:"+ cursor.getString(21)+"/@/";			//marketName			rtnStr += "marketName:"+ cursor.getString(24)+"/@/";			//bunPeriodList			rtnStr += "bunPeriodList:"+ cursor.getString(22)+"/@/";			//ticPeriodList			rtnStr += "ticPeriodList:"+ cursor.getString(23)+"/@/";			//graphList(jipyodata)			rtnStr += "jipyodata:"+ cursor.getString(17)+"/@/";			//analInfo(analInfo) - 분,틱일 경우 추세선은 클라우드에 저장되지 않음.			if(!dataTypeName.equals("0") && !dataTypeName.equals("1")) {				rtnStr += "analInfo:"+ cursor.getString(19)+"/@/";			}  else {				rtnStr += "analInfo:"+"/@/";			}            //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>            rtnStr += "fxMarginTypes:" + cursor.getString(29) + "/@/";            rtnStr += "connTypes:" + cursor.getString(30) + "/@/";            rtnStr += "dayTypes:" + cursor.getString(31) + "/@/";            rtnStr += "floorTypes:" + cursor.getString(32) + "/@/";            //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<            rtnStr += "isSavedJongmok:" + cursor.getString(33) + ""; //2021.02.03 by HJW - 차트저장 종목저장 여부 추가		} catch(Exception e) {//			System.out.println(e.getMessage());		}		return rtnStr;	}	/*	 * 				" divideinfo TEXT," + 1		 		" verinfo TEXT," + 2		 		" savedate TEXT," + 3		 		" userid TEXT," + 4		 		" userip TEXT," + 5		 		" codename TEXT," + 6		 		" title TEXT," + 7		 		" detail TEXT," + 8				" fileName TEXT," + 9				" symbol TEXT," + 10				" lcode TEXT," + 11				" apCode TEXT," + 12				" dataTypeName TEXT, \" + 13 				" count TEXT," + 14				" viewCount TEXT," + 15				" valueOfMin TEXT," + 16				" jipyodata TEXT," + 17				" chartItem TEXT," + 18				" analInfo TEXT,"+ 19				" chartMode int,"+ 20				" market int,"+ 21				" bunPeriodList TET,"+ //2013. 1. 17 분틱주기 설정 22				" ticPeriodList TEXT,"+ //2013. 1. 17 분틱주기 설정 23				" marketName TEXT,"+  24				" saveTitleName TEXT"+ / /2013. 1. 28 차트저장 타이틀 추가   25	 */	public static String storageToLocalString(Cursor cursor) {		String rtnStr="";		try {			//savedate			rtnStr += "savedate:"+ cursor.getString(3)+"/@/";			//title			rtnStr += "title:"+ cursor.getString(7)+"/@/";			//saveTitleName			rtnStr += "saveTitleName:"+ cursor.getString(25)+"/@/";			//detail			rtnStr += "detail:"+ cursor.getString(8)+"/@/";			//divideInfo			rtnStr += "divideInfo:"+ cursor.getString(1)+"/@/";			//chartMode			rtnStr += "chartMode:"+ cursor.getString(20)+"/@/";			//symbol			rtnStr += "symbol:"+ cursor.getString(10)+"/@/";            //codeName            rtnStr += "codeName:"+ cursor.getString(6)+"/@/";			//lcode			rtnStr += "lcode:"+ cursor.getString(11)+"/@/";			//dataTypeName			rtnStr += "dataTypeName:"+ cursor.getString(13)+"/@/";			//count			rtnStr += "count:"+ cursor.getString(14)+"/@/";			//viewCount			rtnStr += "viewCount:"+ cursor.getString(15)+"/@/";			//valueOfMin			rtnStr += "valueOfMin:"+ cursor.getString(16)+"/@/";			//apCode			rtnStr += "apCode:"+ cursor.getString(12)+"/@/";			//market			rtnStr += "market:"+ cursor.getString(21)+"/@/";			//marketName			rtnStr += "marketName:"+ cursor.getString(24)+"/@/";            //marketName            rtnStr += "addJipyo:"+ cursor.getString(5)+"/@/";			//bunPeriodList			rtnStr += "bunPeriodList:"+ cursor.getString(22)+"/@/";			//ticPeriodList			rtnStr += "ticPeriodList:"+ cursor.getString(23)+"/@/";			//graphList(jipyodata)			rtnStr += "jipyodata:"+ cursor.getString(17)+"/@/";			//analInfo(analInfo) - 분,틱일 경우 추세선은 클라우드에 저장되지 않음.			if(!dataTypeName.equals("0") && !dataTypeName.equals("1")) {				rtnStr += "analInfo:"+ cursor.getString(19);			} else {				rtnStr += "analInfo:"+ "";			}            //baseline            rtnStr += "baseline:"+ cursor.getString(27)+"/@/";            //commonInfo            rtnStr += "commonInfo:"+ cursor.getString(28) + "/@/";//			System.out.println("analInfo:"+cursor.getString(19));            //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>            rtnStr += "fxMarginTypes:" + cursor.getString(29) + "/@/";            rtnStr += "connTypes:" + cursor.getString(30) + "/@/";            rtnStr += "dayTypes:" + cursor.getString(31) + "/@/";            rtnStr += "floorTypes:" + cursor.getString(32) + "/@/";            //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<            rtnStr += "isSavedJongmok:" + cursor.getString(33) + ""; //2021.02.03 by HJW - 차트저장 종목저장 여부 추가//            String fileName = cursor.getString(9);//            Bitmap myBitmap = BitmapFactory.decodeFile(fileName);//            FileOutputStream out = null;//            try {//                out = new FileOutputStream(imgFilePath);//                myBitmap.compress(Bitmap.CompressFormat.JPEG, 20, out);//            } catch (FileNotFoundException e) {//            }//            finally//            {//                try//                {//                    if(out!=null)//                        out.close();//                }//                catch (IOException e)//                {//                    e.printStackTrace();//                }//            }		} catch(Exception e) {			return "";//			System.out.println(e.getMessage());		}		return rtnStr;	}	//차트목록	public static boolean cloudToLocalStorage(Context context, String data) {		if(data==null || data.equals("")) {			return false;		}		//cloud의 스트링을 DB에 update한다.		String[] s = data.split("@@@");		if(s==null || s.length<1)			return false;		ChartsaveDBHelper mHelper=null;//		CompareChartLastsaveDBHelper mHelperCompare=null;		SQLiteDatabase db = null;		Cursor cursor = null;        String sepStr="";        String preStrFile = "";        try {        //보조메세지 분석            int nImageIndex=s.length-2;            for(int i=0; i<s.length; i++) {                sepStr = s[i];                String[] storageItems = sepStr.split("\\/@/");                if(storageItems==null || storageItems.length<1)                    continue;                String strFile = storageItems[0].split(":")[1];                String itemKey="";                String itemValue="";                ContentValues args = new ContentValues();    //        	db.execSQL("DELETE FROM "+strFile+" WHERE _id >=0");                int nIndex = 0;                int nLen = storageItems.length;                for(int k=1; k<nLen; k++) {                    nIndex = nLen-k;                    String itemStr = storageItems[nIndex];                    String[] items = itemStr.split(":");                    itemKey = items[0];                    if(itemKey.equals("")) continue;                    if(items.length>1) {    //	        		itemValue = items[1];                        itemValue = itemStr.substring(itemKey.length()+1);                    } else {                        itemValue = "";                    }    //	        	System.out.println(">>>cloudToLocalStorage>>>>itemKeyValue:"+itemKey+"  "+itemValue+";");                    args.put(itemKey, itemValue);                }                //2016.10.19 by LYH >> 서버저장 불러오기 차트 설정 처리                if(strFile.equals("combChartSetting"))                {                    ConveniencesSaveDBHelper convenienceDBHelper=null;                    SQLiteDatabase dbConvenience = null;                    Cursor cursorConvenience = null;                    String tableName = strFile;                    try                    {                        convenienceDBHelper = new ConveniencesSaveDBHelper(_chartMain, tableName);                        dbConvenience = convenienceDBHelper.getWritableDatabase();                        cursorConvenience = dbConvenience.rawQuery("SELECT * FROM "+tableName, null);                        //			int curCnt = cursorConvenience.getCount();                        if(cursorConvenience.getCount()<0) {                            dbConvenience.execSQL("DROP TABLE IF EXISTS "+tableName);                            convenienceDBHelper.onCreate(dbConvenience);                        }                        //2016. 1. 11 종가 등락률 옵션처리 (bIsyJonggaCurrentPrice 추가), 2016.09.08 by LYH >> 오른쪽 여백 설정 기능(g_nPaddingRight)                        String strConv = args.getAsString("commonInfo");                        //2013. 9. 3 도구설정 저장/불러오기>>                        String strAnalTool = args.getAsString("analInfo");                        dbConvenience.execSQL("DELETE FROM "+tableName+" WHERE _id >=0");                        dbConvenience.execSQL("INSERT INTO "+tableName+" VALUES (null, " +                                " '"+strConv+"'," +                                " '"+strAnalTool+"'"  +                                ");");                        //2013. 9. 3 도구설정 저장/불러오기>>                        dbConvenience.close();                        convenienceDBHelper.close();                        cursorConvenience.close();                        COMUtil.setLastSaveState("combChartSetting");                    }catch(Exception e)                    {                        try                        {                            dbConvenience.close();                            convenienceDBHelper.close();                            cursorConvenience.close();                        }catch(Exception e2)                        {                        }                    }                    String strIndicatorBaseInfo = args.getAsString("indicatorBaseInfo");                    if(COMUtil.indicatorPrefEditor != null && strIndicatorBaseInfo != null && strIndicatorBaseInfo.length()>0)                    {                        String[] indicatorValues = strIndicatorBaseInfo.split("###");                        COMUtil.indicatorPrefEditor.clear();                        for(int j=0; j<indicatorValues.length;j++)                        {                            String strInfo = indicatorValues[j];                            String[] arrInfo = strInfo.split("~~~");                            if(arrInfo.length>1)                            {                                COMUtil.indicatorPrefEditor.putString(arrInfo[0], arrInfo[1]);                            }                        }                        //추가완료.                        COMUtil.indicatorPrefEditor.commit();                    }                    continue;                }                //2016.10.19 by LYH << 서버저장 불러오기 차트 설정 처리                if(!preStrFile.equals(strFile)) {                    mHelper = new ChartsaveDBHelper(context, strFile);                    if(mHelper==null) {                        break;                    }                    db = mHelper.getWritableDatabase();                    cursor = db.rawQuery("SELECT * FROM "+strFile, null);                    if(!cursor.moveToPosition(0)) {                        db.execSQL("INSERT INTO "+strFile+" VALUES (null, " +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +    //사용안함.                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +                                " '"+""+"'," +//count											14                                " '"+""+"'," +//viewcount										15                                " '"+""+"'," +  //valufOfMin									16                                " '"+""+"'," + //graphlist                                " '"+""+"'," + //periodConfig									18                                " '"+""+"'," + //analinfo										19                                " '"+""+"'," + //chartMode/skinType                                " '"+""+"'," + //marketType									21                                " '"+""+"'," + //2013. 1. 17 분틱주기 설정 bunperiod                                " '"+""+"'," + //2013. 1. 17 분틱주기 설정 bunperiod                                " '"+""+"'," +                                " '"+""+"'," +  //2013. 1. 28 차트저장 타이틀 추가                                " '"+""+"'," + //index                                " '"+""+"'," + //baseline                                " '"+""+"'," +  //commonInfo                                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                                " '"+""+"'," +  //fxMarginTypes                                " '"+""+"'," +  //connTypes                                " '"+""+"'," +  //dayTypes                                " '"+""+"'," +  //floorTypes                                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                                " '"+""+"'" + //2021.02.03 by HJW - 차트저장 종목저장 여부 추가                                        ");");        //	    		cursor = db.rawQuery("SELECT * FROM "+strFile, null);                    }                    db.execSQL("DELETE FROM "+strFile+" where _id>=0");                }                //클라우드에선 추세선 복원은 하지 않는다.                /*                 * 			//savedate                rtnStr += "savedate:"+ cursor.getString(3)+"@";                //title                rtnStr += "title:"+ cursor.getString(7)+"@";                //detail                rtnStr += "detail:"+ cursor.getString(8)+"@";                 */    //	        db.execSQL("UPDATE "+strFile+" SET " +    //	        "divideInfo='"+args.getAsString("divideInfo")+"'," +    //	        "savedate='"+args.getAsString("savedate")+"'," +    //	        "title='"+args.getAsString("title")+"'," +    //	        "saveTitleName='"+args.getAsString("saveTitleName")+"'," +    //	        "detail='"+args.getAsString("detail")+"'," +    //	        "symbol='"+args.getAsString("symbol")+"'," +    //	        "lcode='"+args.getAsString("lcode")+"'," +    //	        "apCode='"+args.getAsString("apCode")+"'," +    //	        "dataTypeName='"+args.getAsString("dataTypeName")+"'," +    //	        "jipyodata='"+args.getAsString("jipyodata")+"' ,"+    //	        "chartMode='"+args.getAsString("chartMode")+"' "    //	        );    //	        "viewCount='"+args.getAsString("viewCount")+"'," +    //	        "valueOfMin='"+args.getAsString("valueOfMin")+"'," +    //	        "market='"+args.getAsString("market")+"'," +    //	        "marketName='"+args.getAsString("marketName")+"'," +                String strJipyoData = "";                if(args.getAsString("jipyodata")==null || args.getAsString("jipyodata").equals("null")) {                } else {                    strJipyoData = args.getAsString("jipyodata");                }    //	        System.out.println("bunTicListBUN_local:"+args.getAsString("bunPeriodList"));    //	        System.out.println("bunTicListTIC_local:"+args.getAsString("ticPeriodList"));                String bunList = args.getAsString("bunPeriodList");                if(bunList==null || bunList.equals("") || bunList.equals("null")) {                    bunList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                }                String ticList = args.getAsString("ticPeriodList");                if(ticList==null || ticList.equals("") || ticList.equals("null")) {                    ticList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                }    //	        System.out.println("bunTicListBUN_local:"+bunList);    //	        System.out.println("bunTicListTIC_local:"+ticList);                String valueOfMin = args.getAsString("valueOfMin");                if(valueOfMin==null || valueOfMin.equals("") || valueOfMin.equals("null")) {                    valueOfMin = "1";                }                String viewCount = args.getAsString("viewCount");                if(viewCount==null || viewCount.equals("") || viewCount.equals("null")) {                    viewCount = "100";                }                String count = args.getAsString("count");                if(count==null || count.equals("") || count.equals("null")) {                    count = "200";                }                String chartMode = args.getAsString("chartMode");                if(chartMode==null || chartMode.equals("") || chartMode.equals("null")) {                    chartMode = "0";                }                String dataTypeName = args.getAsString("dataTypeName");                if(dataTypeName==null || dataTypeName.equals("") || dataTypeName.equals("null")) {                    dataTypeName = "2";                }                String analInfo = args.getAsString("analInfo");                if(analInfo==null || analInfo.equals("") || analInfo.equals("null") || dataTypeName.equals("0") || dataTypeName.equals("1")) {                    analInfo = "";                }                String divideInfo = args.getAsString("divideInfo");                if(divideInfo==null || divideInfo.equals("") || divideInfo.equals("null")) {                    divideInfo = "";                }                String saveTitleName = args.getAsString("saveTitleName");                if(saveTitleName==null || saveTitleName.equals("") || saveTitleName.equals("null")) {                    saveTitleName = "";                }                String baseLineInfo = args.getAsString("baseline");                if(baseLineInfo==null || baseLineInfo.equals("") || baseLineInfo.equals("null")) {                    baseLineInfo = "";                }                String commonInfo = args.getAsString("commonInfo");                if(commonInfo==null || commonInfo.equals("") || commonInfo.equals("null")) {                    commonInfo = "";                }                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                String fxMarginTypes = args.getAsString("fxMarginTypes");                if(fxMarginTypes==null || fxMarginTypes.equals("") || fxMarginTypes.equals("null")) {                    fxMarginTypes = "";                }                String connTypes = args.getAsString("connTypes");                if(connTypes==null || connTypes.equals("") || connTypes.equals("null")) {                    connTypes = "";                }                String dayTypes = args.getAsString("dayTypes");                if(dayTypes==null || dayTypes.equals("") || dayTypes.equals("null")) {                    dayTypes = "";                }                String floorTypes = args.getAsString("floorTypes");                if(fxMarginTypes==null || floorTypes.equals("") || floorTypes.equals("null")) {                    floorTypes = "";                }                //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                String isSavedJongmok = args.getAsString("isSavedJongmok");                if(isSavedJongmok==null || isSavedJongmok.equals("") || isSavedJongmok.equals("null")) {                    isSavedJongmok = "";                }    //            String strServerImage = strAppPath+"chart/" + saveTitleName+".jpg";                String strServerImage = strAppPath+"chart/MTS_" + nImageIndex+".jpg";                String strImageFile = strAppPath+"user/chart/"+saveTitleName+".jpg";                nImageIndex--;                copyImage(strServerImage, strImageFile);                db.execSQL("INSERT INTO "+strFile+" VALUES (null, " +                        " '"+divideInfo+"'," +                        " '"+""+"'," +                        " '"+args.getAsString("savedate")+"'," +                        " '"+""+"'," +                        " '"+args.getAsString("addJipyo")+"'," +                        " '"+args.getAsString("codeName")+"'," +                        " '"+args.getAsString("title")+"'," +                        " '"+args.getAsString("detail")+"'," +                        " '"+strImageFile+"'," +                        " '"+args.getAsString("symbol")+"'," +                        " '"+args.getAsString("lcode")+"'," +                        " '"+args.getAsString("apCode")+"'," +                        " '"+dataTypeName+"'," +                        " '"+count+"'," +//count                        " '"+viewCount+"'," +//viewcount                        " '"+valueOfMin+"'," +  //valufOfMin                        " '"+strJipyoData+"'," + //graphlist                        " '"+""+"'," + //not use                        " '"+analInfo+"'," + //analinfo                        " '"+chartMode+"'," + //chartMode/skinType                        " '"+args.getAsString("market")+"'," + //marketType                        " '"+bunList+"'," + //분 주기 데이터                        " '"+ticList+"'," + //틱 주기 데이터                        " '"+args.getAsString("marketName")+"'," + //marketName(stock,elw. etc)                        " '"+saveTitleName+"'," +  //2013. 1. 28 사용자입력 저장하기 타이틀                        " '"+""+"'," + // index                        " '"+baseLineInfo+"'," + //                        " '"+commonInfo+"'," +  	//  :1/1/1/1/1/1/1/1/                        //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>                        " '"+fxMarginTypes+"'," +                        " '"+connTypes+"'," +                        " '"+dayTypes+"'," +                        " '"+floorTypes+"'," +                        //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<                        " '"+isSavedJongmok+"'" +                                ");");                preStrFile = strFile;    //			System.out.println("..........클라우드 "+strFile+" 복원완료 !!!");            }        } catch (Exception e) {            e.printStackTrace();    		cursor.close();    		mHelper.close();    		db.close();        	return false;        }        if(cursor != null) {    //2016.12.05 by LYH >> 저장한 리스트가 없는 경우 예외처리            cursor.close();            mHelper.close();            db.close();        }        return true;	}    //HTS 클라우드 설정 변환    public static boolean cloudToLocalStorage_HTS(Context context, String strDataList) {        ChartsaveDBHelper mHelper=null;        SQLiteDatabase db = null;        Cursor cursor = null;        String data = "";        //String strFile = "userChart_HTS";        String strFile = "common_local_hts";        //String index = "";        String[] storageList = strDataList.split("@@@");        int index = 0;        String saveTitleName="";        for(int i=storageList.length-1; i>=0; i--) {            data = storageList[i];            //strFile = list.get(i).get("strFileName");            //index = list.get(i).get("key");            index = i;            if(mHelper == null) {                mHelper = new ChartsaveDBHelper(context, strFile); //EX)strFile:multi_local_hts                db = mHelper.getWritableDatabase();                db.execSQL("DELETE FROM "+strFile+" where _id>=0");            }            if(data==null || data.equals("")) {                continue;//				db.execSQL("DELETE FROM "+strFile+" where _id>=0");////				mHelper.close();//				db.close();////				return false;            }            String[] storageItems = data.split("\\/@/");//		        db.execSQL("DELETE FROM "+strFile+" where listNo=="+index);            String itemKey="";            String itemValue="";            ContentValues args = new ContentValues();            int nIndex = 0;            int nLen = storageItems.length;            String[] saveTitleNameInfos = storageItems[0].split("\\/@");//            if(saveTitleNameInfos.length<2)//                continue;;            if(saveTitleNameInfos!=null && saveTitleNameInfos[0].length()>10) {                String strTempData[] = saveTitleNameInfos[0].split(":");                if(strTempData!=null && strTempData.length>0)                    saveTitleName = strTempData[1];            }            else            {                continue;            }            String strTimeInfo = "";            String[] timeInfos = storageItems[0].split("-");            if(timeInfos!=null && timeInfos.length>0) {                strTimeInfo = timeInfos[0];                if(strTimeInfo.length()==12) {                    try {                        strTimeInfo = /*strTimeInfo.substring(0, 4)+"/"+*/strTimeInfo.substring(4, 6)+"/"+strTimeInfo.substring(6, 8)+" "+                                strTimeInfo.substring(8, 10)+":"+strTimeInfo.substring(10, 12);                    } catch (Exception e) {                    }                }            }            for(int k=1; k<nLen; k++) {                nIndex = nLen-k;                String itemStr = storageItems[nIndex];                String[] items = itemStr.split(":");                itemKey = items[0];                if(itemKey.equals("")) continue;                if(items.length>1) {                    itemValue = itemStr.substring(itemKey.length()+1);                } else {                    itemValue = "";                }                args.put(itemKey, itemValue);            }            String strJipyoData = "";            String strAddJipyo="";            if(args.getAsString("jipyodata")==null || args.getAsString("jipyodata").equals("null")) {            } else {                strJipyoData = args.getAsString("jipyodata");                //2016.11.19 by LYH >> HTS 복수지표 불러오기.                Vector<Hashtable<String, String>>  jipyoItems = (Vector<Hashtable<String, String>>)COMUtil.getJipyoMenu().clone();                String strJipyo;                String strName;                char strIndex;                String[] jipyodata = strJipyoData.split("\\~");                String str="";                //2016.12.02 by LYH >> Parablolic Sar, Bollinger Band 지표 변수값 *100 처리                String[] arrValue;                String strValue;                //2016.12.02 by LYH >> Parablolic Sar, Bollinger Band 지표 변수값 *100 처리 end                for(int j=0; j<jipyodata.length; j++)                {                    strJipyo = jipyodata[j];                    String[] arrTemp = strJipyo.split("\\{");                    strJipyo = arrTemp[0];                    //2016.12.02 by LYH >> Parablolic Sar, Bollinger Band 지표 변수값 *100 처리                    if(arrTemp.length>1)                    {                        if(strJipyo.equals("Bollinger Band") || strJipyo.equals("Band %B"))                        {                            arrValue = arrTemp[1].split("=");                            if(arrValue.length>2)                            {                                strValue = String.format("%s=%.0f", arrValue[0], Double.parseDouble(arrValue[1])*100);                                for(int k=2; k<arrValue.length; k++)                                {                                    strValue =String.format("%s=%s", strValue, arrValue[k]);                                }                                strValue = String.format("%s{%s", strJipyo, strValue);                                strJipyoData = strJipyoData.replace(jipyodata[j], strValue);                            }                        }                        if(strJipyo.equals("Parabolic SAR") || strJipyo.equals("Parabolic SAR 신호") || strJipyo.equals("Parabolic SAR 강세약세"))    //2017.05.11 by LYH >> 전략(신호, 강약) 추가                        {                            arrValue = arrTemp[1].split("=");                            if(arrValue.length>2)                            {                                strValue = String.format("%.0f=%.0f", Double.parseDouble(arrValue[1])*100, Double.parseDouble(arrValue[0])*100);                                for(int k=2; k<arrValue.length; k++)                                {                                    strValue =String.format("%s=%s", strValue, arrValue[k]);                                }                                strValue = String.format("%s{%s", strJipyo, strValue);                                strJipyoData = strJipyoData.replace(jipyodata[j], strValue);                            }                        }                    }                    //2016.12.02 by LYH >> Parablolic Sar, Bollinger Band 지표 변수값 *100 처리 end                    if(strJipyo.endsWith("*1") || strJipyo.endsWith("*2")                    || strJipyo.endsWith("*3") || strJipyo.endsWith("*4") || strJipyo.endsWith("*5"))                    {                        for(int k=0; k<jipyoItems.size(); k++)                        {                            Hashtable<String, String> item = (Hashtable<String, String>)jipyoItems.get(k);                            strName = (String)item.get("name");                            strIndex = strJipyo.charAt(strJipyo.length()-1);                            if(strJipyo.substring(0, strJipyo.length()-2).equals(strName))                            {                                strAddJipyo = String.format("%sdetailType=jipyo/type=Indicator/name=%s/tag=%s0%c|", strAddJipyo, strJipyo, (String)item.get("tag"), strIndex);                            }                        }                    }                }                //2016.11.19 by LYH >> HTS 복수지표 불러오기. <<            }            String bunList = args.getAsString("bunPeriodList");            if(bunList==null || bunList.equals("") || bunList.equals("null")) {//	        	bunList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                bunList = "";            }            String ticList = args.getAsString("ticPeriodList");            if(ticList==null || ticList.equals("") || ticList.equals("null")) {//	        	ticList = "1=1=3=1=5=1=10=1=15=1=30=1=60=1";                ticList = "";            }            String valueOfMin = args.getAsString("valueOfMin");            if(valueOfMin==null || valueOfMin.equals("") || valueOfMin.equals("null")) {                valueOfMin = "1";            }else {                try                {                    valueOfMin = ""+Integer.parseInt(valueOfMin);                }catch (Exception e){}            }            String viewCount = args.getAsString("viewCount");            if(viewCount==null || viewCount.equals("") || viewCount.equals("null")) {                viewCount = "100";            }            String count = args.getAsString("count");            if(count==null || count.equals("") || count.equals("null")) {                count = "200";            }            String chartMode = args.getAsString("chartMode");            if(chartMode==null || chartMode.equals("") || chartMode.equals("null")) {                chartMode = "0";            }            String dataTypeName = args.getAsString("dataTypeName");            if(dataTypeName==null || dataTypeName.equals("") || dataTypeName.equals("null")) {                dataTypeName = "2";            }            String analInfo = args.getAsString("analInfo");            if(analInfo==null || analInfo.equals("") || analInfo.equals("null") || dataTypeName.equals("0") || dataTypeName.equals("1")) {                analInfo = "";            }            String divideInfo = args.getAsString("divideInfo");            // hts의 차트 형태를 맞추기 위해 처리해줌            try {                String tmpStrDivideInfo = divideInfo;                String[] arrDivideInfo = tmpStrDivideInfo.split("/");                if (arrDivideInfo[1].equals("131")) { //row col (garbage)                    arrDivideInfo[1] = "33";                }else if (arrDivideInfo[1].equals("311")) {                    arrDivideInfo[1] = "32";                }else if (arrDivideInfo[1].equals("121")) {                    arrDivideInfo[1] = "22";                }else if (arrDivideInfo[1].equals("211")) {                    arrDivideInfo[1] = "21";                }else if (arrDivideInfo[1].equals("411")) {                    arrDivideInfo[1] = "42";                }else if (arrDivideInfo[1].equals("141")) {                    arrDivideInfo[1] = "44";                }else if (arrDivideInfo[1].equals("221")) {                    arrDivideInfo[1] = "41";                } else {                    if (arrDivideInfo.length > 2) {                        String divStr = arrDivideInfo[1].substring(0, 2);                        arrDivideInfo[1] = divStr;                    }                }                String rtnStrDivideInfo = "";                for (int k=0; k<arrDivideInfo.length; k++) {                    rtnStrDivideInfo = rtnStrDivideInfo+arrDivideInfo[k]+"/";                }                divideInfo = rtnStrDivideInfo;            } catch(Exception e) {            }            // hts의 차트 형태를 맞추기 위해 처리해줌            if(divideInfo==null || divideInfo.equals("") || divideInfo.equals("null")) {                divideInfo = "";            }//            String saveTitleName = args.getAsString("saveTitleName");//            if(saveTitleName==null || saveTitleName.equals("") || saveTitleName.equals("null")) {//                saveTitleName = "";//            }            String baseLineInfo = args.getAsString("baseline");            if(baseLineInfo==null || baseLineInfo.equals("") || baseLineInfo.equals("null")) {                baseLineInfo = "";            }            String commonInfo = "";//            String commonInfo = args.getAsString("commonInfo");//            if(commonInfo==null || commonInfo.equals("") || commonInfo.equals("null")) {//                commonInfo = "";//            } else {//                //MTS 포맷으로 변경함 (8개 항목)//                String[] arrConv = commonInfo.split("/");//                //y축 현재가표시, 수정주가적용,상하한가표시,Y축 눈금표시,추세선 수치 표시,분틱 날짜 구분선,수치조회창 등락,조회중인봉수////                int data1 = COMUtil.isyJonggaShow()?1:0;//                int data2 = COMUtil.isAdjustedStock()?1:0;//                int data3 = COMUtil.isMinMaxShow()?1:0;////                //hts 설정된 항목으로 변경//                if(arrConv!=null && arrConv.length>=3) {//                    try {//                        data1 = Integer.parseInt(arrConv[0]);//                        data2 = Integer.parseInt(arrConv[1]);//                        data3 = Integer.parseInt(arrConv[2]);//                    } catch (Exception e) {////                    }//                }//////                //mts 설정////                int data4 = COMUtil.bIsyScaleShow?1:0;////                int data5 = COMUtil.bIsChuseLineValueTextShow?1:0;////                int data6 = COMUtil.bIsDayDivisionLineShow?1:0;////                int data7 = COMUtil.bIsViewPanelChgShow?1:0;////                int data8 = COMUtil.bIsBongCntShow?1:0;////////                commonInfo = ""+ data1+"/"+////                        data2+"/"+////                        data3+"/"+////                        data4+"/"+////                        data5+"/"+////                        data6+"/"+////                        data7+"/"+////                        data8;//            }            String strDate = args.getAsString("savedate");            if(strDate.length()>10)                strDate = strDate.substring(0,10);            String strDetail = args.getAsString("detail");            if(strDetail.endsWith(","))                strDetail = strDetail.substring(0,strDetail.length()-1);            strDetail = strDetail.replace(",", ", ");            String strSymbol = args.getAsString("symbol");            strSymbol = strSymbol.replace("/", "~");            db.execSQL("INSERT INTO "+strFile+" VALUES (null, " +                    " '"+divideInfo+"'," +                    " '"+""+"'," +                    " '"+strDate+"'," +                    " '"+""+"'," +                    //" '"+""+"'," +                    " '"+strAddJipyo+"'," +                    " '"+args.getAsString("codeName")+"'," +                    //" '"+COMUtil.HTS_SHARE_TITLE+"차트"+index+"'," +	//title                    " '"+"ABCDEFG"+"'," +//                    " '"+args.getAsString("detail")+"'," +	//detail                    " '"+strDetail+"'," +	//detail                    " '"+""+"'," +                    " '"+strSymbol+"'," +                    " '"+args.getAsString("lcode")+"'," +                    " '"+args.getAsString("apCode")+"'," +                    " '"+dataTypeName+"'," +                    " '"+count+"'," +//count                    " '"+viewCount+"'," +//viewcount                    " '"+valueOfMin+"'," +  //valufOfMin                    " '"+strJipyoData+"'," + //graphlist                    " '"+""+"'," + //not use                    " '"+analInfo+"'," + //analinfo                    " '"+chartMode+"'," + //chartMode/skinType                    " '"+args.getAsString("market")+"'," + //marketType                    " '"+bunList+"'," + //                    " '"+ticList+"'," + //                    " '"+args.getAsString("marketName")+"'," + //marketName(stock,elw. etc)                    " '"+saveTitleName+"'," +  //2013. 1. 28 사용자입력 저장하기 타이틀                    " '"+index+"'," + // index                    " '"+baseLineInfo+"'," + //                    " '"+commonInfo+"'" +  	//  :1/1/1/1/1/1/1/1/                    ");");        }        cursor = db.rawQuery("SELECT * FROM "+strFile+" order by _id desc", null);        cursor.moveToPosition(0); //첫번째 항목에 추가하기 위해서 위치를 변경함        int rowCnt = cursor.getCount();//		cursor.close();        mHelper.close();        db.close();        return true;    }	//클라우드 호출 함수	public static void setCloudData(Context context, String data) {		try {			COMUtil.cloudToStorage(context, data);		}catch(Exception e) {			return;		}	}	//클라우드 차트 목록 적용	public static void setCloudLocalData(Context context, String data) {//		try {		if(COMUtil.cloudToLocalStorage(context, data)) {			//차트목록 실행			if(chartLoadView!=null)			{                chartLoadView.createLocalChartList();			}		}//		}catch(Exception e) {//			System.out.println(e.getMessage());//		}	}    //클라우드 차트 목록 적용    public static void setCloudLocalData_HTS(Context context, String data) {//		try {        if(COMUtil.cloudToLocalStorage_HTS(context, data)) {            //차트목록 실행            if(chartLoadView!=null)            {                chartLoadView.createLocalChartList();            }        }//		}catch(Exception e) {//			System.out.println(e.getMessage());//		}    }	//클라우드 호출 함수    public static String getCloudData(Context context) {        String rtnData = COMUtil.storageToCloud(context);        rtnData = COMUtil.getEncodeData(rtnData);        return rtnData;    }	public static String getCloudData(Context context, String type) {		String rtnData = COMUtil.storageToCloud(context, type);		rtnData = COMUtil.getEncodeData(rtnData);		return rtnData;	}	//클라우드 LOCAL 호출 함수	public static String getLocalCloudData(Context context) {		String rtnData = COMUtil.storageToLocalCloud(context);		rtnData = COMUtil.getEncodeData(rtnData);		return rtnData;	}	public static void initSendTrType() {        if (_mainFrame != null && _mainFrame.sendTrType.equals("requestAddData")) {            _mainFrame.sendTrType = "";        }    }	public static String getSendTrType() {		if(_mainFrame != null)			return _mainFrame.sendTrType;		return "";	}	public static void setSendTrType(String strSendTrType) {		if(_mainFrame != null)			_mainFrame.sendTrType = strSendTrType;	}	//2012. 11. 20  해외선물 5일 분차트 get/set	public static void setLineFillChart(boolean _bIsLineFill)	{		bIsLineFill = _bIsLineFill;	}	public static boolean isLineFillChart()	{		return bIsLineFill;	}	//2013. 1. 17 분틱주기 설정 함수 추가	public static void resetBunTicPeriodList(boolean isFirst){		int i;//	    bunPeriodList = new ArrayList<Hashtable<String, String>>();//	    ticPeriodList = new ArrayList<Hashtable<String, String>>();//	    int[] defMin = {1,3,5,10,15,30,60};//	    int[] defTik = {1,3,5,10,15,30,60};		Base11 base11 = (Base11)COMUtil._mainFrame.mainBase.baseP;		if(!isFirst || base11.astrMinData[0] == -1)		{		    //분차트 값 및 체크박스  초기화		    for(i = 0; i < 8; i++)		    {	//	    	Hashtable item = new Hashtable<String, String>();	//	    	item.put("title", String.valueOf(defMin[i]));	//	    	item.put("checked", "1");	//	    	COMUtil.bunPeriodList.add(item);		    	base11.astrMinData[i] = base11.astrMinDefaultData[i];		    	base11.astrMinCheckData[i] = base11.astrMinCheckDefaultData[i];		    }		  //틱차트 값 및 체크박스  초기화		    for(i = 0; i < 8; i++)		    {	//	    	Hashtable item = new Hashtable<String, String>();	//	    	item.put("title", String.valueOf(defTik[i]));	//	    	item.put("checked", "1");	//	    	COMUtil.ticPeriodList.add(item);		    	base11.astrTikData[i] = base11.astrTikDefaultData[i];		    	base11.astrTikCheckData[i] = base11.astrTikCheckDefaultData[i];		    }		}	}    public static void resetConvenientList()    {        COMUtil._mainFrame.bIsAdjustedStock = true;        COMUtil.sendTR(""+COMUtil._TAG_SET_ADJUSTEDSTOCK, COMUtil._mainFrame.userProtocol);        COMUtil._mainFrame.bIsyScaleShow = true;        COMUtil._mainFrame.bIsyJonggaShow = true;        COMUtil._mainFrame.bIsMinMaxShow = true;        //2013. 9. 3 추세선 그렸을 때 수치 가시성 여부 설정하는 것 기본환경에 추가 >>        COMUtil._mainFrame.bIsChuseLineValueTextShow = false;	//2015. 1. 16 추세선 수치조회 기본값을 감추기로 변경        //2013. 9. 3 추세선 그렸을 때 수치 가시성 여부 설정하는 것 기본환경에 추가 >>        //2013. 9. 3 분틱 날짜구분선 보이기 여부 처리 >>        COMUtil._mainFrame.bIsDayDivisionLineShow = false; //2016.01.05 by LYH >> 디폴트 설정값 변경        //2013. 9. 3 분틱 날짜구분선 보이기 여부 처리 >>        COMUtil._mainFrame.bIsSetScreenViewPanel = true;        //2016. 1. 11 종가 등락률 옵션처리        COMUtil._mainFrame.bIsyJonggaCurrentPrice = true;        //2015.04.16 by lyk - 주기별 차트 설정 옵션>>        COMUtil._mainFrame.bIsPeriodConfigSave = false;        //2015.04.16 by lyk - 주기별 차트 설정 옵션<<        //2015. 2. 24 차트 상하한가 표시        //상하한가 표시 플래그 초기화        COMUtil._mainFrame.bIsUpperLowerLimit = false;        COMUtil._mainFrame.bIsBongCntShow = true;        COMUtil._mainFrame.g_nPaddingRight = 8;    //2016.09.08 by LYH >> 오른쪽 여백 설정 기능        COMUtil._mainFrame.bIsUsePaddingRight = true;        COMUtil._mainFrame.bIsZoomCenterView = false; // 2017.05.23 by PJM 사진줌방식        //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 >>//        COMUtil._mainFrame.g_nFontSizeBtn = 1;//        COMUtil._mainFrame.g_nVPFontSizeBtn = 1;        setFontSizeBtn(1);        setVPFontSizeBtn(1);        //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 <<        //2017.09.13 by pjm 한국시간 추가 >>        COMUtil._mainFrame.bIsKoreanTime = true;        COMUtil.sendTR(""+COMUtil._TAG_SET_KOREANTIME, COMUtil._mainFrame.userProtocol);        //2017.09.13 by pjm 한국시간 추가 >>        //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 >>        COMUtil._mainFrame.strModYn = "N";      //만기보정        COMUtil._mainFrame.strSkipTp = "0";     //제외기준 (0:없음 / 1:가격 / 2:거래량 / 3:둘다)        COMUtil._mainFrame.strSkipTick = "50";  //제외기준 틱        COMUtil._mainFrame.strSkipVol = "10";   //제외기준 거래량        COMUtil._mainFrame.modSkipRequestInfo();        //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 <<        //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw >>        COMUtil._mainFrame.bIsDetailScroll = false;        COMUtil._mainFrame.bIsUseHubong = false;        COMUtil._mainFrame.bIsHighLowShow = true;        COMUtil.sendTR(""+COMUtil._TAG_SET_REALBONG);        //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw <<        //2021.01.05 by HJW - X,YScale 격자선 옵션화 >>        COMUtil._mainFrame.bIsShowYScaleLine = true;        COMUtil._mainFrame.bIsShowXScaleLine = true;        //2021.01.05 by HJW - X,YScale 격자선 옵션화 <<        COMUtil._mainFrame.bIsCrossLineJongga = false; //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화    }    //2013. 1. 17  분틱주기 값 세팅    public static void setBunTicPeriodValues(int[] arMin, int[] arMinChk,    										 int[] arTic, int[] arTicChk,                                             int[] arSec, int[] arSecChk)   //2016.12.26 by LYH >> 초차트 처리 및 초주기 설정 추가    {    	int i;    	bunPeriodList = new ArrayList<Hashtable<String, String>>();	    ticPeriodList = new ArrayList<Hashtable<String, String>>();	    Base11 base11 = (Base11)COMUtil._mainFrame.mainBase.baseP;	    String strPeriodValue = "";	//2015. 12. 11 map-chart 간 분틱값 동기화    	//분차트 값  초기화	    for(i = 0; i < 9; i++)	    {//	    	Hashtable item = new Hashtable<String, String>();//	    	item.put("title", String.valueOf(arMin[i]));//	    	item.put("checked", String.valueOf(arMinChk[i]));//	    	COMUtil.bunPeriodList.add(item);	    	base11.astrMinData[i] = arMin[i];            base11.astrMinCheckData[i] = arMinChk[i];            //2015. 12. 11 map-chart 간 분틱값 동기화>>//	    	strPeriodValue += base11.astrMinData[i];//	    	strPeriodValue += ";";	    	//2015. 12. 11 map-chart 간 분틱값 동기화<<            strPeriodValue += String.valueOf(base11.astrMinData[i]) + ":";            strPeriodValue += String.valueOf(base11.astrMinCheckData[i]) + ";";	    }	  //2015. 12. 11 map-chart 간 분틱값 동기화>>	    strPeriodValue = strPeriodValue.substring(0, strPeriodValue.length()-1);	    strPeriodValue += "/";	  //2015. 12. 11 map-chart 간 분틱값 동기화<<	    for(i = 0; i < 8; i++)	    {//	    	Hashtable item = new Hashtable<String, String>();//	    	item.put("title", String.valueOf(arTic[i]));//	    	item.put("checked", String.valueOf(arTicChk[i]));//	    	COMUtil.ticPeriodList.add(item);	    	base11.astrTikData[i] = arTic[i];	    	base11.astrTikCheckData[i] = arTicChk[i];            //2015. 12. 11 map-chart 간 분틱값 동기화>>//	    	strPeriodValue += base11.astrTikData[i];//	    	strPeriodValue += ";";	    	//2015. 12. 11 map-chart 간 분틱값 동기화<<            strPeriodValue += String.valueOf(base11.astrTikData[i]) + ":";            strPeriodValue += String.valueOf(base11.astrTikCheckData[i]) + ";";	    }        //2016.12.26 by LYH >> 초차트 처리 및 초주기 설정 추가        strPeriodValue = strPeriodValue.substring(0, strPeriodValue.length()-1);        strPeriodValue += "/";        //2015. 12. 11 map-chart 간 분틱값 동기화<<        for(i = 0; i < 3; i++)        {//	    	Hashtable item = new Hashtable<String, String>();//	    	item.put("title", String.valueOf(arTic[i]));//	    	item.put("checked", String.valueOf(arTicChk[i]));//	    	COMUtil.ticPeriodList.add(item);            base11.astrSecData[i] = arSec[i];            base11.astrSecCheckData[i] = arSecChk[i];            //2015. 12. 11 map-chart 간 분틱값 동기화>>//            strPeriodValue += base11.astrSecData[i];//            strPeriodValue += ";";            //2015. 12. 11 map-chart 간 분틱값 동기화<<            //2015. 12. 11 map-chart 간 분틱값 동기화<<            strPeriodValue += String.valueOf(base11.astrSecData[i]) + ":";            strPeriodValue += String.valueOf(base11.astrSecCheckData[i]) + ";";        }        //2016.12.26 by LYH >> 초차트 처리 및 초주기 설정 추가 end	    strPeriodValue = strPeriodValue.substring(0, strPeriodValue.length()-1);	    Hashtable<String, Object> dic = new Hashtable<String, Object>();		dic.put("PeriodValue", strPeriodValue);		dic.put("MethodType", "set");	    if(_mainFrame.userProtocol!=null) _mainFrame.userProtocol.requestInfo(COMUtil._TAG_SYNC_PERIODVALUE, dic);	  //2015. 12. 11 map-chart 간 분틱값 동기화<<    }    //2017.04.17 해외선물옵션 주기 값 세팅    public static void setDayWeekMonMinTikPeriodValues(int[] arPeriod, int[] arPeriodChk, int[] arDayBtn, int[] arWeekBtn, int[] arMonBtn, int[] arMinBtn, int[] arTikBtn)    {        int i;        Base11 base11 = (Base11)COMUtil._mainFrame.mainBase.baseP;        String strPeriodValue = "";	//2015. 12. 11 map-chart 간 분틱값 동기화        for(i = 0; i < 14; i++)        {            base11.astrPeriodDayBtnData[i] = arDayBtn[i]; //1            base11.astrPeriodWeekBtnData[i] = arWeekBtn[i]; //2            base11.astrPeriodMonBtnData[i] = arMonBtn[i]; //3            base11.astrPeriodMinBtnData[i] = arMinBtn[i]; //4            base11.astrPeriodTikBtnData[i] = arTikBtn[i]; //5        }        int nPeriodType = 1;        //분차트 값  초기화        for(i = 0; i < 14; i++)        {            base11.astrPeriodData[i] = arPeriod[i];            nPeriodType = base11.astrPeriodDayBtnData[i];            if(base11.astrPeriodDayBtnData[i] == 1)                nPeriodType = 1;            else if(base11.astrPeriodWeekBtnData[i] == 1)                nPeriodType = 2;            else if(base11.astrPeriodMonBtnData[i] == 1)                nPeriodType = 3;            else if(base11.astrPeriodMinBtnData[i] == 1)                nPeriodType = 4;            else if(base11.astrPeriodTikBtnData[i] == 1)                nPeriodType = 5;            strPeriodValue += nPeriodType;            strPeriodValue += "=";            strPeriodValue += base11.astrPeriodData[i];            strPeriodValue += ";";        }        //2015. 12. 11 map-chart 간 분틱값 동기화>>        strPeriodValue = strPeriodValue.substring(0, strPeriodValue.length()-1);//        strPeriodValue += "/";        Hashtable<String, Object> dic = new Hashtable<String, Object>();        dic.put("PeriodValue", strPeriodValue);        dic.put("MethodType", "set");        if(_mainFrame.userProtocol!=null) _mainFrame.userProtocol.requestInfo(COMUtil._TAG_SYNC_PERIODVALUE, dic);        //2015. 12. 11 map-chart 간 분틱값 동기화<<    }    //    public static String getAdjustedChart()	{		if(_mainFrame.bIsAdjustedStock)			return "1";		else			return "0";	}//    public static boolean isHighResolution() {//    	boolean bHighResolution = false;//		//2012. 10. 2  해상도 크기로 리스트뷰 크기를 결정하기 위함  : I106//		Display dis = ((WindowManager) COMUtil.apiView.getContext().getSystemService(COMUtil.apiView.getContext().WINDOW_SERVICE)).getDefaultDisplay();//		int mDisWidth = dis.getWidth();            // 가로 사이즈//		int mDisHeight = dis.getHeight();          // 세로 사이즈//////		System.out.println("mDisWidth:"+mDisWidth+"---"+"mDisHeight"+mDisHeight);////		//2012. 10. 2  일부기기에서 리스트뷰 하단 짤리는 현상 : I95 //height:1184 (갤럭시 넥서스1)//		if((mDisWidth >= 720 && mDisHeight >= 1280) || (mDisWidth >= 1280 && mDisHeight >= 720))//		{//			bHighResolution = true;//		}////		return bHighResolution;//    }    public static boolean isHighResolutionForNexus1() {    	boolean bHighResolution = false;		//2012. 10. 2  해상도 크기로 리스트뷰 크기를 결정하기 위함  : I106		Display dis = ((WindowManager) COMUtil.apiView.getContext().getSystemService(COMUtil.apiView.getContext().WINDOW_SERVICE)).getDefaultDisplay();		int mDisWidth = dis.getWidth();            // 가로 사이즈		int mDisHeight = dis.getHeight();          // 세로 사이즈//		System.out.println("mDisWidth:"+mDisWidth+"---"+"mDisHeight"+mDisHeight);		//2012. 10. 2  일부기기에서 리스트뷰 하단 짤리는 현상 : I95 //height:1184 (갤럭시 넥서스1)		if((mDisWidth >= 720 && mDisHeight == 1184) || (mDisWidth == 1184 && mDisHeight >= 720))		{			bHighResolution = true;		}		return bHighResolution;    }	public static String getRate(String strPrice, String strPrevPrice)	{		String strChgrate = "";		if(strPrice.length() != 0 && strPrevPrice.length() != 0)		{			try{				boolean isMinus = false;				double price = Double.parseDouble(strPrice);				double prePrice = Double.parseDouble(strPrevPrice);		   		double chgrate = 0;                if(prePrice != 0)                    chgrate = (price - prePrice)*100/prePrice;				if(chgrate<0)				{					chgrate *= -1;					isMinus = true;				}				strChgrate = String.format("%.2f%%", chgrate);				if(isMinus) {                    strChgrate = "-" + strChgrate;                } else {                    strChgrate = "+" + strChgrate; //2021.05.24 by hanjun.Kim - kakaopay                }                if(strChgrate.length()<6)                {                    String strRet = "";                    for(int i=0; i<(6-strChgrate.length()); i++)                    {                        strRet = strRet+" ";                    }                    strRet = strRet +strChgrate;                    strChgrate = strRet;                }			}			catch(Exception e)			{			}		}		return strChgrate;	}    public static String getRate_Vol(String strPrice, String strPrevPrice)    {        String strChgrate = "";        if(strPrice.length() != 0 && strPrevPrice.length() != 0)        {            try{                boolean isMinus = false;                double price = Double.parseDouble(strPrice);                double prePrice = Double.parseDouble(strPrevPrice);                double chgrate = 0;                if(prePrice != 0) {//                    if(price - prePrice>0)//                        chgrate = price * 100 / prePrice;//                    else                        chgrate = (price - prePrice) * 100 / prePrice;                }                if(chgrate<0)                {                    chgrate *= -1;                    isMinus = true;                }                strChgrate = String.format("%.2f%%", chgrate);                if(isMinus)                    strChgrate = "-"+strChgrate;                else                    strChgrate = "+"+strChgrate;                if(strChgrate.length()<6)                {                    String strRet = "";                    for(int i=0; i<(6-strChgrate.length()); i++)                    {                        strRet = strRet+" ";                    }                    strRet = strRet +strChgrate;                    strChgrate = strRet;                }//                if(chgrate<100 && chgrate != 0)//                {//                    strChgrate = "--"+strChgrate;//                }            }            catch(Exception e)            {            }        }        return strChgrate;    }	public static void recycleDrawable(Drawable d) {        if( d == null ) return;        if (d instanceof BitmapDrawable) {            Bitmap b = ((BitmapDrawable)d).getBitmap();            if( b != null  ) b.recycle();        } // 현재로서는 BitmapDrawable 이외의 drawable 들에 대한 직접적인 메모리 해제는 불가능하다.        d.setCallback(null);    }	//2013. 7. 31 저장하기창에 종목 상세내용(일시/종목/주기) 추가>>	public String getJipyoList()	{		return "";	}	//2013. 7. 31 저장하기창에 종목 상세내용(일시/종목/주기) 추가>>    public static boolean isMarketIndicator(String title) {    	if(title.equals("거래대금") || title.equals("매수매도 거래량") )    	{    		return true;    	}    	for(int i=0; i< ChartUtil.strMarkets.length;i++)    	{    		if(title.equals(ChartUtil.strMarkets[i]))    			return true;    	}    	return false;    }    //2015. 1. 13 - by lyk - 동일지표 (파일 저장소 파일명 추가)    public static String getAddJipyoFilePath() {    	String jipyoFilePath = COMUtil._chartMain.getFilesDir() + "//" + "jipyo_addlist";    	return jipyoFilePath;    }    //2015. 1. 13 - by lyk - 동일지표 (파일 저장소) end    //2015. 1. 13 - by lyk 동일지표 이름 처리 (구분자 제거)    public static String getAddJipyoTitle(String value) {    	//2015.06.09 by lyk - RCI 지표 관련 수정        if(value == null) {        	return "";        }        //2015.06.09 by lyk - RCI 지표 관련 수정 end        int index = value.indexOf(COMUtil.JIPYO_ADD_REMARK);		String strSubTitle = value;    	if(index>0) {    		strSubTitle = value.substring(0, index);    		//2015. 3. 3  차트 롱터치시 중복지표 값이 안나옴>>        	index = value.indexOf("(");        	if(index>0) {        		strSubTitle += value.substring(index);        	}        	//2015. 3. 3  차트 롱터치시 중복지표 값이 안나옴<<    	}    	return strSubTitle;    }    //2015. 1. 13 - by lyk 동일지표 이름 처리 (구분자 제거) end  /**     * 현재 단말기가 태블릿인지 아닌지 알려준다.     * @return 태블릿(true), 폰(false)     * @author shkim     * @since 2013. 11. 12     * */    public static boolean isTablet()    {    	int xlargeBit = 4; // Configuration.SCREENLAYOUT_SIZE_XLARGE;  // upgrade to HC SDK to get this        Configuration config = apiView.getContext().getResources().getConfiguration();        return (config.screenLayout & xlargeBit) == xlargeBit;    }  	//2013.02.12 by LYH >> 초기화및 설정 등이 부모 화면 못 찾아가는 문제 해결.    public static void sendTR(String data, UserProtocol userProtocol) {    	//api 접속 모드 처리. 내부 tr을 사용하지 않음.    	if(_mainFrame.apiModeCheck(data, userProtocol)) {    		return;    	}    }  	//2013.02.12 by LYH << 초기화및 설정 등이 부모 화면 못 찾아가는 문제 해결.  //이벤트 전달용 Listener  	public interface OnPopupEventListener  	{  		public void onMessage(String strMessage);  	}//    public static void setGlobalFont(ViewGroup root){//        for (int i=0; i < root.getChildCount();i++){//            View child = root.getChildAt(i);//            if (child instanceof TextView){//                try//                {//                    ((TextView)child).setTypeface(((TextView)child).getTypeface().getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);//                }//                catch(Exception e)//                {//                    ((TextView)child).setTypeface(COMUtil.typeface);//                }//            } else if(child instanceof Button){//                try//                {//                    ((Button)child).setTypeface(((TextView)child).getTypeface().getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);//                }//                catch(Exception e)//                {//                    ((Button)child).setTypeface(COMUtil.typeface);//                }//            } else if(child instanceof EditText){//                try//                {//                    ((EditText)child).setTypeface(((TextView)child).getTypeface().getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);//                }//                catch(Exception e)//                {//                    ((EditText)child).setTypeface(COMUtil.typeface);//                }//            } else if(child instanceof ViewGroup){//                setGlobalFont((ViewGroup)child);//            }//        }//    }    public static void setGlobalFont(ViewGroup root){        //2023.11.28 by lyk - 카카오페이에서는 사용안하도록 처리 (xml 설정을 따름) >>//        try//        {//            Typeface childTypeFace;//            View child;//            for (int i=0; i < root.getChildCount();i++){//                child = root.getChildAt(i);//                if (child instanceof TextView){//                    childTypeFace = ((TextView) child).getTypeface();//                    if(childTypeFace == null) {//                        if(!(((TextView) child).getTypeface() == COMUtil.typefaceMid))//                            ((TextView) child).setTypeface(COMUtil.typeface);//                    }//                    else {//                        if(childTypeFace != COMUtil.typefaceMid && childTypeFace != COMUtil.numericTypefaceMid)//                            ((TextView) child).setTypeface(childTypeFace.getStyle() == Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);//                    }//                } else if(child instanceof Button){//                    childTypeFace = ((Button) child).getTypeface();//                    if(childTypeFace == null)//                        ((Button) child).setTypeface(COMUtil.typeface);//                    else//                        ((Button)child).setTypeface(childTypeFace.getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);//                } else if(child instanceof EditText){//                    childTypeFace = ((EditText) child).getTypeface();//                    if(childTypeFace == null)//                        ((EditText) child).setTypeface(COMUtil.numericTypeface);//                    else//                        ((EditText)child).setTypeface(childTypeFace.getStyle()==Typeface.BOLD ? COMUtil.numericTypefaceBold : COMUtil.numericTypeface);//                } else if(child instanceof ViewGroup){//                    setGlobalFont((ViewGroup)child);//                }//            }//        }//        catch(Exception e)//        {//            e.printStackTrace();//        }        //2023.11.28 by lyk - 카카오페이에서는 사용안하도록 처리 (xml 설정을 따름) <<    }    public static void setGlobalFont_Except_EditText(ViewGroup root){        for (int i=0; i < root.getChildCount();i++){            View child = root.getChildAt(i);            if(child instanceof EditText){            }            else if (child instanceof TextView){                try                {                    ((TextView)child).setTypeface(((TextView)child).getTypeface().getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);                }                catch(Exception e)                {                    ((TextView)child).setTypeface(COMUtil.typeface);                }            } else if(child instanceof Button){                try                {                    ((Button)child).setTypeface(((TextView)child).getTypeface().getStyle()==Typeface.BOLD ? COMUtil.typefaceBold : COMUtil.typeface);                }                catch(Exception e)                {                    ((Button)child).setTypeface(COMUtil.typeface);                }            }            else if(child instanceof ViewGroup){            	setGlobalFont_Except_EditText((ViewGroup)child);            }        }    }    //레이아웃 전체에 볼드폰트적용//    public static void setGlobalFontBold(ViewGroup root){//        for (int i=0; i < root.getChildCount();i++){//            View child = root.getChildAt(i);//            if (child instanceof TextView){//                ((TextView)child).setTypeface(COMUtil.typefaceBold);//            } else if(child instanceof Button){//                ((Button)child).setTypeface(COMUtil.typefaceBold);//            } else if(child instanceof ViewGroup){//                setGlobalFontBold((ViewGroup)child);//            }//        }//    }    public static RelativeLayout comcompareSettingLayout = null;    public static CompareSettingController compareSettingView= null;	public static int[] compareColors;	public static int[] compareLines;	public static void showCompareSetting(Vector<String> cmpArr) {		int viewWidth = 0;		int viewHeight = 0;			viewWidth= COMUtil.g_nDisWidth;			viewHeight= COMUtil.g_nDisHeight;			compareArr = cmpArr;			comcompareSettingLayout = new RelativeLayout(_chartMain);			comcompareSettingLayout.setTag("chartSaveLayout");			comcompareSettingLayout.setLayoutParams(	        		new LayoutParams(viewWidth, viewHeight));    		//2014. 10. 14 popupwindow 배경 반투명색<<			compareSettingView = new CompareSettingController(_chartMain, comcompareSettingLayout);			compareSettingView.setTag("compareSetting");//			compareSettingPopup = new PopupWindow(periodLayout, COMUtil.g_nDisWidth, COMUtil.g_nDisHeight, true);////			compareSettingPopup.setOutsideTouchable(true); // 이부분을 설정해주어야 팝업이 떳을때 다른부분에 이벤트를 줄수있습니다.//			compareSettingPopup.setBackgroundDrawable(new BitmapDrawable());  // 이부분에 이벤트가 들어오게됩니다.			//compareSettingPopup.showAtLocation(apiView.getRootView(), Gravity.CENTER, 0, 0);			//if(((ViewGroup)COMUtil.apiView.getParent()).findViewWithTag("compareSetting") != null)            if(COMUtil.apiView.findViewWithTag("compareSetting") != null)			{				//View view = ((ViewGroup)COMUtil.apiView.getParent()).findViewWithTag("compareSetting");                View view = COMUtil.apiView.findViewWithTag("compareSetting");				//((ViewGroup)COMUtil.apiView.getParent()).removeView(view);				_mainFrame.addRemovePopupView("2", view);			}			_mainFrame.addRemovePopupView("1", comcompareSettingLayout);	}    static PopupWindow compareSettingPopup;	public static void showCompareSetting() {        //2019. 08. 19 by hyh - 비교차트 팝업창 변경 >>        comcompareSettingLayout = new RelativeLayout(_chartMain);        comcompareSettingLayout.setTag("chartSaveLayout");        comcompareSettingLayout.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));        compareSettingView = new CompareSettingController(_chartMain, comcompareSettingLayout);        compareSettingView.setTag("compareSetting");        compareSettingPopup = new PopupWindow(comcompareSettingLayout, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, true);        compareSettingPopup.setOutsideTouchable(true); // 이부분을 설정해주어야 팝업이 떳을때 다른부분에 이벤트를 줄수있습니다.        compareSettingPopup.setBackgroundDrawable(new BitmapDrawable());  // 이부분에 이벤트가 들어오게됩니다.        compareSettingPopup.showAtLocation(apiView.getRootView(), Gravity.CENTER, 0, 0);        //if(((ViewGroup)COMUtil.apiView.getParent()).findViewWithTag("compareSetting") != null)        //if(COMUtil.apiView.findViewWithTag("compareSetting") != null)        //{        //	//View view = ((ViewGroup)COMUtil.apiView.getParent()).findViewWithTag("compareSetting");        //    View view = COMUtil.apiView.findViewWithTag("compareSetting");        //	//((ViewGroup)COMUtil.apiView.getParent()).removeView(view);        //	_mainFrame.addRemovePopupView("2", view);        //}        //_mainFrame.addRemovePopupView("1", comcompareSettingLayout);        //2019. 08. 19 by hyh - 비교차트 팝업창 변경 <<	}    public static void closeCompareSettingPopup() {        if(compareSettingPopup!=null) {            //2019. 08. 19 by hyh - 비교차트 팝업창 변경 >>            compareSettingPopup.dismiss();            //_mainFrame.addRemovePopupView("2", comcompareSettingLayout);            //2019. 08. 19 by hyh - 비교차트 팝업창 변경 <<            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            base.setCompareSetting();        }    }    //서버저장 불러오기 관련    public static String getCommonInfoStr() {        //commonInfo(일반설정)        //y축 현재가표시, 수정주가적용,상하한가표시,Y축 눈금표시,추세선 수치 표시,분틱 날짜 구분선,수치조회창 등락,조회중인봉수        int data0 = COMUtil.isAdjustedStock()?1:0;        int data1 = COMUtil.isyScaleShow()?1:0;        int data2 = COMUtil.isyJonggaShow()?1:0;        int data3 = COMUtil.isMinMaxShow()?1:0;        int data4 = COMUtil.isSetScreenViewPanel()?1:0;        int data5 = COMUtil.isChuseLineValueTextShow()?1:0;        int data6 = COMUtil.isDayDivisionLineShow()?1:0;        int data7 = COMUtil.isBongCntShow()?1:0;        int data8 = COMUtil.isyJonggaCurrentPrice()?1:0;        int data9 = COMUtil.isUsePaddingRight()?1:0;	//우측여백 사용여부        int data10 = COMUtil.getPaddingRight();	//우측여백        int data11 = COMUtil.isPeriodConfigSave()?1:0;	//2015.04.16 by lyk - 주기별 차트 설정        int data12 = COMUtil.getSkinType();	//스킨타입        int data13 = COMUtil.isZoomCenterView()?1:0;	// 2017.05.23 by PJM 사진줌방식        int data14 = COMUtil.getFontSizeBtn();	//차트폰트사이즈        int data15 = COMUtil.getVPFontSizeBtn();	//수치조회창 폰트        int data16 = COMUtil.isKoreanTime()?1:0;     //2017.09.13 by pjm 해외주식 추가 >>        int data17 = COMUtil.isHighLowShow()?1:0;     //2020.03.26 차트 최대/최소 표시 설정 추가 - hjw        int data18 = COMUtil.isDetailScroll()?1:0;    //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw        int data19 = COMUtil.isUseHubong()?1:0;       //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw        int data20 = COMUtil.isShowToolBarOneq()?1:0;        int data21 = COMUtil.isShowYScaleLine()?1:0; //2021.01.05 by HJW - X,YScale 격자선 옵션화        int data22 = COMUtil.isShowXScaleLine()?1:0; //2021.01.05 by HJW - X,YScale 격자선 옵션화        int data23 = COMUtil.isCrossLineJongga()?1:0; //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화        //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 >>//        String data17 = _mainFrame.strModYn;//        String data18 = _mainFrame.strSkipTp;//        String data19 = _mainFrame.strSkipTick;//        String data20 = _mainFrame.strSkipVol;        //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 <<        String strCommonInfo =                data0+"/"+                data1+"/"+                data2+"/"+                data3+"/"+                data4+"/"+                data5+"/"+                data6+"/"+                data7+"/"+                data8+"/"+                data9+"/"+                data10+"/"+                data11+"/"+                data12+"/"+                data13+"/"+                data14+"/"+                data15+"/"+                data16+"/"+                data17+"/"+                data18+"/"+                data19+"/"+                data20+"/"+                data21+"/"+                data22+"/"+                data23;        //2015.04.08 by lyk 주기별 차트 설정<<        return strCommonInfo;    }    	/* Local DB 데이터 삭제 */    public static void removeLocalFile(Context context, String fileName) {        ChartsaveDBHelper mHelper=null;        SQLiteDatabase db = null;        mHelper = new ChartsaveDBHelper(context, fileName);        db = mHelper.getWritableDatabase();        db.execSQL("DELETE FROM "+fileName+" WHERE _id >=0");        mHelper.close();        db.close();    }    //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 >>    public static int getFontSizeBtn()    {        if(_mainFrame != null) {            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            if(base instanceof Base11 && base._chart != null) {                return base._chart._cvm.g_nFontSizeBtn;            }        }        return 1;    }    public static int getVPFontSizeBtn()    {        if(_mainFrame != null) {            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            if(base instanceof Base11 && base._chart != null) {                return base._chart._cvm.g_nVPFontSizeBtn;            }        }        return 1;    }    public static void setFontSizeBtn(int nFontSizeBtn)    {        if(_mainFrame != null) {            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            if(base instanceof Base11 && base._chart != null) {                base._chart._cvm.g_nFontSizeBtn = nFontSizeBtn;            }        }    }    public static void setVPFontSizeBtn(int nFontSizeBtn)    {        if(_mainFrame != null) {            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            if(base instanceof Base11 && base._chart != null) {                base._chart._cvm.g_nVPFontSizeBtn = nFontSizeBtn;            }        }    }    //2020.12.28 by HJW - 폰트 사이즈 옵션 추가 <<    public static int getPaddingRight()    {        if(_mainFrame != null)            return _mainFrame.g_nPaddingRight;        return 2;    }    public static boolean isPeriodConfigSave()    {        if(_mainFrame != null)            return _mainFrame.bIsPeriodConfigSave;        return false;    }    public static boolean isUsePaddingRight()    {        if(_mainFrame != null)            return _mainFrame.bIsUsePaddingRight;        return false;    }    public static boolean isZoomCenterView()    {        if(_mainFrame != null)            return _mainFrame.bIsZoomCenterView;        return false;    }    public static boolean isAdjustedStock()    {        if(_mainFrame != null)            return _mainFrame.bIsAdjustedStock;        return false;    }    //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 >>    public static boolean isUseMod() {        if (_mainFrame != null) {            if (_mainFrame.strModYn.equals("Y")) {                return true;            }        }        return false;    }    public static boolean isUseSkipTick() {        if (_mainFrame != null) {            String strSkipTp = _mainFrame.strSkipTp;            if (strSkipTp.equals("1") || strSkipTp.equals("3")) {                return true;            }        }        return false;    }    public static boolean isUseSkipVolume() {        if (_mainFrame != null) {            String strSkipTp = _mainFrame.strSkipTp;            if (strSkipTp.equals("2") || strSkipTp.equals("3")) {                return true;            }        }        return false;    }    //2019. 03. 07 by hyh - 만기보정, 제외기준 적용 <<    //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw >>    public static boolean isDetailScroll() {        if(_mainFrame != null)            return _mainFrame.bIsDetailScroll;        return false;    }    public static boolean isUseHubong() {        if(_mainFrame != null)            return _mainFrame.bIsUseHubong;        return false;    }    //2020.03.25 확대/축소 정밀도 설정, 실봉/허봉 설정 추가 - hjw <<    public static boolean isMinMaxShow()    {        if(_mainFrame != null)            return _mainFrame.bIsMinMaxShow;        return false;    }    public static boolean isyJonggaShow()    {        if(_mainFrame != null)            return _mainFrame.bIsyJonggaShow;        return false;    }    public static boolean isyScaleShow()    {        if(_mainFrame != null)            return _mainFrame.bIsyScaleShow;        //2024.03.19 by SJW - yscale 보이게 설정 >>//        return false;        return true;        //2024.03.19 by SJW - yscale 보이게 설정 <<    }    public static boolean isyJonggaCurrentPrice()    {        if(_mainFrame != null)            return _mainFrame.bIsyJonggaCurrentPrice;        return false;    }    public static boolean isDayDivisionLineShow()    {        if(_mainFrame != null)            return _mainFrame.bIsDayDivisionLineShow;        return false;    }    public static boolean isUpperLowerLimit()    {        if(_mainFrame != null)            return _mainFrame.bIsUpperLowerLimit;        return false;    }    public static boolean isBongCntShow()    {        if(_mainFrame != null)            return _mainFrame.bIsBongCntShow;        return false;    }    public static boolean isSetScreenViewPanel()    {        if(_mainFrame != null)            return _mainFrame.bIsSetScreenViewPanel;        return false;    }    public static boolean isChuseLineValueTextShow()    {        if(_mainFrame != null)            return _mainFrame.bIsChuseLineValueTextShow;        return false;    }    //2021.01.05 by HJW - X,YScale 격자선 옵션화 >>    public static boolean isShowYScaleLine()    {        if(_mainFrame != null)            return _mainFrame.bIsShowYScaleLine;        return false;    }    public static boolean isShowXScaleLine()    {        if(_mainFrame != null)            return _mainFrame.bIsShowXScaleLine;        return false;    }    //2021.01.05 by HJW - X,YScale 격자선 옵션화 <<    //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화 >>    public static boolean isCrossLineJongga()    {        if(_mainFrame != null)            return _mainFrame.bIsCrossLineJongga;        return false;    }    //2021.01.07 by HJW - 십자선 종가 따라가기 옵션화 <<    public static int getSkinType()    {        if(_mainFrame != null)            return _mainFrame.g_nSkinType;        return SKIN_WHITE;    }    public static void setSkinType(int nSkinType)    {        _mainFrame.g_nSkinType = nSkinType;    }    //2020.03.26 차트 최대/최소 표시 설정 추가 - hjw >>    public static boolean isHighLowShow()    {        if(_mainFrame != null)            return _mainFrame.bIsHighLowShow;        return false;    }    //2020.03.26 차트 최대/최소 표시 설정 추가 - hjw <<    public static boolean isShowToolBarOneq()    {        if(_mainFrame != null)            return _mainFrame.bIsShowToolBarOneq;        return false;    }    //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장    public static String getChartSizeInfo() {        String strSizeInfo= "";        Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;        if(COMUtil.isPeriodConfigSave()) {            Enumeration<String> enumStr = COMUtil._mainFrame.loadPeriodSizeInfo.keys();            do {                if (!enumStr.hasMoreElements()) {                    break;                }                String key = enumStr.nextElement();                if (key.equals("")) {                    continue;                }                try {                    String itemStr = (String) COMUtil._mainFrame.loadPeriodSizeInfo.get(key);                    //key별로 저장                    if (itemStr != null && !itemStr.equals("")) {                        strSizeInfo += key + COMUtil.strPeriodConfigSaveGubun1 + itemStr + COMUtil.strPeriodConfigSaveGubun2;                        //데이터구조:"periodKey@@@contents###"                    }                } catch (Exception e) {                }            } while (enumStr.hasMoreElements());        }        else {            if (base.chartList.size() == 1) {                if (base._chart.m_strSizeInfo == null)                    strSizeInfo = "";                else {                    strSizeInfo = base._chart.m_strSizeInfo;                }            } else {                    int cLen = base.chartList.size();                    for (int i = 0; i < cLen; i++) {                        BaseChart pBaseChart = (BaseChart) base.chartList.get(i);                        //2014. 3. 21 차트 종목명 저장하는 구분자 변경하기>>                        if (pBaseChart.m_strSizeInfo != null)                            strSizeInfo += pBaseChart.m_strSizeInfo + "/";                        else                            strSizeInfo += "-/";                        //2014. 3. 21 차트 종목명 저장하는 구분자 변경하기<<                    }            }        }        return strSizeInfo;    }//    public static float getFontSize()//    {//        return nFontSize_paint;//    }    //2017.06.07 by PJM 비교차트 설정창 Back버튼 처리    public static void saveAndcloseCompareSettingPopup() {        if(comcompareSettingLayout!=null) {            if(compareSettingView != null)            {                compareSettingView.close();            }            _mainFrame.addRemovePopupView("2", comcompareSettingLayout);            Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;            base.setCompareSetting();        }    }    //2017.09.13 by pjm 한국시간 추가 >>    public static String getKoreanTime()    {        if(_mainFrame.bIsKoreanTime)            return "1";        else            return "0";    }    public static boolean isKoreanTime()    {        if(_mainFrame != null)            return _mainFrame.bIsKoreanTime;        return false;    }    //2017.09.13 by pjm 한국시간 추가 >>    //2016.12.22 by LYH >> 차트 블럭 리사이즈 저장 end//    /* Local HTS DB 데이터 삭제 *///    public static void removeLocalHtsFile(Context context, String fileName) {//        ChartsaveDBHelperForHts mHelper=null;//        SQLiteDatabase db = null;//        mHelper = new ChartsaveDBHelperForHts(context, fileName);//        db = mHelper.getWritableDatabase();//        db.execSQL("DELETE FROM "+fileName+" WHERE _id >=0");////        mHelper.close();//        db.close();//    }    //2017.08.08 by LYH >> 관심 지표 기능 처리.    public static SharedPreferences favoriteIndicatorPref = null;    public static SharedPreferences.Editor favoriteIndicatorPrefEditor = null;    private static ArrayList<String> arrFavoriteIndicator = new ArrayList<String>();    public static void addFavoriteIndicator(String strIndicator)    {        boolean bContains = false;        for(int i=0; i<arrFavoriteIndicator.size(); i++)        {            if(arrFavoriteIndicator.get(i).equals(strIndicator))                bContains = true;        }        if(!bContains)        {            arrFavoriteIndicator.add(strIndicator);            COMUtil.saveFavoriteIndicator();        }    }    public static ArrayList<String> getFavoriteIndicatorList()    {        return arrFavoriteIndicator;    }    public static void deleteFavoriteIndicator(String strIndicator)    {        for(int i=0; i<arrFavoriteIndicator.size(); i++)        {            if(arrFavoriteIndicator.get(i).equals(strIndicator))            {                arrFavoriteIndicator.remove(i);                COMUtil.saveFavoriteIndicator();                break;            }        }    }    public static void loadFavoriteIndicator()    {        if(null == COMUtil.favoriteIndicatorPref)        {            COMUtil.favoriteIndicatorPref = COMUtil._chartMain.getSharedPreferences("Favorite_Indicator", Activity.MODE_PRIVATE);            COMUtil.favoriteIndicatorPrefEditor = COMUtil.favoriteIndicatorPref.edit();            String strKey = "FavoriteIndicator";            String strFavorites = COMUtil.favoriteIndicatorPref.getString(strKey, "init");            boolean bFirst = false;            if(strFavorites.equals("init"))            {                strFavorites = "주가이동평균;거래대금;이격도;일목균형표;Bollinger Band;CCI;DMI;Envelope";                bFirst = true;            }            if (strFavorites != null && strFavorites != "") {                String[] arrFavorites = strFavorites.split(";");                for (int i = 0; i < arrFavorites.length; i++) {                    arrFavoriteIndicator.add(arrFavorites[i]);                }            }            if(bFirst)                saveFavoriteIndicator();        }    }    public static void saveFavoriteIndicator()    {        if(null != COMUtil.favoriteIndicatorPref)        {            String strKey = "FavoriteIndicator";            String strFavorites = "";            COMUtil.favoriteIndicatorPrefEditor.clear();            for(int i=0; i<arrFavoriteIndicator.size(); i++)            {                strFavorites += arrFavoriteIndicator.get(i) + ";";            }            COMUtil.favoriteIndicatorPrefEditor.putString(strKey, strFavorites);            COMUtil.favoriteIndicatorPrefEditor.commit();        }    }    //2017.08.08 by LYH >> 관심 지표 기능 처리. end    //2016.04.18 by hyh - 외부에서 색상 설정 - 색상을 적용하기 위해 버튼 Drawable 생성 >>    public static StateListDrawable getStateListDrawableFromColor(int nNormarColor, int nTouchedColor, float fRadius) {        GradientDrawable shapeButtonNormal = new GradientDrawable();        shapeButtonNormal.setShape(GradientDrawable.RECTANGLE);        shapeButtonNormal.setCornerRadius((int) COMUtil.getPixel(fRadius));        shapeButtonNormal.setColor(nNormarColor);        GradientDrawable shapeButtonShadow = new GradientDrawable();        shapeButtonShadow.setShape(GradientDrawable.RECTANGLE);        shapeButtonShadow.setCornerRadius((int) COMUtil.getPixel(fRadius));        shapeButtonShadow.setColor(Color.parseColor("#11000000"));        Drawable[] layersNormal = new Drawable[2];        layersNormal[0] = shapeButtonShadow;        layersNormal[1] = shapeButtonNormal;        LayerDrawable layerDrawableNormal = new LayerDrawable(layersNormal);        layerDrawableNormal.setLayerInset(1, 0, 0, 0, (int) COMUtil.getPixel(fRadius));        GradientDrawable shapeButtonTouched = new GradientDrawable();        shapeButtonTouched.setShape(GradientDrawable.RECTANGLE);        shapeButtonTouched.setCornerRadius((int) COMUtil.getPixel(fRadius));        shapeButtonTouched.setColor(nTouchedColor);        Drawable[] layersTouched = new Drawable[2];        layersTouched[0] = shapeButtonShadow;        layersTouched[1] = shapeButtonTouched;        LayerDrawable layerDrawableTouched = new LayerDrawable(layersTouched);        layerDrawableTouched.setLayerInset(1, 0, 0, 0, (int) COMUtil.getPixel(fRadius));        StateListDrawable stateListDrawableButton = new StateListDrawable();        stateListDrawableButton.addState(new int[]{android.R.attr.state_pressed}, layerDrawableTouched);        stateListDrawableButton.addState(new int[]{android.R.attr.state_focused}, layerDrawableTouched);        stateListDrawableButton.addState(new int[]{}, layerDrawableNormal);        return stateListDrawableButton;    }    public static StateListDrawable getStateListDrawableFromColorWithoutShadow(int nNormarColor, int nTouchedColor, float fRadius) {        GradientDrawable shapeButtonNormal = new GradientDrawable();        shapeButtonNormal.setShape(GradientDrawable.RECTANGLE);        shapeButtonNormal.setCornerRadius((int) COMUtil.getPixel(fRadius));        shapeButtonNormal.setColor(nNormarColor);        GradientDrawable shapeButtonTouched = new GradientDrawable();        shapeButtonTouched.setShape(GradientDrawable.RECTANGLE);        shapeButtonTouched.setCornerRadius((int) COMUtil.getPixel(fRadius));        shapeButtonTouched.setColor(nTouchedColor);        StateListDrawable stateListDrawableButton = new StateListDrawable();        stateListDrawableButton.addState(new int[]{android.R.attr.state_pressed}, shapeButtonTouched);        stateListDrawableButton.addState(new int[]{android.R.attr.state_focused}, shapeButtonTouched);        stateListDrawableButton.addState(new int[]{}, shapeButtonNormal);        return stateListDrawableButton;    }    //2016.04.18 by hyh - 외부에서 색상 설정 - 색상을 적용하기 위해 버튼 Drawable 생성 <<    //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 >>    public static String getFxMarginTypes() {        String strFxMarginTypes = "";        Base11 base = (Base11) COMUtil._mainFrame.mainBase.baseP;        if (base.chartList.size() == 1) {            strFxMarginTypes = "" + base._chart._cvm.nFxMarginType;        }        else {            int cLen = base.chartList.size();            for (int i = 0; i < cLen; i++) {                BaseChart pBaseChart = (BaseChart) base.chartList.get(i);                strFxMarginTypes += pBaseChart._cvm.nFxMarginType;                strFxMarginTypes += "/";            }        }        return strFxMarginTypes;    }    public static String getConnTypes() {        String strConnTypes = "";        Base11 base = (Base11) COMUtil._mainFrame.mainBase.baseP;        if (base.chartList.size() == 1) {            strConnTypes = base._chart._cvm.bIsConn ? "1" : "0";        }        else {            int cLen = base.chartList.size();            for (int i = 0; i < cLen; i++) {                BaseChart pBaseChart = (BaseChart) base.chartList.get(i);                strConnTypes += pBaseChart._cvm.bIsConn ? "1" : "0";                strConnTypes += "/";            }        }        return strConnTypes;    }    public static String getDayTypes() {        String strDayTypes = "";        Base11 base = (Base11) COMUtil._mainFrame.mainBase.baseP;        if (base.chartList.size() == 1) {            strDayTypes = base._chart._cvm.bIsDay ? "1" : "0";        }        else {            int cLen = base.chartList.size();            for (int i = 0; i < cLen; i++) {                BaseChart pBaseChart = (BaseChart) base.chartList.get(i);                strDayTypes += pBaseChart._cvm.bIsDay ? "1" : "0";                strDayTypes += "/";            }        }        return strDayTypes;    }    public static String getFloorTypes() {        String strFloorTypes = "";        Base11 base = (Base11) COMUtil._mainFrame.mainBase.baseP;        if (base.chartList.size() == 1) {            strFloorTypes = base._chart._cvm.bIsFloor ? "1" : "0";        }        else {            int cLen = base.chartList.size();            for (int i = 0; i < cLen; i++) {                BaseChart pBaseChart = (BaseChart) base.chartList.get(i);                strFloorTypes += pBaseChart._cvm.bIsFloor ? "1" : "0";                strFloorTypes += "/";            }        }        return strFloorTypes;    }    //2019. 06. 05 by hyh - 연속, 주간, 본장 유무 설정 <<    //2016. 08. 23 by hyh - 성능 개선. 시간 측정용 함수 생성 >>    //사용예 : COMUtil.printTimeStamp(Thread.currentThread().getStackTrace(), "Start");    private static boolean isPrintTimeStamp = false; //사용유무    private static Long longPreviousTimeStamp = System.currentTimeMillis();    private static Long longCurrentTimeStamp;    public static void printTimeStamp(StackTraceElement[] stackTraceElement){        printTimeStamp(stackTraceElement, "");    }    public static void printTimeStamp(StackTraceElement[] stackTraceElement, String strMessage){        if(!isPrintTimeStamp) return;        longCurrentTimeStamp = System.currentTimeMillis();        String fullClassName = stackTraceElement[2].getClassName();        String className = fullClassName.substring(fullClassName.lastIndexOf(".") + 1);        String methodName = stackTraceElement[2].getMethodName();        int lineNumber = stackTraceElement[2].getLineNumber();        System.out.println("== TimeStamp == " + className + "." + methodName + "():" + lineNumber + " / " + (longCurrentTimeStamp - longPreviousTimeStamp) + " / " + strMessage);        longPreviousTimeStamp = System.currentTimeMillis();    }    //2016. 08. 23 by hyh - 성능 개선. 시간 측정용 함수 생성 <<    //2019. 08. 21 by hyh - 자동추세선 복원 >>    public static String getAutoWaveLineStr() {        String strConv= "";        Base11 base = (Base11)COMUtil._mainFrame.mainBase.baseP;        if(base.chartList.size()==1) {            ChartViewModel _cvm = COMUtil._mainFrame.mainBase.baseP._chart._cvm;            strConv = String.valueOf(_cvm.autoTrendWaveType)+"="+String.valueOf(_cvm.autoTrendHighType)+"="+String.valueOf(_cvm.autoTrendLowType)+"="+String.valueOf(_cvm.autoTrendWType)+"="+String.valueOf(_cvm.preName)+"="+String.valueOf(_cvm.endName);        } else// if(COMUtil.chartMode == COMUtil.DIVIDE_CHART) {        {            int cLen = base.chartList.size();            for(int i=0; i<cLen; i++) {                BaseChart pBaseChart = base.chartList.get(i);                ChartViewModel _cvm = pBaseChart._cvm;                String item = String.valueOf(_cvm.autoTrendWaveType)+"="+String.valueOf(_cvm.autoTrendHighType)+"="+String.valueOf(_cvm.autoTrendLowType)+"="+String.valueOf(_cvm.autoTrendWType)+"="+String.valueOf(_cvm.preName)+"="+String.valueOf(_cvm.endName);                strConv +=item+"---";            }        }        return strConv;    }    //2019. 08. 21 by hyh - 자동추세선 복원 <<    public static String getDateDay(String date, String dateType) {        String day = "";        Date nDate = null;        SimpleDateFormat dateFormat = new SimpleDateFormat(dateType);        try {            nDate = dateFormat.parse(date);        } catch (Exception e){        }        Calendar cal = Calendar.getInstance();        cal.setTime(nDate);        int dayNum = cal.get(Calendar.DAY_OF_WEEK);        switch (dayNum) {            case 1:                day = "일";                break;            case 2:                day = "월";                break;            case 3:                day = "화";                break;            case 4:                day = "수";                break;            case 5:                day = "목";                break;            case 6:                day = "금";                break;            case 7:                day = "토";                break;        }        return day;    }    public static float       FORM_DESIGN_VERT_WIDTH   = 540;    public static float       FORM_DESIGN_VERT_HEIGHT  = 922.5f;    public static float      DISPLAY_VERT_WIDTH     = 1080;    public static float      DISPLAY_VERT_HEIGHT    = 1920;    public static float       FORM_DESIGN_HORZ_WIDTH   = 540;    public static float       FORM_DESIGN_HORZ_HEIGHT  = 922.5f;    public static float      DISPLAY_HORZ_WIDTH     = 1080;    public static float      DISPLAY_HORZ_HEIGHT    = 1920;    public static float	    FONT_BASE_SIZE				= 16.0f;    public static float     FONT_INC_UNIT	= 1.15f;    public static float calcFloatResize(float size, int type, int mode)    {        return COMUtil.getPixel(size);////        float resize = 0;//        try{//            if (mode == 0) {//                if (type == 0)    //세로//                    resize = (DISPLAY_VERT_HEIGHT * size / FORM_DESIGN_VERT_HEIGHT);//                else    //가로//                    resize = (DISPLAY_VERT_WIDTH * size / FORM_DESIGN_VERT_WIDTH);////            }//            // 가로모드//            else//            {//                if ( type == 0)    //세로//                    resize = (int) Math.round((float) DISPLAY_HORZ_HEIGHT * size / (float) FORM_DESIGN_HORZ_HEIGHT);//                else//                    resize = (int) Math.round((float) DISPLAY_HORZ_WIDTH * size / (float)FORM_DESIGN_HORZ_WIDTH);//            }//        }//        catch(Exception e){//            resize = 0;//            e.printStackTrace();//        }////        return resize;    }    public static float getPixel_W(float dip) {        return calcFloatResize(dip, 1, 0);    }    public static float getPixel_H(float dip) {        return calcFloatResize(dip, 0, 0);    }    public static void setTextSize(View view, int textSize)    {        if(view instanceof TextView)            ((TextView)view).setTextSize(TypedValue.COMPLEX_UNIT_PX, COMUtil.getFontSize(textSize));        else if(view instanceof Button)            ((Button)view).setTextSize(TypedValue.COMPLEX_UNIT_PX, COMUtil.getFontSize(textSize));        else if(view instanceof CheckBox)            ((CheckBox)view).setTextSize(TypedValue.COMPLEX_UNIT_PX, COMUtil.getFontSize(textSize));        else if(view instanceof EditText)            ((EditText)view).setTextSize(TypedValue.COMPLEX_UNIT_PX, COMUtil.getFontSize(textSize));    }    public static float getFontSize(int unit)    {        //float rate = FONT_RATE_BASE;//		// 작은폰트//		if (FONT_SIZE_MODE < 2) {//			if (unit >= -2) rate = FONT_RATE_BASE * 0.95f;//			else if (unit >= -4) rate = FONT_RATE_BASE * 0.97f;//		}//		// 큰폰트//		else if (FONT_SIZE_MODE > 2) {//			if (unit <= 3) rate = FONT_RATE_BASE * 1.1f;//			else if (unit <= 5) rate = FONT_RATE_BASE * 1.05f;////		}        return FONT_BASE_SIZE+unit*FONT_INC_UNIT;    }    /**     * CosysColor값에 맞게 변환     */    public static int[] convertColorToRGBArray(int color) {        int red = Color.red(color);        int green = Color.green(color);        int blue = Color.blue(color);        int[] rgbcolor = {red, green, blue};        return rgbcolor;    }    /**     * 통화화폐 리턴     */    public static String getCurrencySymbol() {        Currency currency = Currency.getInstance(Locale.getDefault());        return currency.getSymbol();    }    public static String fmt(double d)    {        if(d == (long) d)            return String.format("%d",(long)d);        else            return String.format("%s",d);    }    //2023. 01. 05 by hyh - Android 31 대응. 윈도우 사이즈 가져오기 로직 변경 >>    @SuppressLint("NewApi")    public static Rect getWindowRect() {        WindowManager wm = COMUtil._chartMain.getWindowManager();        int windowWidth = 0;        int windowHeight = 0;        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.R) {            WindowMetrics windowMetrics = wm.getCurrentWindowMetrics();            WindowInsets windowinsets = windowMetrics.getWindowInsets();            Insets insets = windowinsets.getInsetsIgnoringVisibility(WindowInsets.Type.navigationBars());            int insetsWidth = insets.right + insets.left;            int insetsHeight = insets.top + insets.bottom;            Rect rect = windowMetrics.getBounds();            windowWidth = rect.width() - insetsWidth;            windowHeight = rect.height() - insetsHeight;        }        else {            Display display = wm.getDefaultDisplay();            Point size = new Point();            display.getSize(size);            windowWidth = size.x;            windowHeight = size.y;        }        return new Rect(0, 0, windowWidth, windowHeight);    }    //2023. 01. 05 by hyh - Android 31 대응. 윈도우 사이즈 가져오기 로직 변경 <<    public static Dialog dialog = null;    private static Handler handler = new Handler();    //2023.11.20 by CYJ - kakaopay 토스트 다이어로그 종료되도록 수정 >>    public static void closeToastDialog() {        handler.removeCallbacksAndMessages(null);        if (dialog != null && dialog.isShowing()) {            dialog.dismiss();            dialog = null;        }    }    //2023.11.20 by CYJ - kakaopay 토스트 다이어로그 종료되도록 수정 <<    //2023.12.21 by CYJ - 토스트 다이어로그에서 토스트로 변경 >> 소프트 키보드 관련해서 오류로 인한 수정    public static void showToast(String msg, int messageGravity, Context context) {        Toast toast = new Toast(context);        LayoutInflater inflater = LayoutInflater.from(context);        View layout = inflater.inflate(R.layout.kfit_toast_dialog_dark, null);        layout.setMinimumWidth(COMUtil.apiView.getWidth() - (int) COMUtil.getPixel_W(16) * 2);        layout.setMinimumHeight((int) COMUtil.getPixel_H(52));        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);        lp.setMargins((int) COMUtil.getPixel_W(16) , 0, (int) COMUtil.getPixel_W(16), 0);        layout.setLayoutParams(lp);        TextView textView = layout.findViewById(R.id.kfit_alert_content);        textView.setTextAlignment(TEXT_ALIGNMENT_TEXT_START);        textView.setText(msg);        int gravity = Gravity.CENTER_HORIZONTAL;        if(messageGravity == 0) {            gravity |= Gravity.TOP;            toast.setGravity(gravity, 0, (int)COMUtil.getPixel_W(60));        } else if(messageGravity == 1) {            gravity |= Gravity.BOTTOM;            toast.setGravity(gravity, 0, (int)COMUtil.getPixel_W(94));  //2024.01.10 by CYJ - 전체 설정 초기화 플로우 수정 - 토스트 메세지 위치 조정 (바텀뷰 76 + 마진 16 + 2)        }        toast.setView(layout);        toast.setDuration(Toast.LENGTH_SHORT);        toast.show();    }    //2023.12.21 by CYJ - 토스트 다이어로그에서 토스트로 변경 << 소프트 키보드 관련해서 오류로 인한 수정    //2023.11.16 by CYJ - kakaopay 폴더블 해상도 대응 >>    public static Boolean checkFolded() {        if(COMUtil.apiView.getContext().getResources().getDisplayMetrics().widthPixels < 905 && COMUtil.apiView.getContext().getResources().getDisplayMetrics().widthPixels > 720) {            return true;        } else {            return false;        }    }    //2023.11.16 by CYJ - kakaopay 폴더블 해상도 대응 <<}